{"code":"import * as tslib_1 from \"tslib\";\r\nimport { action, computed, extendObservable, observable, set } from 'mobx';\r\nimport { MODEL_SINGLE_COLLECTION, UNDEFINED_TYPE } from './errors';\r\nimport { initModels, isSelectorFunction, upsertModel } from './helpers/collection';\r\nimport { error } from './helpers/format';\r\nimport { getModelCollection, getModelId, getModelType, modelToJSON, setModelMetaKey, updateModel, } from './helpers/model/utils';\r\nimport { PureModel } from './PureModel';\r\nvar PureCollection = /** @class */ (function () {\r\n    function PureCollection(data) {\r\n        if (data === void 0) { data = []; }\r\n        this.__data = observable.array([], { deep: false });\r\n        this.__dataMap = {};\r\n        this.__dataList = {};\r\n        extendObservable(this, {});\r\n        this.insert(data);\r\n    }\r\n    /**\r\n     * Function for inserting raw models into the collection. Used when hydrating the collection\r\n     *\r\n     * @param {Array<IRawModel>} data Raw model data\r\n     * @returns {Array<PureModel>} A list of initialized models\r\n     * @memberof Collection\r\n     */\r\n    PureCollection.prototype.insert = function (data) {\r\n        var models = initModels(this, data);\r\n        this.__insertModel(models);\r\n        return models;\r\n    };\r\n    PureCollection.prototype.add = function (data, model) {\r\n        return (data instanceof Array) ? this.__addArray(data, model) : this.__addSingle(data, model);\r\n    };\r\n    PureCollection.prototype.find = function (model, id) {\r\n        if (id instanceof PureModel) {\r\n            return id;\r\n        }\r\n        return isSelectorFunction(model)\r\n            ? (this.__data.find(model) || null)\r\n            : (this.__findByType(model, id) || null);\r\n    };\r\n    /**\r\n     * Filter models based on a matching function\r\n     *\r\n     * @param {TFilterFn} test Function used to match the models\r\n     * @returns {(PureModel|null)} The matching models\r\n     * @memberof Collection\r\n     */\r\n    PureCollection.prototype.filter = function (test) {\r\n        return this.__data.filter(test);\r\n    };\r\n    /**\r\n     * Find all matching models or all models if no type is given\r\n     *\r\n     * @param {(IType|typeof PureModel)} [model] Model type to select\r\n     * @returns {Array<PureModel>} List of matching models\r\n     * @memberof Collection\r\n     */\r\n    PureCollection.prototype.findAll = function (model) {\r\n        if (model) {\r\n            var type = getModelType(model);\r\n            if (!(type in this.__dataList)) {\r\n                set(this.__dataList, (_a = {}, _a[type] = observable.array([]), _a));\r\n            }\r\n            return this.__dataList[type];\r\n        }\r\n        return this.__data;\r\n        var _a;\r\n    };\r\n    /**\r\n     * Check if a model is in the collection\r\n     *\r\n     * @param {PureModel} model Model to check\r\n     * @returns {boolean} The given model is in the collection\r\n     * @memberof Collection\r\n     */\r\n    PureCollection.prototype.hasItem = function (model) {\r\n        var id = getModelId(model);\r\n        return Boolean(this.find(model, id));\r\n    };\r\n    PureCollection.prototype.remove = function (obj, id) {\r\n        var model = typeof obj === 'object' ? obj : this.find(obj, id);\r\n        if (model) {\r\n            this.__removeModel(model);\r\n        }\r\n    };\r\n    /**\r\n     * Remove all models of the given model type from the collection\r\n     *\r\n     * @param {(IType|typeof PureModel)} type Model type\r\n     * @memberof Collection\r\n     */\r\n    PureCollection.prototype.removeAll = function (type) {\r\n        this.__removeModel(this.findAll(type).slice());\r\n    };\r\n    Object.defineProperty(PureCollection.prototype, \"length\", {\r\n        /**\r\n         * A total count of models in the collection\r\n         *\r\n         * @readonly\r\n         * @type {number}\r\n         * @memberof Collection\r\n         */\r\n        get: function () {\r\n            return this.__data.length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Get the serializable value of the collection\r\n     *\r\n     * @returns {Array<IRawModel>} Pure JS value of the collection\r\n     * @memberof Collection\r\n     */\r\n    PureCollection.prototype.toJSON = function () {\r\n        return this.__data.map(modelToJSON);\r\n    };\r\n    Object.defineProperty(PureCollection.prototype, \"snapshot\", {\r\n        get: function () {\r\n            return this.toJSON();\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Reset the collection (remove all models)\r\n     *\r\n     * @memberof Collection\r\n     */\r\n    PureCollection.prototype.reset = function () {\r\n        this.__data.map(function (model) { return setModelMetaKey(model, 'collection', undefined); });\r\n        this.__data.replace([]);\r\n        this.__dataList = observable({});\r\n        this.__dataMap = observable({});\r\n    };\r\n    PureCollection.prototype.getAllModels = function () {\r\n        return this.__data.slice();\r\n    };\r\n    PureCollection.prototype.__addArray = function (data, model) {\r\n        var _this = this;\r\n        return data.filter(Boolean).map(function (item) { return _this.__addSingle(item, model); });\r\n    };\r\n    PureCollection.prototype.__addSingle = function (data, model) {\r\n        if (!data || typeof data === 'number' || typeof data === 'string') {\r\n            return data;\r\n        }\r\n        if (data instanceof PureModel) {\r\n            if (!this.hasItem(data)) {\r\n                this.__insertModel(data);\r\n            }\r\n            return data;\r\n        }\r\n        if (!model && model !== 0) {\r\n            throw error(UNDEFINED_TYPE);\r\n        }\r\n        var type = getModelType(model);\r\n        var modelInstance = upsertModel(data, type, this);\r\n        this.__insertModel(modelInstance, type);\r\n        return modelInstance;\r\n    };\r\n    PureCollection.prototype.__insertModel = function (model, type, id) {\r\n        var _this = this;\r\n        if (model instanceof Array) {\r\n            return model.forEach(function (item) { return _this.__insertModel(item, type, id); });\r\n        }\r\n        var collection = getModelCollection(model);\r\n        if (collection && collection !== this) {\r\n            throw error(MODEL_SINGLE_COLLECTION);\r\n        }\r\n        var modelType = type || getModelType(model);\r\n        var modelId = id || getModelId(model);\r\n        var stringType = modelType.toString();\r\n        var existingModel = this.find(modelType, modelId);\r\n        if (existingModel) {\r\n            updateModel(existingModel, model);\r\n            return;\r\n        }\r\n        this.__data.push(model);\r\n        if (modelType in this.__dataList) {\r\n            this.__dataList[modelType].push(model);\r\n        }\r\n        else {\r\n            set(this.__dataList, stringType, observable.array([model], { deep: false }));\r\n        }\r\n        if (modelType in this.__dataMap) {\r\n            set(this.__dataMap[modelType], modelId.toString(), model);\r\n        }\r\n        else {\r\n            set(this.__dataMap, stringType, observable.shallowObject((_a = {}, _a[modelId] = model, _a)));\r\n        }\r\n        setModelMetaKey(model, 'collection', this);\r\n        var _a;\r\n    };\r\n    PureCollection.prototype.__removeModel = function (model, type, id) {\r\n        var _this = this;\r\n        if (model instanceof Array) {\r\n            return model.forEach(function (item) { return _this.__removeModel(item, type, id); });\r\n        }\r\n        var modelType = type || getModelType(model);\r\n        var modelId = id || getModelId(model);\r\n        this.__data.remove(model);\r\n        this.__dataList[modelType].remove(model);\r\n        set(this.__dataMap[modelType], modelId.toString(), undefined);\r\n        setModelMetaKey(model, 'collection', undefined);\r\n    };\r\n    PureCollection.prototype.__findByType = function (model, id) {\r\n        var type = getModelType(model);\r\n        var stringType = type.toString();\r\n        if (id) {\r\n            if (!(type in this.__dataMap)) {\r\n                set(this.__dataMap, stringType, (_a = {}, _a[id] = undefined, _a));\r\n            }\r\n            else if (!(id in this.__dataMap[type])) {\r\n                set(this.__dataMap[type], id.toString(), undefined);\r\n            }\r\n            return this.__dataMap[type][id];\r\n        }\r\n        else {\r\n            if (!(type in this.__dataList)) {\r\n                set(this.__dataList, stringType, observable.array([], { deep: false }));\r\n            }\r\n            return this.__dataList[type].length ? this.__dataList[type][0] : null;\r\n        }\r\n        var _a;\r\n    };\r\n    PureCollection.prototype.__changeModelId = function (oldId, newId, type) {\r\n        this.__dataMap[type][newId] = this.__dataMap[type][oldId];\r\n        delete this.__dataMap[type][oldId];\r\n    };\r\n    /**\r\n     * List of models available in the collection\r\n     *\r\n     * @static\r\n     * @type {Array<typeof PureModel>}\r\n     * @memberof Collection\r\n     */\r\n    PureCollection.types = [];\r\n    tslib_1.__decorate([\r\n        observable\r\n    ], PureCollection.prototype, \"__dataMap\", void 0);\r\n    tslib_1.__decorate([\r\n        observable\r\n    ], PureCollection.prototype, \"__dataList\", void 0);\r\n    tslib_1.__decorate([\r\n        action\r\n    ], PureCollection.prototype, \"insert\", null);\r\n    tslib_1.__decorate([\r\n        action\r\n    ], PureCollection.prototype, \"add\", null);\r\n    tslib_1.__decorate([\r\n        action\r\n    ], PureCollection.prototype, \"remove\", null);\r\n    tslib_1.__decorate([\r\n        action\r\n    ], PureCollection.prototype, \"removeAll\", null);\r\n    tslib_1.__decorate([\r\n        computed\r\n    ], PureCollection.prototype, \"length\", null);\r\n    tslib_1.__decorate([\r\n        action\r\n    ], PureCollection.prototype, \"reset\", null);\r\n    return PureCollection;\r\n}());\r\nexport { PureCollection };\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUHVyZUNvbGxlY3Rpb24uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzcmMvUHVyZUNvbGxlY3Rpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLE9BQU8sRUFBQyxNQUFNLEVBQUUsUUFBUSxFQUFZLGdCQUFnQixFQUF1QyxVQUFVLEVBQUUsR0FBRyxFQUFDLE1BQU0sTUFBTSxDQUFDO0FBRXhILE9BQU8sRUFBQyx1QkFBdUIsRUFBbUIsY0FBYyxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQ2xGLE9BQU8sRUFBQyxVQUFVLEVBQUUsa0JBQWtCLEVBQUUsV0FBVyxFQUFDLE1BQU0sc0JBQXNCLENBQUM7QUFDakYsT0FBTyxFQUFDLEtBQUssRUFBQyxNQUFNLGtCQUFrQixDQUFDO0FBQ3ZDLE9BQU8sRUFDTCxrQkFBa0IsRUFDbEIsVUFBVSxFQUNWLFlBQVksRUFDWixXQUFXLEVBQ1gsZUFBZSxFQUNmLFdBQVcsR0FDWixNQUFNLHVCQUF1QixDQUFDO0FBSy9CLE9BQU8sRUFBQyxTQUFTLEVBQUMsTUFBTSxhQUFhLENBQUM7QUFFdEM7SUFrQkUsd0JBQVksSUFBMkI7UUFBM0IscUJBQUEsRUFBQSxTQUEyQjtRQUwvQixXQUFNLEdBQWdDLFVBQVUsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFLEVBQUMsSUFBSSxFQUFFLEtBQUssRUFBQyxDQUFDLENBQUM7UUFFOUQsY0FBUyxHQUF3QyxFQUFFLENBQUM7UUFDcEQsZUFBVSxHQUE2QyxFQUFFLENBQUM7UUFHNUUsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzNCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDcEIsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNZLCtCQUFNLEdBQWIsVUFBYyxJQUErQjtRQUNuRCxJQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3RDLElBQUksQ0FBQyxhQUFhLENBQUMs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QUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDakMsSUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBRW5DLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDUCxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzlCLEdBQUcsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLFVBQVUsWUFBRyxHQUFDLEVBQUUsSUFBRyxTQUFTLE1BQUUsQ0FBQztZQUNyRCxDQUFDO1lBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztnQkFDekMsR0FBRyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLFFBQVEsRUFBRSxFQUFFLFNBQVMsQ0FBQyxDQUFDO1lBQ3RELENBQUM7WUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNsQyxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQy9CLEdBQUcsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLFVBQVUsRUFBRSxVQUFVLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRSxFQUFDLElBQUksRUFBRSxLQUFLLEVBQUMsQ0FBQyxDQUFDLENBQUM7WUFDeEUsQ0FBQztZQUNELE1BQU0sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQ3hFLENBQUM7O0lBQ0gsQ0FBQztJQUVPLHdDQUFlLEdBQXZCLFVBQXdCLEtBQWtCLEVBQUUsS0FBa0IsRUFBRSxJQUFXO1FBQ3pFLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxRCxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDckMsQ0FBQztJQTFVRDs7Ozs7O09BTUc7SUFDVyxvQkFBSyxHQUF5RCxFQUFFLENBQUM7SUFNbkU7UUFBWCxVQUFVO3FEQUE2RDtJQUM1RDtRQUFYLFVBQVU7c0RBQW1FO0lBY3RFO1FBQVAsTUFBTTtnREFJTjtJQTRDTztRQUFQLE1BQU07NkNBS047SUF5Rk87UUFBUCxNQUFNO2dEQUtOO0lBUU87UUFBUCxNQUFNO21EQUVOO0lBU1M7UUFBVCxRQUFRO2dEQUVSO0lBcUJPO1FBQVAsTUFBTTsrQ0FLTjtJQTZHSCxxQkFBQztDQUFBLEFBN1VELElBNlVDO1NBN1VZLGNBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0lEaWN0aW9uYXJ5LCBJUmF3TW9kZWx9IGZyb20gJ2RhdHgtdXRpbHMnO1xuaW1wb3J0IHthY3Rpb24sIGNvbXB1dGVkLCBkZWNvcmF0ZSwgZXh0ZW5kT2JzZXJ2YWJsZSwgSU9ic2VydmFibGVBcnJheSwgSU9ic2VydmFibGVPYmplY3QsIG9ic2VydmFibGUsIHNldH0gZnJvbSAnbW9ieCc7XG5cbmltcG9ydCB7TU9ERUxfU0lOR0xFX0NPTExFQ1RJT04sIFVOREVGSU5FRF9NT0RFTCwgVU5ERUZJTkVEX1RZUEV9IGZyb20gJy4vZXJyb3JzJztcbmltcG9ydCB7aW5pdE1vZGVscywgaXNTZWxlY3RvckZ1bmN0aW9uLCB1cHNlcnRNb2RlbH0gZnJvbSAnLi9oZWxwZXJzL2NvbGxlY3Rpb24nO1xuaW1wb3J0IHtlcnJvcn0gZnJvbSAnLi9oZWxwZXJzL2Zvcm1hdCc7XG5pbXBvcnQge1xuICBnZXRNb2RlbENvbGxlY3Rpb24sXG4gIGdldE1vZGVsSWQsXG4gIGdldE1vZGVsVHlwZSxcbiAgbW9kZWxUb0pTT04sXG4gIHNldE1vZGVsTWV0YUtleSxcbiAgdXBkYXRlTW9kZWwsXG59IGZyb20gJy4vaGVscGVycy9tb2RlbC91dGlscyc7XG5pbXBvcnQge0lJZGVudGlmaWVyfSBmcm9tICcuL2ludGVyZmFjZXMvSUlkZW50aWZpZXInO1xuaW1wb3J0IHtJTW9kZWxDb25zdHJ1Y3Rvcn0gZnJvbSAnLi9pbnRlcmZhY2VzL0lNb2RlbENvbnN0cnVjdG9yJztcbmltcG9ydCB7SVR5cGV9IGZyb20gJy4vaW50ZXJmYWNlcy9JVHlwZSc7XG5pbXBvcnQge1RGaWx0ZXJGbn0gZnJvbSAnLi9pbnRlcmZhY2VzL1RGaWx0ZXJGbic7XG5pbXBvcnQge1B1cmVNb2RlbH0gZnJvbSAnLi9QdXJlTW9kZWwnO1xuXG5leHBvcnQgY2xhc3MgUHVyZUNvbGxlY3Rpb24ge1xuXG4gIC8qKlxuICAgKiBMaXN0IG9mIG1vZGVscyBhdmFpbGFibGUgaW4gdGhlIGNvbGxlY3Rpb25cbiAgICpcbiAgICogQHN0YXRpY1xuICAgKiBAdHlwZSB7QXJyYXk8dHlwZW9mIFB1cmVNb2RlbD59XG4gICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHR5cGVzOiBBcnJheTx0eXBlb2YgUHVyZU1vZGVsfElNb2RlbENvbnN0cnVjdG9yPFB1cmVNb2RlbD4+ID0gW107XG5cbiAgcHVibGljIHN0YXRpYyBkZWZhdWx0TW9kZWw/OiB0eXBlb2YgUHVyZU1vZGVsO1xuXG4gIHByaXZhdGUgX19kYXRhOiBJT2JzZXJ2YWJsZUFycmF5PFB1cmVNb2RlbD4gPSBvYnNlcnZhYmxlLmFycmF5KFtdLCB7ZGVlcDogZmFsc2V9KTtcblxuICBAb2JzZXJ2YWJsZSBwcml2YXRlIF9fZGF0YU1hcDogSURpY3Rpb25hcnk8SURpY3Rpb25hcnk8UHVyZU1vZGVsPj4gPSB7fTtcbiAgQG9ic2VydmFibGUgcHJpdmF0ZSBfX2RhdGFMaXN0OiBJRGljdGlvbmFyeTxJT2JzZXJ2YWJsZUFycmF5PFB1cmVNb2RlbD4+ID0ge307XG5cbiAgY29uc3RydWN0b3IoZGF0YTogQXJyYXk8SVJhd01vZGVsPiA9IFtdKSB7XG4gICAgZXh0ZW5kT2JzZXJ2YWJsZSh0aGlzLCB7fSk7XG4gICAgdGhpcy5pbnNlcnQoZGF0YSk7XG4gIH1cblxuICAvKipcbiAgICogRnVuY3Rpb24gZm9yIGluc2VydGluZyByYXcgbW9kZWxzIGludG8gdGhlIGNvbGxlY3Rpb24uIFVzZWQgd2hlbiBoeWRyYXRpbmcgdGhlIGNvbGxlY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheTxJUmF3TW9kZWw+fSBkYXRhIFJhdyBtb2RlbCBkYXRhXG4gICAqIEByZXR1cm5zIHtBcnJheTxQdXJlTW9kZWw+fSBBIGxpc3Qgb2YgaW5pdGlhbGl6ZWQgbW9kZWxzXG4gICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uXG4gICAqL1xuICBAYWN0aW9uIHB1YmxpYyBpbnNlcnQoZGF0YTogQXJyYXk8UGFydGlhbDxJUmF3TW9kZWw+Pik6IEFycmF5PFB1cmVNb2RlbD4ge1xuICAgIGNvbnN0IG1vZGVscyA9IGluaXRNb2RlbHModGhpcywgZGF0YSk7XG4gICAgdGhpcy5fX2luc2VydE1vZGVsKG1vZGVscyk7XG4gICAgcmV0dXJuIG1vZGVscztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gZXhpc3RpbmcgbW9kZWwgdG8gdGhlIGNvbGxlY3Rpb25cbiAgICpcbiAgICogQHRlbXBsYXRlIFRcbiAgICogQHBhcmFtIHtUfSBkYXRhIE1vZGVsIHRvIGJlIGFkZGVkXG4gICAqIEByZXR1cm5zIHtUfSBBZGRlZCBtb2RlbFxuICAgKiBAbWVtYmVyb2YgQ29sbGVjdGlvblxuICAgKi9cbiAgcHVibGljIGFkZDxUIGV4dGVuZHMgUHVyZU1vZGVsPihkYXRhOiBUKTogVDtcblxuICAvKipcbiAgICogQWRkIGFuIGFycmF5IG9mIGV4aXN0aW5nIG1vZGVscyB0byB0aGUgY29sbGVjdGlvblxuICAgKlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKiBAcGFyYW0ge0FycmF5PFQ+fSBkYXRhIEFycmF5IG9mIG1vZGVscyB0byBiZSBhZGRlZFxuICAgKiBAcmV0dXJucyB7QXJyYXk8VD59IEFkZGVkIG1vZGVsc1xuICAgKiBAbWVtYmVyb2YgQ29sbGVjdGlvblxuICAgKi9cbiAgcHVibGljIGFkZDxUIGV4dGVuZHMgUHVyZU1vZGVsPihkYXRhOiBBcnJheTxUPik6IEFycmF5PFQ+O1xuXG4gIC8qKlxuICAgKiBBZGQgYW4gYXJyYXkgb2YgbmV3IG1vZGVscyB0byB0aGUgY29sbGVjdGlvblxuICAgKlxuICAgKiBAdGVtcGxhdGUgVFxuICAgKiBAcGFyYW0ge0FycmF5PElSYXdNb2RlbHxJRGljdGlvbmFyeTxhbnk+Pn0gZGF0YSBBcnJheSBvZiBuZXcgZGF0YSB0byBiZSBhZGRlZFxuICAgKiBAcGFyYW0geyhJVHlwZXxJTW9kZWxDb25zdHJ1Y3RvcjxUPil9IG1vZGVsIE1vZGVsIHR5cGUgdG8gYmUgYWRkZWRcbiAgICogQHJldHVybnMge0FycmF5PFQ+fSBBZGRlZCBtb2RlbHNcbiAgICogQG1lbWJlcm9mIENvbGxlY3Rpb25cbiAgICovXG4gIHB1YmxpYyBhZGQ8VCBleHRlbmRzIFB1cmVNb2RlbD4oZGF0YTogQXJyYXk8SVJhd01vZGVsfElEaWN0aW9uYXJ5PGFueT4+LCBtb2RlbDogSVR5cGV8SU1vZGVsQ29uc3RydWN0b3I8VD4pOiBBcnJheTxUPjtcblxuICAvKipcbiAgICogQWRkIGEgbmV3IG1vZGVsIHRvIHRoZSBjb2xsZWN0aW9uXG4gICAqXG4gICAqIEB0ZW1wbGF0ZSBUXG4gICAqIEBwYXJhbSB7KElSYXdNb2RlbHxJRGljdGlvbmFyeTxhbnk+KX0gZGF0YSBOZXcgZGF0YSB0byBiZSBhZGRlZFxuICAgKiBAcGFyYW0geyhJVHlwZXxJTW9kZWxDb25zdHJ1Y3RvcjxUPil9IG1vZGVsIE1vZGVsIHR5cGUgdG8gYmUgYWRkZWRcbiAgICogQHJldHVybnMge1R9IEFkZGVkIG1vZGVsXG4gICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uXG4gICAqL1xuICBwdWJsaWMgYWRkPFQgZXh0ZW5kcyBQdXJlTW9kZWw+KGRhdGE6IElSYXdNb2RlbHxJRGljdGlvbmFyeTxhbnk+LCBtb2RlbDogSVR5cGV8SU1vZGVsQ29uc3RydWN0b3I8VD4pOiBUO1xuXG4gIEBhY3Rpb24gcHVibGljIGFkZChcbiAgICBkYXRhOiBQdXJlTW9kZWx8SVJhd01vZGVsfElEaWN0aW9uYXJ5PGFueT58QXJyYXk8UHVyZU1vZGVsPnxBcnJheTxJUmF3TW9kZWx8SURpY3Rpb25hcnk8YW55Pj4sXG4gICAgbW9kZWw/OiBJVHlwZXxJTW9kZWxDb25zdHJ1Y3RvcixcbiAgKTogUHVyZU1vZGVsfEFycmF5PFB1cmVNb2RlbD4ge1xuICAgIHJldHVybiAoZGF0YSBpbnN0YW5jZW9mIEFycmF5KSA/IHRoaXMuX19hZGRBcnJheShkYXRhLCBtb2RlbCkgOiB0aGlzLl9fYWRkU2luZ2xlKGRhdGEsIG1vZGVsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIGEgbW9kZWwgYmFzZWQgb24gdGhlIGRlZmluZWQgdHlwZSBhbmQgKG9wdGlvbmFsKSBpZGVudGlmaWVyXG4gICAqXG4gICAqIEBwYXJhbSB7KElUeXBlfHR5cGVvZiBQdXJlTW9kZWx8UHVyZU1vZGVsKX0gdHlwZSBNb2RlbCB0eXBlXG4gICAqIEBwYXJhbSB7SUlkZW50aWZpZXJ9IFtpZF0gTW9kZWwgaWRlbnRpZmllclxuICAgKiBAcmV0dXJucyB7KFB1cmVNb2RlbHxudWxsKX0gVGhlIGZpcnN0IG1hdGNoaW5nIG1vZGVsXG4gICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uXG4gICAqL1xuICBwdWJsaWMgZmluZDxUIGV4dGVuZHMgUHVyZU1vZGVsPih0eXBlOiBJVHlwZXxUfElNb2RlbENvbnN0cnVjdG9yPFQ+LCBpZD86IElJZGVudGlmaWVyfFB1cmVNb2RlbCk6IFR8bnVsbDtcblxuICAvKipcbiAgICogRmluZCBhIG1vZGVsIGJhc2VkIG9uIGEgbWF0Y2hpbmcgZnVuY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHtURmlsdGVyRm59IHRlc3QgRnVuY3Rpb24gdXNlZCB0byBtYXRjaCB0aGUgbW9kZWxcbiAgICogQHJldHVybnMgeyhQdXJlTW9kZWx8bnVsbCl9IFRoZSBmaXJzdCBtYXRjaGluZyBtb2RlbFxuICAgKiBAbWVtYmVyb2YgQ29sbGVjdGlvblxuICAgKi9cbiAgcHVibGljIGZpbmQ8VCBleHRlbmRzIFB1cmVNb2RlbD4odGVzdDogVEZpbHRlckZuKTogVHxudWxsO1xuXG4gIHB1YmxpYyBmaW5kKG1vZGVsOiBJVHlwZXx0eXBlb2YgUHVyZU1vZGVsfChURmlsdGVyRm4pLCBpZD86IElJZGVudGlmaWVyfFB1cmVNb2RlbCkge1xuICAgIGlmIChpZCBpbnN0YW5jZW9mIFB1cmVNb2RlbCkge1xuICAgICAgcmV0dXJuIGlkO1xuICAgIH1cblxuICAgIHJldHVybiBpc1NlbGVjdG9yRnVuY3Rpb24obW9kZWwpXG4gICAgICA/ICh0aGlzLl9fZGF0YS5maW5kKG1vZGVsIGFzIFRGaWx0ZXJGbikgfHwgbnVsbClcbiAgICAgIDogKHRoaXMuX19maW5kQnlUeXBlKG1vZGVsIGFzIHR5cGVvZiBQdXJlTW9kZWwsIGlkKSB8fCBudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGaWx0ZXIgbW9kZWxzIGJhc2VkIG9uIGEgbWF0Y2hpbmcgZnVuY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHtURmlsdGVyRm59IHRlc3QgRnVuY3Rpb24gdXNlZCB0byBtYXRjaCB0aGUgbW9kZWxzXG4gICAqIEByZXR1cm5zIHsoUHVyZU1vZGVsfG51bGwpfSBUaGUgbWF0Y2hpbmcgbW9kZWxzXG4gICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uXG4gICAqL1xuICBwdWJsaWMgZmlsdGVyKHRlc3Q6IFRGaWx0ZXJGbik6IEFycmF5PFB1cmVNb2RlbD4ge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YS5maWx0ZXIodGVzdCk7XG4gIH1cblxuICAvKipcbiAgICogRmluZCBhbGwgbWF0Y2hpbmcgbW9kZWxzIG9yIGFsbCBtb2RlbHMgaWYgbm8gdHlwZSBpcyBnaXZlblxuICAgKlxuICAgKiBAcGFyYW0geyhJVHlwZXx0eXBlb2YgUHVyZU1vZGVsKX0gW21vZGVsXSBNb2RlbCB0eXBlIHRvIHNlbGVjdFxuICAgKiBAcmV0dXJucyB7QXJyYXk8UHVyZU1vZGVsPn0gTGlzdCBvZiBtYXRjaGluZyBtb2RlbHNcbiAgICogQG1lbWJlcm9mIENvbGxlY3Rpb25cbiAgICovXG4gIHB1YmxpYyBmaW5kQWxsPFQgZXh0ZW5kcyBQdXJlTW9kZWw+KG1vZGVsPzogSVR5cGV8SU1vZGVsQ29uc3RydWN0b3I8VD4pOiBBcnJheTxUPiB7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICBjb25zdCB0eXBlID0gZ2V0TW9kZWxUeXBlKG1vZGVsKTtcbiAgICAgIGlmICghKHR5cGUgaW4gdGhpcy5fX2RhdGFMaXN0KSkge1xuICAgICAgICBzZXQodGhpcy5fX2RhdGFMaXN0LCB7W3R5cGVdOiBvYnNlcnZhYmxlLmFycmF5KFtdKX0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX19kYXRhTGlzdFt0eXBlXSBhcyBJT2JzZXJ2YWJsZUFycmF5PFQ+O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fX2RhdGEgYXMgSU9ic2VydmFibGVBcnJheTxUPjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIG1vZGVsIGlzIGluIHRoZSBjb2xsZWN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7UHVyZU1vZGVsfSBtb2RlbCBNb2RlbCB0byBjaGVja1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gVGhlIGdpdmVuIG1vZGVsIGlzIGluIHRoZSBjb2xsZWN0aW9uXG4gICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uXG4gICAqL1xuICBwdWJsaWMgaGFzSXRlbShtb2RlbDogUHVyZU1vZGVsKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaWQgPSBnZXRNb2RlbElkKG1vZGVsKTtcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLmZpbmQobW9kZWwsIGlkKSk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIHRoZSBmaXJzdCBtb2RlbCBiYXNlZCBvbiB0aGUgdHlwZSBhbmQgKG9wdGlvbmFsKSBpZGVudGlmaWVyXG4gICAqXG4gICAqIEBwYXJhbSB7KElUeXBlfHR5cGVvZiBQdXJlTW9kZWwpfSB0eXBlIE1vZGVsIHR5cGVcbiAgICogQHBhcmFtIHtJSWRlbnRpZmllcn0gW2lkXSBNb2RlbCBpZGVudGlmaWVyXG4gICAqIEBtZW1iZXJvZiBDb2xsZWN0aW9uXG4gICAqL1xuICBwdWJsaWMgcmVtb3ZlKHR5cGU6IElUeXBlfHR5cGVvZiBQdXJlTW9kZWwsIGlkPzogSUlkZW50aWZpZXIpO1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGdpdmVuIG1vZGVsIGZyb20gdGhlIGNvbGxlY3Rpb25cbiAgICpcbiAgICogQHBhcmFtIHtQdXJlTW9kZWx9IG1vZGVsIE1vZGVsIHRvIGJlIHJlbW92ZWQgZnJvbSB0aGUgY29sbGVjdGlvblxuICAgKiBAbWVtYmVyb2YgQ29sbGVjdGlvblxuICAgKi9cbiAgcHVibGljIHJlbW92ZShtb2RlbDogUHVyZU1vZGVsKTtcblxuICBAYWN0aW9uIHB1YmxpYyByZW1vdmUob2JqOiBJVHlwZXx0eXBlb2YgUHVyZU1vZGVsfFB1cmVNb2RlbCwgaWQ/OiBJSWRlbnRpZmllcikge1xuICAgIGNvbnN0IG1vZGVsID0gdHlwZW9mIG9iaiA9PT0gJ29iamVjdCcgPyBvYmogOiB0aGlzLmZpbmQob2JqLCBpZCk7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICB0aGlzLl9fcmVtb3ZlTW9kZWwobW9kZWwpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIG1vZGVscyBvZiB0aGUgZ2l2ZW4gbW9kZWwgdHlwZSBmcm9tIHRoZSBjb2xsZWN0aW9uXG4gICAqXG4gICAqIEBwYXJhbSB7KElUeXBlfHR5cGVvZiBQdXJlTW9kZWwpfSB0eXBlIE1vZGVsIHR5cGVcbiAgICogQG1lbWJlcm9mIENvbGxlY3Rpb25cbiAgICovXG4gIEBhY3Rpb24gcHVibGljIHJlbW92ZUFsbCh0eXBlOiBJVHlwZXx0eXBlb2YgUHVyZU1vZGVsKSB7XG4gICAgdGhpcy5fX3JlbW92ZU1vZGVsKHRoaXMuZmluZEFsbCh0eXBlKS5zbGljZSgpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIHRvdGFsIGNvdW50IG9mIG1vZGVscyBpbiB0aGUgY29sbGVjdGlvblxuICAgKlxuICAgKiBAcmVhZG9ubHlcbiAgICogQHR5cGUge251bWJlcn1cbiAgICogQG1lbWJlcm9mIENvbGxlY3Rpb25cbiAgICovXG4gIEBjb21wdXRlZCBwdWJsaWMgZ2V0IGxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YS5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBzZXJpYWxpemFibGUgdmFsdWUgb2YgdGhlIGNvbGxlY3Rpb25cbiAgICpcbiAgICogQHJldHVybnMge0FycmF5PElSYXdNb2RlbD59IFB1cmUgSlMgdmFsdWUgb2YgdGhlIGNvbGxlY3Rpb25cbiAgICogQG1lbWJlcm9mIENvbGxlY3Rpb25cbiAgICovXG4gIHB1YmxpYyB0b0pTT04oKTogQXJyYXk8SVJhd01vZGVsPiB7XG4gICAgcmV0dXJuIHRoaXMuX19kYXRhLm1hcChtb2RlbFRvSlNPTik7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHNuYXBzaG90KCkge1xuICAgIHJldHVybiB0aGlzLnRvSlNPTigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc2V0IHRoZSBjb2xsZWN0aW9uIChyZW1vdmUgYWxsIG1vZGVscylcbiAgICpcbiAgICogQG1lbWJlcm9mIENvbGxlY3Rpb25cbiAgICovXG4gIEBhY3Rpb24gcHVibGljIHJlc2V0KCkge1xuICAgIHRoaXMuX19kYXRhLm1hcCgobW9kZWwpID0+IHNldE1vZGVsTWV0YUtleShtb2RlbCwgJ2NvbGxlY3Rpb24nLCB1bmRlZmluZWQpKTtcbiAgICB0aGlzLl9fZGF0YS5yZXBsYWNlKFtdKTtcbiAgICB0aGlzLl9fZGF0YUxpc3QgPSBvYnNlcnZhYmxlKHt9KSBhcyBJT2JzZXJ2YWJsZU9iamVjdCAmIElEaWN0aW9uYXJ5PElPYnNlcnZhYmxlQXJyYXk8UHVyZU1vZGVsPj47XG4gICAgdGhpcy5fX2RhdGFNYXAgPSBvYnNlcnZhYmxlKHt9KSBhcyBJT2JzZXJ2YWJsZU9iamVjdCAmSURpY3Rpb25hcnk8SURpY3Rpb25hcnk8UHVyZU1vZGVsPj47XG4gIH1cblxuICBwdWJsaWMgZ2V0QWxsTW9kZWxzKCkge1xuICAgIHJldHVybiB0aGlzLl9fZGF0YS5zbGljZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBfX2FkZEFycmF5PFQgZXh0ZW5kcyBQdXJlTW9kZWw+KGRhdGE6IEFycmF5PFQ+KTogQXJyYXk8VD47XG4gIHByaXZhdGUgX19hZGRBcnJheTxUIGV4dGVuZHMgUHVyZU1vZGVsPihkYXRhOiBBcnJheTxJRGljdGlvbmFyeTxhbnk+PiwgbW9kZWw/OiBJVHlwZXxJTW9kZWxDb25zdHJ1Y3RvcjxUPik6IEFycmF5PFQ+O1xuICBwcml2YXRlIF9fYWRkQXJyYXkoZGF0YTogQXJyYXk8UHVyZU1vZGVsfElEaWN0aW9uYXJ5PGFueT4+LCBtb2RlbD86IElUeXBlfElNb2RlbENvbnN0cnVjdG9yKTogQXJyYXk8UHVyZU1vZGVsPiB7XG4gICAgcmV0dXJuIGRhdGEuZmlsdGVyKEJvb2xlYW4pLm1hcCgoaXRlbSkgPT4gdGhpcy5fX2FkZFNpbmdsZShpdGVtLCBtb2RlbCkpO1xuICB9XG5cbiAgcHJpdmF0ZSBfX2FkZFNpbmdsZTxUIGV4dGVuZHMgUHVyZU1vZGVsPihkYXRhOiBUKTogVDtcbiAgcHJpdmF0ZSBfX2FkZFNpbmdsZTxUIGV4dGVuZHMgUHVyZU1vZGVsPihkYXRhOiBJRGljdGlvbmFyeTxhbnk+LCBtb2RlbD86IElUeXBlfElNb2RlbENvbnN0cnVjdG9yPFQ+KTogVDtcbiAgcHJpdmF0ZSBfX2FkZFNpbmdsZShkYXRhOiBQdXJlTW9kZWx8SURpY3Rpb25hcnk8YW55PnxJSWRlbnRpZmllciwgbW9kZWw/OiBJVHlwZXxJTW9kZWxDb25zdHJ1Y3Rvcikge1xuICAgIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIGRhdGEgPT09ICdzdHJpbmcnKSB7XG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBpZiAoZGF0YSBpbnN0YW5jZW9mIFB1cmVNb2RlbCkge1xuICAgICAgaWYgKCF0aGlzLmhhc0l0ZW0oZGF0YSkpIHtcbiAgICAgICAgdGhpcy5fX2luc2VydE1vZGVsKGRhdGEpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICBpZiAoIW1vZGVsICYmIG1vZGVsICE9PSAwKSB7XG4gICAgICB0aHJvdyBlcnJvcihVTkRFRklORURfVFlQRSk7XG4gICAgfVxuXG4gICAgY29uc3QgdHlwZSA9IGdldE1vZGVsVHlwZShtb2RlbCBhcyBJVHlwZXx0eXBlb2YgUHVyZU1vZGVsKTtcbiAgICBjb25zdCBtb2RlbEluc3RhbmNlID0gdXBzZXJ0TW9kZWwoZGF0YSwgdHlwZSwgdGhpcyk7XG4gICAgdGhpcy5fX2luc2VydE1vZGVsKG1vZGVsSW5zdGFuY2UsIHR5cGUpO1xuXG4gICAgcmV0dXJuIG1vZGVsSW5zdGFuY2U7XG4gIH1cblxuICBwcml2YXRlIF9faW5zZXJ0TW9kZWwobW9kZWw6IFB1cmVNb2RlbHxBcnJheTxQdXJlTW9kZWw+LCB0eXBlPzogSVR5cGUsIGlkPzogSUlkZW50aWZpZXIpIHtcbiAgICBpZiAobW9kZWwgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgcmV0dXJuIG1vZGVsLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX19pbnNlcnRNb2RlbChpdGVtLCB0eXBlLCBpZCkpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBnZXRNb2RlbENvbGxlY3Rpb24obW9kZWwpO1xuICAgIGlmIChjb2xsZWN0aW9uICYmIGNvbGxlY3Rpb24gIT09IHRoaXMpIHtcbiAgICAgIHRocm93IGVycm9yKE1PREVMX1NJTkdMRV9DT0xMRUNUSU9OKTtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RlbFR5cGUgPSB0eXBlIHx8IGdldE1vZGVsVHlwZShtb2RlbCk7XG4gICAgY29uc3QgbW9kZWxJZCA9IGlkIHx8IGdldE1vZGVsSWQobW9kZWwpO1xuICAgIGNvbnN0IHN0cmluZ1R5cGUgPSBtb2RlbFR5cGUudG9TdHJpbmcoKTtcblxuICAgIGNvbnN0IGV4aXN0aW5nTW9kZWwgPSB0aGlzLmZpbmQobW9kZWxUeXBlLCBtb2RlbElkKTtcbiAgICBpZiAoZXhpc3RpbmdNb2RlbCkge1xuICAgICAgdXBkYXRlTW9kZWwoZXhpc3RpbmdNb2RlbCwgbW9kZWwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX19kYXRhLnB1c2gobW9kZWwpO1xuICAgIGlmIChtb2RlbFR5cGUgaW4gdGhpcy5fX2RhdGFMaXN0KSB7XG4gICAgICB0aGlzLl9fZGF0YUxpc3RbbW9kZWxUeXBlXS5wdXNoKG1vZGVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0KHRoaXMuX19kYXRhTGlzdCwgc3RyaW5nVHlwZSwgb2JzZXJ2YWJsZS5hcnJheShbbW9kZWxdLCB7ZGVlcDogZmFsc2V9KSk7XG4gICAgfVxuXG4gICAgaWYgKG1vZGVsVHlwZSBpbiB0aGlzLl9fZGF0YU1hcCkge1xuICAgICAgc2V0KHRoaXMuX19kYXRhTWFwW21vZGVsVHlwZV0sIG1vZGVsSWQudG9TdHJpbmcoKSwgbW9kZWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXQodGhpcy5fX2RhdGFNYXAsIHN0cmluZ1R5cGUsIG9ic2VydmFibGUuc2hhbGxvd09iamVjdCh7W21vZGVsSWRdOiBtb2RlbH0pKTtcbiAgICB9XG4gICAgc2V0TW9kZWxNZXRhS2V5KG1vZGVsLCAnY29sbGVjdGlvbicsIHRoaXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBfX3JlbW92ZU1vZGVsKG1vZGVsOiBQdXJlTW9kZWx8QXJyYXk8UHVyZU1vZGVsPiwgdHlwZT86IElUeXBlLCBpZD86IElJZGVudGlmaWVyKSB7XG4gICAgaWYgKG1vZGVsIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgIHJldHVybiBtb2RlbC5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9fcmVtb3ZlTW9kZWwoaXRlbSwgdHlwZSwgaWQpKTtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RlbFR5cGUgPSB0eXBlIHx8IGdldE1vZGVsVHlwZShtb2RlbCk7XG4gICAgY29uc3QgbW9kZWxJZCA9IGlkIHx8IGdldE1vZGVsSWQobW9kZWwpO1xuICAgIHRoaXMuX19kYXRhLnJlbW92ZShtb2RlbCk7XG4gICAgdGhpcy5fX2RhdGFMaXN0W21vZGVsVHlwZV0ucmVtb3ZlKG1vZGVsKTtcbiAgICBzZXQodGhpcy5fX2RhdGFNYXBbbW9kZWxUeXBlXSwgbW9kZWxJZC50b1N0cmluZygpLCB1bmRlZmluZWQpO1xuICAgIHNldE1vZGVsTWV0YUtleShtb2RlbCwgJ2NvbGxlY3Rpb24nLCB1bmRlZmluZWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBfX2ZpbmRCeVR5cGUobW9kZWw6IElUeXBlfHR5cGVvZiBQdXJlTW9kZWx8UHVyZU1vZGVsLCBpZD86IElJZGVudGlmaWVyKSB7XG4gICAgY29uc3QgdHlwZSA9IGdldE1vZGVsVHlwZShtb2RlbCk7XG4gICAgY29uc3Qgc3RyaW5nVHlwZSA9IHR5cGUudG9TdHJpbmcoKTtcblxuICAgIGlmIChpZCkge1xuICAgICAgaWYgKCEodHlwZSBpbiB0aGlzLl9fZGF0YU1hcCkpIHtcbiAgICAgICAgc2V0KHRoaXMuX19kYXRhTWFwLCBzdHJpbmdUeXBlLCB7W2lkXTogdW5kZWZpbmVkfSk7XG4gICAgICB9IGVsc2UgaWYgKCEoaWQgaW4gdGhpcy5fX2RhdGFNYXBbdHlwZV0pKSB7XG4gICAgICAgIHNldCh0aGlzLl9fZGF0YU1hcFt0eXBlXSwgaWQudG9TdHJpbmcoKSwgdW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9fZGF0YU1hcFt0eXBlXVtpZF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICghKHR5cGUgaW4gdGhpcy5fX2RhdGFMaXN0KSkge1xuICAgICAgICBzZXQodGhpcy5fX2RhdGFMaXN0LCBzdHJpbmdUeXBlLCBvYnNlcnZhYmxlLmFycmF5KFtdLCB7ZGVlcDogZmFsc2V9KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5fX2RhdGFMaXN0W3R5cGVdLmxlbmd0aCA/IHRoaXMuX19kYXRhTGlzdFt0eXBlXVswXSA6IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfX2NoYW5nZU1vZGVsSWQob2xkSWQ6IElJZGVudGlmaWVyLCBuZXdJZDogSUlkZW50aWZpZXIsIHR5cGU6IElUeXBlKSB7XG4gICAgdGhpcy5fX2RhdGFNYXBbdHlwZV1bbmV3SWRdID0gdGhpcy5fX2RhdGFNYXBbdHlwZV1bb2xkSWRdO1xuICAgIGRlbGV0ZSB0aGlzLl9fZGF0YU1hcFt0eXBlXVtvbGRJZF07XG4gIH1cbn1cbiJdfQ==","map":{"mappings":""},"dts":{"name":"/Users/darko/Projects/mobx/datx/packages/datx/PureCollection.d.ts","text":"import { IDictionary, IRawModel } from 'datx-utils';\r\nimport { IIdentifier } from './interfaces/IIdentifier';\r\nimport { IModelConstructor } from './interfaces/IModelConstructor';\r\nimport { IType } from './interfaces/IType';\r\nimport { TFilterFn } from './interfaces/TFilterFn';\r\nimport { PureModel } from './PureModel';\r\nexport declare class PureCollection {\r\n    /**\r\n     * List of models available in the collection\r\n     *\r\n     * @static\r\n     * @type {Array<typeof PureModel>}\r\n     * @memberof Collection\r\n     */\r\n    static types: Array<typeof PureModel | IModelConstructor<PureModel>>;\r\n    static defaultModel?: typeof PureModel;\r\n    private __data;\r\n    private __dataMap;\r\n    private __dataList;\r\n    constructor(data?: Array<IRawModel>);\r\n    /**\r\n     * Function for inserting raw models into the collection. Used when hydrating the collection\r\n     *\r\n     * @param {Array<IRawModel>} data Raw model data\r\n     * @returns {Array<PureModel>} A list of initialized models\r\n     * @memberof Collection\r\n     */\r\n    insert(data: Array<Partial<IRawModel>>): Array<PureModel>;\r\n    /**\r\n     * Add an existing model to the collection\r\n     *\r\n     * @template T\r\n     * @param {T} data Model to be added\r\n     * @returns {T} Added model\r\n     * @memberof Collection\r\n     */\r\n    add<T extends PureModel>(data: T): T;\r\n    /**\r\n     * Add an array of existing models to the collection\r\n     *\r\n     * @template T\r\n     * @param {Array<T>} data Array of models to be added\r\n     * @returns {Array<T>} Added models\r\n     * @memberof Collection\r\n     */\r\n    add<T extends PureModel>(data: Array<T>): Array<T>;\r\n    /**\r\n     * Add an array of new models to the collection\r\n     *\r\n     * @template T\r\n     * @param {Array<IRawModel|IDictionary<any>>} data Array of new data to be added\r\n     * @param {(IType|IModelConstructor<T>)} model Model type to be added\r\n     * @returns {Array<T>} Added models\r\n     * @memberof Collection\r\n     */\r\n    add<T extends PureModel>(data: Array<IRawModel | IDictionary<any>>, model: IType | IModelConstructor<T>): Array<T>;\r\n    /**\r\n     * Add a new model to the collection\r\n     *\r\n     * @template T\r\n     * @param {(IRawModel|IDictionary<any>)} data New data to be added\r\n     * @param {(IType|IModelConstructor<T>)} model Model type to be added\r\n     * @returns {T} Added model\r\n     * @memberof Collection\r\n     */\r\n    add<T extends PureModel>(data: IRawModel | IDictionary<any>, model: IType | IModelConstructor<T>): T;\r\n    /**\r\n     * Find a model based on the defined type and (optional) identifier\r\n     *\r\n     * @param {(IType|typeof PureModel|PureModel)} type Model type\r\n     * @param {IIdentifier} [id] Model identifier\r\n     * @returns {(PureModel|null)} The first matching model\r\n     * @memberof Collection\r\n     */\r\n    find<T extends PureModel>(type: IType | T | IModelConstructor<T>, id?: IIdentifier | PureModel): T | null;\r\n    /**\r\n     * Find a model based on a matching function\r\n     *\r\n     * @param {TFilterFn} test Function used to match the model\r\n     * @returns {(PureModel|null)} The first matching model\r\n     * @memberof Collection\r\n     */\r\n    find<T extends PureModel>(test: TFilterFn): T | null;\r\n    /**\r\n     * Filter models based on a matching function\r\n     *\r\n     * @param {TFilterFn} test Function used to match the models\r\n     * @returns {(PureModel|null)} The matching models\r\n     * @memberof Collection\r\n     */\r\n    filter(test: TFilterFn): Array<PureModel>;\r\n    /**\r\n     * Find all matching models or all models if no type is given\r\n     *\r\n     * @param {(IType|typeof PureModel)} [model] Model type to select\r\n     * @returns {Array<PureModel>} List of matching models\r\n     * @memberof Collection\r\n     */\r\n    findAll<T extends PureModel>(model?: IType | IModelConstructor<T>): Array<T>;\r\n    /**\r\n     * Check if a model is in the collection\r\n     *\r\n     * @param {PureModel} model Model to check\r\n     * @returns {boolean} The given model is in the collection\r\n     * @memberof Collection\r\n     */\r\n    hasItem(model: PureModel): boolean;\r\n    /**\r\n     * Remove the first model based on the type and (optional) identifier\r\n     *\r\n     * @param {(IType|typeof PureModel)} type Model type\r\n     * @param {IIdentifier} [id] Model identifier\r\n     * @memberof Collection\r\n     */\r\n    remove(type: IType | typeof PureModel, id?: IIdentifier): any;\r\n    /**\r\n     * Remove the given model from the collection\r\n     *\r\n     * @param {PureModel} model Model to be removed from the collection\r\n     * @memberof Collection\r\n     */\r\n    remove(model: PureModel): any;\r\n    /**\r\n     * Remove all models of the given model type from the collection\r\n     *\r\n     * @param {(IType|typeof PureModel)} type Model type\r\n     * @memberof Collection\r\n     */\r\n    removeAll(type: IType | typeof PureModel): void;\r\n    /**\r\n     * A total count of models in the collection\r\n     *\r\n     * @readonly\r\n     * @type {number}\r\n     * @memberof Collection\r\n     */\r\n    readonly length: number;\r\n    /**\r\n     * Get the serializable value of the collection\r\n     *\r\n     * @returns {Array<IRawModel>} Pure JS value of the collection\r\n     * @memberof Collection\r\n     */\r\n    toJSON(): Array<IRawModel>;\r\n    readonly snapshot: IRawModel[];\r\n    /**\r\n     * Reset the collection (remove all models)\r\n     *\r\n     * @memberof Collection\r\n     */\r\n    reset(): void;\r\n    getAllModels(): PureModel[];\r\n    private __addArray<T>(data);\r\n    private __addArray<T>(data, model?);\r\n    private __addSingle<T>(data);\r\n    private __addSingle<T>(data, model?);\r\n    private __insertModel(model, type?, id?);\r\n    private __removeModel(model, type?, id?);\r\n    private __findByType(model, id?);\r\n    private __changeModelId(oldId, newId, type);\r\n}\r\n"}}
