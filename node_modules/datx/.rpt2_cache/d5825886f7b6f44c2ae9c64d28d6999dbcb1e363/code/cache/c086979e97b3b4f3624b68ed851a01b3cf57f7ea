{"code":"import { ReferenceType } from './enums/ReferenceType';\r\nimport { storage } from './services/storage';\r\n/**\r\n * Set a model property as tracked\r\n *\r\n * @template T\r\n * @param {T} obj Target model\r\n * @param {string} key Property name\r\n * @returns {undefined}\r\n */\r\nfunction propFn(obj, key) {\r\n    storage.addModelDefaultField(obj.constructor, key);\r\n}\r\nexport default Object.assign(propFn, {\r\n    /**\r\n     * Set the default value for the model property\r\n     *\r\n     * @param {any} value The default property value\r\n     * @returns {undefined}\r\n     */\r\n    defaultValue: function (value) {\r\n        return function (obj, key) {\r\n            storage.addModelDefaultField(obj.constructor, key, value);\r\n        };\r\n    },\r\n    /**\r\n     * Add a reference to a single other model\r\n     *\r\n     * @param {typeof PureModel} refModel Model type the reference will point to\r\n     * @returns {undefined}\r\n     */\r\n    toOne: function (refModel) {\r\n        return function (obj, key) {\r\n            storage.addModelClassReference(obj.constructor, key, {\r\n                model: refModel,\r\n                type: ReferenceType.TO_ONE,\r\n            });\r\n        };\r\n    },\r\n    /**\r\n     * Add a reference to multiple other models\r\n     *\r\n     * @param {typeof PureModel} refModel Model type the reference will point to\r\n     * @param {string} [property] Use a foreign key from the other model to get this reference (computed back reference)\r\n     * @returns {undefined}\r\n     */\r\n    toMany: function (refModel, property) {\r\n        return function (obj, key) {\r\n            storage.addModelClassReference(obj.constructor, key, {\r\n                model: refModel,\r\n                property: property,\r\n                type: ReferenceType.TO_MANY,\r\n            });\r\n        };\r\n    },\r\n    /**\r\n     * Add a reference to a single or multiple other models\r\n     *\r\n     * @param {typeof PureModel} refModel Model type the reference will point to\r\n     * @returns {undefined}\r\n     */\r\n    toOneOrMany: function (refModel) {\r\n        return function (obj, key) {\r\n            storage.addModelClassReference(obj.constructor, key, {\r\n                model: refModel,\r\n                type: ReferenceType.TO_ONE_OR_MANY,\r\n            });\r\n        };\r\n    },\r\n    /**\r\n     * Define the identifier property on the model\r\n     *\r\n     * @param {T} obj Target model\r\n     * @param {string} key Identifier property name\r\n     * @returns {undefined}\r\n     */\r\n    identifier: function (obj, key) {\r\n        storage.addModelDefaultField(obj.constructor, key);\r\n        storage.setModelClassMetaKey(obj.constructor, 'id', key);\r\n    },\r\n    /**\r\n     * Define the type property on the model\r\n     *\r\n     * @param {T} obj Target model\r\n     * @param {string} key Type property name\r\n     * @returns {undefined}\r\n     */\r\n    type: function (obj, key) {\r\n        storage.addModelDefaultField(obj.constructor, key);\r\n        storage.setModelClassMetaKey(obj.constructor, 'type', key);\r\n    },\r\n});\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy9wcm9wLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUdwRCxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFFM0M7Ozs7Ozs7R0FPRztBQUNILGdCQUFxQyxHQUFNLEVBQUUsR0FBVztJQUN0RCxPQUFPLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLFdBQStCLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDekUsQ0FBQztBQUVELGVBQWUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUU7SUFFbkM7Ozs7O09BS0c7SUFDSCxZQUFZLFlBQUMsS0FBVTtRQUNyQixPQUFPLFVBQXNCLEdBQU0sRUFBRSxHQUFXO1lBQzlDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsV0FBK0IsRUFBRSxHQUFHLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDaEYsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsS0FBSyxZQUFDLFFBQWdDO1FBQ3BDLE9BQU8sVUFBc0IsR0FBTSxFQUFFLEdBQVc7WUFDOUMsT0FBTyxDQUFDLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxXQUErQixFQUFFLEdBQUcsRUFBRTtnQkFDdkUsS0FBSyxFQUFFLFFBQVE7Z0JBQ2YsSUFBSSxFQUFFLGFBQWEsQ0FBQyxNQUFNO2FBQzNCLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxNQUFNLFlBQUMsUUFBZ0MsRUFBRSxRQUFpQjtRQUN4RCxPQUFPLFVBQXNCLEdBQU0sRUFBRSxHQUFXO1lBQzlDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLENBQUMsV0FBK0IsRUFBRSxHQUFHLEVBQUU7Z0JBQ3ZFLEtBQUssRUFBRSxRQUFRO2dCQUNmLFFBQVEsVUFBQTtnQkFDUixJQUFJLEVBQUUsYUFBYSxDQUFDLE9BQU87YUFDNUIsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsV0FBVyxZQUFDLFFBQWdDO1FBQzFDLE9BQU8sVUFBc0IsR0FBTSxFQUFFLEdBQVc7WUFDOUMsT0FBTyxDQUFDLHNCQUFzQixDQUFDLEdBQUcsQ0FBQyxXQUErQixFQUFFLEdBQUcsRUFBRTtnQkFDdkUsS0FBSyxFQUFFLFFBQVE7Z0JBQ2YsSUFBSSxFQUFFLGFBQWEsQ0FBQyxjQUFjO2FBQ25DLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxVQUFVLEVBQVYsVUFBZ0MsR0FBTSxFQUFFLEdBQVc7UUFDakQsT0FBTyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxXQUErQixFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZFLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsV0FBK0IsRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDL0UsQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILElBQUksRUFBSixVQUEwQixHQUFNLEVBQUUsR0FBVztRQUMzQyxPQUFPLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLFdBQStCLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDdkUsT0FBTyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxXQUErQixFQUFFLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQztJQUNqRixDQUFDO0NBQ0YsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtSZWZlcmVuY2VUeXBlfSBmcm9tICcuL2VudW1zL1JlZmVyZW5jZVR5cGUnO1xuaW1wb3J0IHtJVHlwZX0gZnJvbSAnLi9pbnRlcmZhY2VzL0lUeXBlJztcbmltcG9ydCB7UHVyZU1vZGVsfSBmcm9tICcuL1B1cmVNb2RlbCc7XG5pbXBvcnQge3N0b3JhZ2V9IGZyb20gJy4vc2VydmljZXMvc3RvcmFnZSc7XG5cbi8qKlxuICogU2V0IGEgbW9kZWwgcHJvcGVydHkgYXMgdHJhY2tlZFxuICpcbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge1R9IG9iaiBUYXJnZXQgbW9kZWxcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgUHJvcGVydHkgbmFtZVxuICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAqL1xuZnVuY3Rpb24gcHJvcEZuPFQgZXh0ZW5kcyBQdXJlTW9kZWw+KG9iajogVCwga2V5OiBzdHJpbmcpIHtcbiAgc3RvcmFnZS5hZGRNb2RlbERlZmF1bHRGaWVsZChvYmouY29uc3RydWN0b3IgYXMgdHlwZW9mIFB1cmVNb2RlbCwga2V5KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgT2JqZWN0LmFzc2lnbihwcm9wRm4sIHtcblxuICAvKipcbiAgICogU2V0IHRoZSBkZWZhdWx0IHZhbHVlIGZvciB0aGUgbW9kZWwgcHJvcGVydHlcbiAgICpcbiAgICogQHBhcmFtIHthbnl9IHZhbHVlIFRoZSBkZWZhdWx0IHByb3BlcnR5IHZhbHVlXG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuICBkZWZhdWx0VmFsdWUodmFsdWU6IGFueSkge1xuICAgIHJldHVybiA8VCBleHRlbmRzIFB1cmVNb2RlbD4ob2JqOiBULCBrZXk6IHN0cmluZykgPT4ge1xuICAgICAgc3RvcmFnZS5hZGRNb2RlbERlZmF1bHRGaWVsZChvYmouY29uc3RydWN0b3IgYXMgdHlwZW9mIFB1cmVNb2RlbCwga2V5LCB2YWx1ZSk7XG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogQWRkIGEgcmVmZXJlbmNlIHRvIGEgc2luZ2xlIG90aGVyIG1vZGVsXG4gICAqXG4gICAqIEBwYXJhbSB7dHlwZW9mIFB1cmVNb2RlbH0gcmVmTW9kZWwgTW9kZWwgdHlwZSB0aGUgcmVmZXJlbmNlIHdpbGwgcG9pbnQgdG9cbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICovXG4gIHRvT25lKHJlZk1vZGVsOiB0eXBlb2YgUHVyZU1vZGVsfElUeXBlKSB7XG4gICAgcmV0dXJuIDxUIGV4dGVuZHMgUHVyZU1vZGVsPihvYmo6IFQsIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICBzdG9yYWdlLmFkZE1vZGVsQ2xhc3NSZWZlcmVuY2Uob2JqLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBQdXJlTW9kZWwsIGtleSwge1xuICAgICAgICBtb2RlbDogcmVmTW9kZWwsXG4gICAgICAgIHR5cGU6IFJlZmVyZW5jZVR5cGUuVE9fT05FLFxuICAgICAgfSk7XG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogQWRkIGEgcmVmZXJlbmNlIHRvIG11bHRpcGxlIG90aGVyIG1vZGVsc1xuICAgKlxuICAgKiBAcGFyYW0ge3R5cGVvZiBQdXJlTW9kZWx9IHJlZk1vZGVsIE1vZGVsIHR5cGUgdGhlIHJlZmVyZW5jZSB3aWxsIHBvaW50IHRvXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbcHJvcGVydHldIFVzZSBhIGZvcmVpZ24ga2V5IGZyb20gdGhlIG90aGVyIG1vZGVsIHRvIGdldCB0aGlzIHJlZmVyZW5jZSAoY29tcHV0ZWQgYmFjayByZWZlcmVuY2UpXG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuICB0b01hbnkocmVmTW9kZWw6IHR5cGVvZiBQdXJlTW9kZWx8SVR5cGUsIHByb3BlcnR5Pzogc3RyaW5nKSB7XG4gICAgcmV0dXJuIDxUIGV4dGVuZHMgUHVyZU1vZGVsPihvYmo6IFQsIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICBzdG9yYWdlLmFkZE1vZGVsQ2xhc3NSZWZlcmVuY2Uob2JqLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBQdXJlTW9kZWwsIGtleSwge1xuICAgICAgICBtb2RlbDogcmVmTW9kZWwsXG4gICAgICAgIHByb3BlcnR5LFxuICAgICAgICB0eXBlOiBSZWZlcmVuY2VUeXBlLlRPX01BTlksXG4gICAgICB9KTtcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgYSByZWZlcmVuY2UgdG8gYSBzaW5nbGUgb3IgbXVsdGlwbGUgb3RoZXIgbW9kZWxzXG4gICAqXG4gICAqIEBwYXJhbSB7dHlwZW9mIFB1cmVNb2RlbH0gcmVmTW9kZWwgTW9kZWwgdHlwZSB0aGUgcmVmZXJlbmNlIHdpbGwgcG9pbnQgdG9cbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICovXG4gIHRvT25lT3JNYW55KHJlZk1vZGVsOiB0eXBlb2YgUHVyZU1vZGVsfElUeXBlKSB7XG4gICAgcmV0dXJuIDxUIGV4dGVuZHMgUHVyZU1vZGVsPihvYmo6IFQsIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICBzdG9yYWdlLmFkZE1vZGVsQ2xhc3NSZWZlcmVuY2Uob2JqLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBQdXJlTW9kZWwsIGtleSwge1xuICAgICAgICBtb2RlbDogcmVmTW9kZWwsXG4gICAgICAgIHR5cGU6IFJlZmVyZW5jZVR5cGUuVE9fT05FX09SX01BTlksXG4gICAgICB9KTtcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZWZpbmUgdGhlIGlkZW50aWZpZXIgcHJvcGVydHkgb24gdGhlIG1vZGVsXG4gICAqXG4gICAqIEBwYXJhbSB7VH0gb2JqIFRhcmdldCBtb2RlbFxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IElkZW50aWZpZXIgcHJvcGVydHkgbmFtZVxuICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgKi9cbiAgaWRlbnRpZmllcjxUIGV4dGVuZHMgUHVyZU1vZGVsPihvYmo6IFQsIGtleTogc3RyaW5nKSB7XG4gICAgc3RvcmFnZS5hZGRNb2RlbERlZmF1bHRGaWVsZChvYmouY29uc3RydWN0b3IgYXMgdHlwZW9mIFB1cmVNb2RlbCwga2V5KTtcbiAgICBzdG9yYWdlLnNldE1vZGVsQ2xhc3NNZXRhS2V5KG9iai5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUHVyZU1vZGVsLCAnaWQnLCBrZXkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZWZpbmUgdGhlIHR5cGUgcHJvcGVydHkgb24gdGhlIG1vZGVsXG4gICAqXG4gICAqIEBwYXJhbSB7VH0gb2JqIFRhcmdldCBtb2RlbFxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFR5cGUgcHJvcGVydHkgbmFtZVxuICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgKi9cbiAgdHlwZTxUIGV4dGVuZHMgUHVyZU1vZGVsPihvYmo6IFQsIGtleTogc3RyaW5nKSB7XG4gICAgc3RvcmFnZS5hZGRNb2RlbERlZmF1bHRGaWVsZChvYmouY29uc3RydWN0b3IgYXMgdHlwZW9mIFB1cmVNb2RlbCwga2V5KTtcbiAgICBzdG9yYWdlLnNldE1vZGVsQ2xhc3NNZXRhS2V5KG9iai5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUHVyZU1vZGVsLCAndHlwZScsIGtleSk7XG4gIH0sXG59KTtcbiJdfQ==","map":{"mappings":""},"dts":{"name":"/Users/darko/Projects/mobx/datx/packages/datx/prop.d.ts","text":"import { PureModel } from './PureModel';\r\ndeclare const _default: (<T extends PureModel>(obj: T, key: string) => void) & {\r\n    defaultValue(value: any): <T extends PureModel>(obj: T, key: string) => void;\r\n    toOne(refModel: string | number | typeof PureModel): <T extends PureModel>(obj: T, key: string) => void;\r\n    toMany(refModel: string | number | typeof PureModel, property?: string | undefined): <T extends PureModel>(obj: T, key: string) => void;\r\n    toOneOrMany(refModel: string | number | typeof PureModel): <T extends PureModel>(obj: T, key: string) => void;\r\n    identifier<T extends PureModel>(obj: T, key: string): void;\r\n    type<T extends PureModel>(obj: T, key: string): void;\r\n};\r\nexport default _default;\r\n"}}
