{"code":"import { ReferenceType } from './enums/ReferenceType';\r\nimport { storage } from './services/storage';\r\n/**\r\n * Set a model property as tracked\r\n *\r\n * @template T\r\n * @param {T} obj Target model\r\n * @param {string} key Property name\r\n * @returns {undefined}\r\n */\r\nfunction propFn(obj, key) {\r\n    storage.addModelDefaultField(obj.constructor, key);\r\n}\r\nexport default Object.assign(propFn, {\r\n    /**\r\n     * Set the default value for the model property\r\n     *\r\n     * @param {any} value The default property value\r\n     * @returns {undefined}\r\n     */\r\n    defaultValue: function (value) {\r\n        return function (obj, key) {\r\n            storage.addModelDefaultField(obj.constructor, key, value);\r\n        };\r\n    },\r\n    /**\r\n     * Add a reference to a single other model\r\n     *\r\n     * @param {typeof PureModel} refModel Model type the reference will point to\r\n     * @returns {undefined}\r\n     */\r\n    toOne: function (refModel) {\r\n        return function (obj, key) {\r\n            storage.addModelClassReference(obj.constructor, key, {\r\n                model: refModel,\r\n                type: ReferenceType.TO_ONE,\r\n            });\r\n        };\r\n    },\r\n    /**\r\n     * Add a reference to multiple other models\r\n     *\r\n     * @param {typeof PureModel} refModel Model type the reference will point to\r\n     * @param {string} [property] Use a foreign key from the other model to get this reference (computed back reference)\r\n     * @returns {undefined}\r\n     */\r\n    toMany: function (refModel, property) {\r\n        return function (obj, key) {\r\n            storage.addModelClassReference(obj.constructor, key, {\r\n                model: refModel,\r\n                property: property,\r\n                type: ReferenceType.TO_MANY,\r\n            });\r\n        };\r\n    },\r\n    /**\r\n     * Add a reference to a single or multiple other models\r\n     *\r\n     * @param {typeof PureModel} refModel Model type the reference will point to\r\n     * @returns {undefined}\r\n     */\r\n    toOneOrMany: function (refModel) {\r\n        return function (obj, key) {\r\n            storage.addModelClassReference(obj.constructor, key, {\r\n                model: refModel,\r\n                type: ReferenceType.TO_ONE_OR_MANY,\r\n            });\r\n        };\r\n    },\r\n    /**\r\n     * Define the identifier property on the model\r\n     *\r\n     * @param {T} obj Target model\r\n     * @param {string} key Identifier property name\r\n     * @returns {undefined}\r\n     */\r\n    identifier: function (obj, key) {\r\n        storage.addModelDefaultField(obj.constructor, key);\r\n        storage.setModelClassMetaKey(obj.constructor, 'id', key);\r\n    },\r\n    /**\r\n     * Define the type property on the model\r\n     *\r\n     * @param {T} obj Target model\r\n     * @param {string} key Type property name\r\n     * @returns {undefined}\r\n     */\r\n    type: function (obj, key) {\r\n        storage.addModelDefaultField(obj.constructor, key);\r\n        storage.setModelClassMetaKey(obj.constructor, 'type', key);\r\n    },\r\n});\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy9wcm9wLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUdwRCxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFFM0M7Ozs7Ozs7R0FPRztBQUNILGdCQUFxQyxHQUFNLEVBQUUsR0FBVztJQUN0RCxPQUFPLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLFdBQStCLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDekUsQ0FBQztBQUVELGVBQWUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUU7SUFFbkM7Ozs7O09BS0c7SUFDSCxZQUFZLFlBQUMsS0FBVTtRQUNyQixNQUFNLENBQUMsVUFBc0IsR0FBTSxFQUFFLEdBQVc7WUFDOUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxXQUErQixFQUFFLEdBQUcsRUFBRSxLQUFLLENBQUMsQ0FBQztRQUNoRixDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7O09BS0c7SUFDSCxLQUFLLFlBQUMsUUFBZ0M7UUFDcEMsTUFBTSxDQUFDLFVBQXNCLEdBQU0sRUFBRSxHQUFXO1lBQzlDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLENBQUMsV0FBK0IsRUFBRSxHQUFHLEVBQUU7Z0JBQ3ZFLEtBQUssRUFBRSxRQUFRO2dCQUNmLElBQUksRUFBRSxhQUFhLENBQUMsTUFBTTthQUMzQixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsTUFBTSxZQUFDLFFBQWdDLEVBQUUsUUFBaUI7UUFDeEQsTUFBTSxDQUFDLFVBQXNCLEdBQU0sRUFBRSxHQUFXO1lBQzlDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLENBQUMsV0FBK0IsRUFBRSxHQUFHLEVBQUU7Z0JBQ3ZFLEtBQUssRUFBRSxRQUFRO2dCQUNmLFFBQVEsVUFBQTtnQkFDUixJQUFJLEVBQUUsYUFBYSxDQUFDLE9BQU87YUFDNUIsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVEOzs7OztPQUtHO0lBQ0gsV0FBVyxZQUFDLFFBQWdDO1FBQzFDLE1BQU0sQ0FBQyxVQUFzQixHQUFNLEVBQUUsR0FBVztZQUM5QyxPQUFPLENBQUMsc0JBQXNCLENBQUMsR0FBRyxDQUFDLFdBQStCLEVBQUUsR0FBRyxFQUFFO2dCQUN2RSxLQUFLLEVBQUUsUUFBUTtnQkFDZixJQUFJLEVBQUUsYUFBYSxDQUFDLGNBQWM7YUFDbkMsQ0FBQyxDQUFDO1FBQ0wsQ0FBQyxDQUFDO0lBQ0osQ0FBQztJQUVEOzs7Ozs7T0FNRztJQUNILFVBQVUsRUFBVixVQUFnQyxHQUFNLEVBQUUsR0FBVztRQUNqRCxPQUFPLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLFdBQStCLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDdkUsT0FBTyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxXQUErQixFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztJQUMvRSxDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsSUFBSSxFQUFKLFVBQTBCLEdBQU0sRUFBRSxHQUFXO1FBQzNDLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsV0FBK0IsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUN2RSxPQUFPLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLFdBQStCLEVBQUUsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ2pGLENBQUM7Q0FDRixDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1JlZmVyZW5jZVR5cGV9IGZyb20gJy4vZW51bXMvUmVmZXJlbmNlVHlwZSc7XG5pbXBvcnQge0lUeXBlfSBmcm9tICcuL2ludGVyZmFjZXMvSVR5cGUnO1xuaW1wb3J0IHtQdXJlTW9kZWx9IGZyb20gJy4vUHVyZU1vZGVsJztcbmltcG9ydCB7c3RvcmFnZX0gZnJvbSAnLi9zZXJ2aWNlcy9zdG9yYWdlJztcblxuLyoqXG4gKiBTZXQgYSBtb2RlbCBwcm9wZXJ0eSBhcyB0cmFja2VkXG4gKlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7VH0gb2JqIFRhcmdldCBtb2RlbFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBQcm9wZXJ0eSBuYW1lXG4gKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICovXG5mdW5jdGlvbiBwcm9wRm48VCBleHRlbmRzIFB1cmVNb2RlbD4ob2JqOiBULCBrZXk6IHN0cmluZykge1xuICBzdG9yYWdlLmFkZE1vZGVsRGVmYXVsdEZpZWxkKG9iai5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUHVyZU1vZGVsLCBrZXkpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBPYmplY3QuYXNzaWduKHByb3BGbiwge1xuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGRlZmF1bHQgdmFsdWUgZm9yIHRoZSBtb2RlbCBwcm9wZXJ0eVxuICAgKlxuICAgKiBAcGFyYW0ge2FueX0gdmFsdWUgVGhlIGRlZmF1bHQgcHJvcGVydHkgdmFsdWVcbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICovXG4gIGRlZmF1bHRWYWx1ZSh2YWx1ZTogYW55KSB7XG4gICAgcmV0dXJuIDxUIGV4dGVuZHMgUHVyZU1vZGVsPihvYmo6IFQsIGtleTogc3RyaW5nKSA9PiB7XG4gICAgICBzdG9yYWdlLmFkZE1vZGVsRGVmYXVsdEZpZWxkKG9iai5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUHVyZU1vZGVsLCBrZXksIHZhbHVlKTtcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgYSByZWZlcmVuY2UgdG8gYSBzaW5nbGUgb3RoZXIgbW9kZWxcbiAgICpcbiAgICogQHBhcmFtIHt0eXBlb2YgUHVyZU1vZGVsfSByZWZNb2RlbCBNb2RlbCB0eXBlIHRoZSByZWZlcmVuY2Ugd2lsbCBwb2ludCB0b1xuICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgKi9cbiAgdG9PbmUocmVmTW9kZWw6IHR5cGVvZiBQdXJlTW9kZWx8SVR5cGUpIHtcbiAgICByZXR1cm4gPFQgZXh0ZW5kcyBQdXJlTW9kZWw+KG9iajogVCwga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIHN0b3JhZ2UuYWRkTW9kZWxDbGFzc1JlZmVyZW5jZShvYmouY29uc3RydWN0b3IgYXMgdHlwZW9mIFB1cmVNb2RlbCwga2V5LCB7XG4gICAgICAgIG1vZGVsOiByZWZNb2RlbCxcbiAgICAgICAgdHlwZTogUmVmZXJlbmNlVHlwZS5UT19PTkUsXG4gICAgICB9KTtcbiAgICB9O1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgYSByZWZlcmVuY2UgdG8gbXVsdGlwbGUgb3RoZXIgbW9kZWxzXG4gICAqXG4gICAqIEBwYXJhbSB7dHlwZW9mIFB1cmVNb2RlbH0gcmVmTW9kZWwgTW9kZWwgdHlwZSB0aGUgcmVmZXJlbmNlIHdpbGwgcG9pbnQgdG9cbiAgICogQHBhcmFtIHtzdHJpbmd9IFtwcm9wZXJ0eV0gVXNlIGEgZm9yZWlnbiBrZXkgZnJvbSB0aGUgb3RoZXIgbW9kZWwgdG8gZ2V0IHRoaXMgcmVmZXJlbmNlIChjb21wdXRlZCBiYWNrIHJlZmVyZW5jZSlcbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICovXG4gIHRvTWFueShyZWZNb2RlbDogdHlwZW9mIFB1cmVNb2RlbHxJVHlwZSwgcHJvcGVydHk/OiBzdHJpbmcpIHtcbiAgICByZXR1cm4gPFQgZXh0ZW5kcyBQdXJlTW9kZWw+KG9iajogVCwga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIHN0b3JhZ2UuYWRkTW9kZWxDbGFzc1JlZmVyZW5jZShvYmouY29uc3RydWN0b3IgYXMgdHlwZW9mIFB1cmVNb2RlbCwga2V5LCB7XG4gICAgICAgIG1vZGVsOiByZWZNb2RlbCxcbiAgICAgICAgcHJvcGVydHksXG4gICAgICAgIHR5cGU6IFJlZmVyZW5jZVR5cGUuVE9fTUFOWSxcbiAgICAgIH0pO1xuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFkZCBhIHJlZmVyZW5jZSB0byBhIHNpbmdsZSBvciBtdWx0aXBsZSBvdGhlciBtb2RlbHNcbiAgICpcbiAgICogQHBhcmFtIHt0eXBlb2YgUHVyZU1vZGVsfSByZWZNb2RlbCBNb2RlbCB0eXBlIHRoZSByZWZlcmVuY2Ugd2lsbCBwb2ludCB0b1xuICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgKi9cbiAgdG9PbmVPck1hbnkocmVmTW9kZWw6IHR5cGVvZiBQdXJlTW9kZWx8SVR5cGUpIHtcbiAgICByZXR1cm4gPFQgZXh0ZW5kcyBQdXJlTW9kZWw+KG9iajogVCwga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIHN0b3JhZ2UuYWRkTW9kZWxDbGFzc1JlZmVyZW5jZShvYmouY29uc3RydWN0b3IgYXMgdHlwZW9mIFB1cmVNb2RlbCwga2V5LCB7XG4gICAgICAgIG1vZGVsOiByZWZNb2RlbCxcbiAgICAgICAgdHlwZTogUmVmZXJlbmNlVHlwZS5UT19PTkVfT1JfTUFOWSxcbiAgICAgIH0pO1xuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlZmluZSB0aGUgaWRlbnRpZmllciBwcm9wZXJ0eSBvbiB0aGUgbW9kZWxcbiAgICpcbiAgICogQHBhcmFtIHtUfSBvYmogVGFyZ2V0IG1vZGVsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgSWRlbnRpZmllciBwcm9wZXJ0eSBuYW1lXG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuICBpZGVudGlmaWVyPFQgZXh0ZW5kcyBQdXJlTW9kZWw+KG9iajogVCwga2V5OiBzdHJpbmcpIHtcbiAgICBzdG9yYWdlLmFkZE1vZGVsRGVmYXVsdEZpZWxkKG9iai5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUHVyZU1vZGVsLCBrZXkpO1xuICAgIHN0b3JhZ2Uuc2V0TW9kZWxDbGFzc01ldGFLZXkob2JqLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBQdXJlTW9kZWwsICdpZCcsIGtleSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlZmluZSB0aGUgdHlwZSBwcm9wZXJ0eSBvbiB0aGUgbW9kZWxcbiAgICpcbiAgICogQHBhcmFtIHtUfSBvYmogVGFyZ2V0IG1vZGVsXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVHlwZSBwcm9wZXJ0eSBuYW1lXG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuICB0eXBlPFQgZXh0ZW5kcyBQdXJlTW9kZWw+KG9iajogVCwga2V5OiBzdHJpbmcpIHtcbiAgICBzdG9yYWdlLmFkZE1vZGVsRGVmYXVsdEZpZWxkKG9iai5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUHVyZU1vZGVsLCBrZXkpO1xuICAgIHN0b3JhZ2Uuc2V0TW9kZWxDbGFzc01ldGFLZXkob2JqLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBQdXJlTW9kZWwsICd0eXBlJywga2V5KTtcbiAgfSxcbn0pO1xuIl19","map":{"mappings":""},"dts":{"name":"/Users/darko/Projects/mobx/datx/packages/datx/prop.d.ts","text":"import { PureModel } from './PureModel';\r\ndeclare const _default: (<T extends PureModel>(obj: T, key: string) => void) & {\r\n    defaultValue(value: any): <T extends PureModel>(obj: T, key: string) => void;\r\n    toOne(refModel: string | number | typeof PureModel): <T extends PureModel>(obj: T, key: string) => void;\r\n    toMany(refModel: string | number | typeof PureModel, property?: string | undefined): <T extends PureModel>(obj: T, key: string) => void;\r\n    toOneOrMany(refModel: string | number | typeof PureModel): <T extends PureModel>(obj: T, key: string) => void;\r\n    identifier<T extends PureModel>(obj: T, key: string): void;\r\n    type<T extends PureModel>(obj: T, key: string): void;\r\n};\r\nexport default _default;\r\n"}}
