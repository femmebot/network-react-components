{"code":"import { ReferenceType } from './enums/ReferenceType';\r\nimport { storage } from './services/storage';\r\n/**\r\n * Set a model property as tracked\r\n *\r\n * @template T\r\n * @param {T} obj Target model\r\n * @param {string} key Property name\r\n * @returns {undefined}\r\n */\r\nfunction propFn(obj, key) {\r\n    storage.addModelDefaultField(obj.constructor, key);\r\n}\r\n// tslint:disable-next-line:no-default-export\r\nexport default Object.assign(propFn, {\r\n    /**\r\n     * Set the default value for the model property\r\n     *\r\n     * @param {any} value The default property value\r\n     * @returns {undefined}\r\n     */\r\n    defaultValue: function (value) {\r\n        return function (obj, key) {\r\n            storage.addModelDefaultField(obj.constructor, key, value);\r\n        };\r\n    },\r\n    /**\r\n     * Add a reference to a single other model\r\n     *\r\n     * @param {typeof PureModel} refModel Model type the reference will point to\r\n     * @returns {undefined}\r\n     */\r\n    toOne: function (refModel) {\r\n        return function (obj, key) {\r\n            storage.addModelClassReference(obj.constructor, key, {\r\n                model: refModel,\r\n                type: ReferenceType.TO_ONE,\r\n            });\r\n        };\r\n    },\r\n    /**\r\n     * Add a reference to multiple other models\r\n     *\r\n     * @param {typeof PureModel} refModel Model type the reference will point to\r\n     * @param {string} [property] Use a foreign key from the other model to get this reference (computed back reference)\r\n     * @returns {undefined}\r\n     */\r\n    toMany: function (refModel, property) {\r\n        return function (obj, key) {\r\n            storage.addModelClassReference(obj.constructor, key, {\r\n                model: refModel,\r\n                property: property,\r\n                type: ReferenceType.TO_MANY,\r\n            });\r\n        };\r\n    },\r\n    /**\r\n     * Add a reference to a single or multiple other models\r\n     *\r\n     * @param {typeof PureModel} refModel Model type the reference will point to\r\n     * @returns {undefined}\r\n     */\r\n    toOneOrMany: function (refModel) {\r\n        return function (obj, key) {\r\n            storage.addModelClassReference(obj.constructor, key, {\r\n                model: refModel,\r\n                type: ReferenceType.TO_ONE_OR_MANY,\r\n            });\r\n        };\r\n    },\r\n    /**\r\n     * Define the identifier property on the model\r\n     *\r\n     * @param {T} obj Target model\r\n     * @param {string} key Identifier property name\r\n     * @returns {undefined}\r\n     */\r\n    identifier: function (obj, key) {\r\n        storage.addModelDefaultField(obj.constructor, key);\r\n        storage.setModelClassMetaKey(obj.constructor, 'id', key);\r\n    },\r\n    /**\r\n     * Define the type property on the model\r\n     *\r\n     * @param {T} obj Target model\r\n     * @param {string} key Type property name\r\n     * @returns {undefined}\r\n     */\r\n    type: function (obj, key) {\r\n        storage.addModelDefaultField(obj.constructor, key);\r\n        storage.setModelClassMetaKey(obj.constructor, 'type', key);\r\n    },\r\n});\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJvcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy9wcm9wLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxhQUFhLEVBQUMsTUFBTSx1QkFBdUIsQ0FBQztBQUdwRCxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sb0JBQW9CLENBQUM7QUFFM0M7Ozs7Ozs7R0FPRztBQUNILGdCQUFxQyxHQUFNLEVBQUUsR0FBVztJQUN0RCxPQUFPLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLFdBQStCLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDekUsQ0FBQztBQUVELDZDQUE2QztBQUM3QyxlQUFlLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFO0lBQ25DOzs7OztPQUtHO0lBQ0gsWUFBWSxZQUFDLEtBQVU7UUFDckIsT0FBTyxVQUFzQixHQUFNLEVBQUUsR0FBVztZQUM5QyxPQUFPLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLFdBQStCLEVBQUUsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBQ2hGLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILEtBQUssWUFBQyxRQUFnQztRQUNwQyxPQUFPLFVBQXNCLEdBQU0sRUFBRSxHQUFXO1lBQzlDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLENBQUMsV0FBK0IsRUFBRSxHQUFHLEVBQUU7Z0JBQ3ZFLEtBQUssRUFBRSxRQUFRO2dCQUNmLElBQUksRUFBRSxhQUFhLENBQUMsTUFBTTthQUMzQixDQUFDLENBQUM7UUFDTCxDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsTUFBTSxZQUFDLFFBQWdDLEVBQUUsUUFBaUI7UUFDeEQsT0FBTyxVQUFzQixHQUFNLEVBQUUsR0FBVztZQUM5QyxPQUFPLENBQUMsc0JBQXNCLENBQUMsR0FBRyxDQUFDLFdBQStCLEVBQUUsR0FBRyxFQUFFO2dCQUN2RSxLQUFLLEVBQUUsUUFBUTtnQkFDZixRQUFRLFVBQUE7Z0JBQ1IsSUFBSSxFQUFFLGFBQWEsQ0FBQyxPQUFPO2FBQzVCLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQztJQUNKLENBQUM7SUFFRDs7Ozs7T0FLRztJQUNILFdBQVcsWUFBQyxRQUFnQztRQUMxQyxPQUFPLFVBQXNCLEdBQU0sRUFBRSxHQUFXO1lBQzlDLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxHQUFHLENBQUMsV0FBK0IsRUFBRSxHQUFHLEVBQUU7Z0JBQ3ZFLEtBQUssRUFBRSxRQUFRO2dCQUNmLElBQUksRUFBRSxhQUFhLENBQUMsY0FBYzthQUNuQyxDQUFDLENBQUM7UUFDTCxDQUFDLENBQUM7SUFDSixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsVUFBVSxFQUFWLFVBQWdDLEdBQU0sRUFBRSxHQUFXO1FBQ2pELE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsV0FBK0IsRUFBRSxHQUFHLENBQUMsQ0FBQztRQUN2RSxPQUFPLENBQUMsb0JBQW9CLENBQUMsR0FBRyxDQUFDLFdBQStCLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQy9FLENBQUM7SUFFRDs7Ozs7O09BTUc7SUFDSCxJQUFJLEVBQUosVUFBMEIsR0FBTSxFQUFFLEdBQVc7UUFDM0MsT0FBTyxDQUFDLG9CQUFvQixDQUFDLEdBQUcsQ0FBQyxXQUErQixFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3ZFLE9BQU8sQ0FBQyxvQkFBb0IsQ0FBQyxHQUFHLENBQUMsV0FBK0IsRUFBRSxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUM7SUFDakYsQ0FBQztDQUNGLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7UmVmZXJlbmNlVHlwZX0gZnJvbSAnLi9lbnVtcy9SZWZlcmVuY2VUeXBlJztcbmltcG9ydCB7SVR5cGV9IGZyb20gJy4vaW50ZXJmYWNlcy9JVHlwZSc7XG5pbXBvcnQge1B1cmVNb2RlbH0gZnJvbSAnLi9QdXJlTW9kZWwnO1xuaW1wb3J0IHtzdG9yYWdlfSBmcm9tICcuL3NlcnZpY2VzL3N0b3JhZ2UnO1xuXG4vKipcbiAqIFNldCBhIG1vZGVsIHByb3BlcnR5IGFzIHRyYWNrZWRcbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUfSBvYmogVGFyZ2V0IG1vZGVsXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFByb3BlcnR5IG5hbWVcbiAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gKi9cbmZ1bmN0aW9uIHByb3BGbjxUIGV4dGVuZHMgUHVyZU1vZGVsPihvYmo6IFQsIGtleTogc3RyaW5nKSB7XG4gIHN0b3JhZ2UuYWRkTW9kZWxEZWZhdWx0RmllbGQob2JqLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBQdXJlTW9kZWwsIGtleSk7XG59XG5cbi8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpuby1kZWZhdWx0LWV4cG9ydFxuZXhwb3J0IGRlZmF1bHQgT2JqZWN0LmFzc2lnbihwcm9wRm4sIHtcbiAgLyoqXG4gICAqIFNldCB0aGUgZGVmYXVsdCB2YWx1ZSBmb3IgdGhlIG1vZGVsIHByb3BlcnR5XG4gICAqXG4gICAqIEBwYXJhbSB7YW55fSB2YWx1ZSBUaGUgZGVmYXVsdCBwcm9wZXJ0eSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgKi9cbiAgZGVmYXVsdFZhbHVlKHZhbHVlOiBhbnkpIHtcbiAgICByZXR1cm4gPFQgZXh0ZW5kcyBQdXJlTW9kZWw+KG9iajogVCwga2V5OiBzdHJpbmcpID0+IHtcbiAgICAgIHN0b3JhZ2UuYWRkTW9kZWxEZWZhdWx0RmllbGQob2JqLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBQdXJlTW9kZWwsIGtleSwgdmFsdWUpO1xuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFkZCBhIHJlZmVyZW5jZSB0byBhIHNpbmdsZSBvdGhlciBtb2RlbFxuICAgKlxuICAgKiBAcGFyYW0ge3R5cGVvZiBQdXJlTW9kZWx9IHJlZk1vZGVsIE1vZGVsIHR5cGUgdGhlIHJlZmVyZW5jZSB3aWxsIHBvaW50IHRvXG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuICB0b09uZShyZWZNb2RlbDogdHlwZW9mIFB1cmVNb2RlbHxJVHlwZSkge1xuICAgIHJldHVybiA8VCBleHRlbmRzIFB1cmVNb2RlbD4ob2JqOiBULCBrZXk6IHN0cmluZykgPT4ge1xuICAgICAgc3RvcmFnZS5hZGRNb2RlbENsYXNzUmVmZXJlbmNlKG9iai5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUHVyZU1vZGVsLCBrZXksIHtcbiAgICAgICAgbW9kZWw6IHJlZk1vZGVsLFxuICAgICAgICB0eXBlOiBSZWZlcmVuY2VUeXBlLlRPX09ORSxcbiAgICAgIH0pO1xuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFkZCBhIHJlZmVyZW5jZSB0byBtdWx0aXBsZSBvdGhlciBtb2RlbHNcbiAgICpcbiAgICogQHBhcmFtIHt0eXBlb2YgUHVyZU1vZGVsfSByZWZNb2RlbCBNb2RlbCB0eXBlIHRoZSByZWZlcmVuY2Ugd2lsbCBwb2ludCB0b1xuICAgKiBAcGFyYW0ge3N0cmluZ30gW3Byb3BlcnR5XSBVc2UgYSBmb3JlaWduIGtleSBmcm9tIHRoZSBvdGhlciBtb2RlbCB0byBnZXQgdGhpcyByZWZlcmVuY2UgKGNvbXB1dGVkIGJhY2sgcmVmZXJlbmNlKVxuICAgKiBAcmV0dXJucyB7dW5kZWZpbmVkfVxuICAgKi9cbiAgdG9NYW55KHJlZk1vZGVsOiB0eXBlb2YgUHVyZU1vZGVsfElUeXBlLCBwcm9wZXJ0eT86IHN0cmluZykge1xuICAgIHJldHVybiA8VCBleHRlbmRzIFB1cmVNb2RlbD4ob2JqOiBULCBrZXk6IHN0cmluZykgPT4ge1xuICAgICAgc3RvcmFnZS5hZGRNb2RlbENsYXNzUmVmZXJlbmNlKG9iai5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUHVyZU1vZGVsLCBrZXksIHtcbiAgICAgICAgbW9kZWw6IHJlZk1vZGVsLFxuICAgICAgICBwcm9wZXJ0eSxcbiAgICAgICAgdHlwZTogUmVmZXJlbmNlVHlwZS5UT19NQU5ZLFxuICAgICAgfSk7XG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogQWRkIGEgcmVmZXJlbmNlIHRvIGEgc2luZ2xlIG9yIG11bHRpcGxlIG90aGVyIG1vZGVsc1xuICAgKlxuICAgKiBAcGFyYW0ge3R5cGVvZiBQdXJlTW9kZWx9IHJlZk1vZGVsIE1vZGVsIHR5cGUgdGhlIHJlZmVyZW5jZSB3aWxsIHBvaW50IHRvXG4gICAqIEByZXR1cm5zIHt1bmRlZmluZWR9XG4gICAqL1xuICB0b09uZU9yTWFueShyZWZNb2RlbDogdHlwZW9mIFB1cmVNb2RlbHxJVHlwZSkge1xuICAgIHJldHVybiA8VCBleHRlbmRzIFB1cmVNb2RlbD4ob2JqOiBULCBrZXk6IHN0cmluZykgPT4ge1xuICAgICAgc3RvcmFnZS5hZGRNb2RlbENsYXNzUmVmZXJlbmNlKG9iai5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUHVyZU1vZGVsLCBrZXksIHtcbiAgICAgICAgbW9kZWw6IHJlZk1vZGVsLFxuICAgICAgICB0eXBlOiBSZWZlcmVuY2VUeXBlLlRPX09ORV9PUl9NQU5ZLFxuICAgICAgfSk7XG4gICAgfTtcbiAgfSxcblxuICAvKipcbiAgICogRGVmaW5lIHRoZSBpZGVudGlmaWVyIHByb3BlcnR5IG9uIHRoZSBtb2RlbFxuICAgKlxuICAgKiBAcGFyYW0ge1R9IG9iaiBUYXJnZXQgbW9kZWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBJZGVudGlmaWVyIHByb3BlcnR5IG5hbWVcbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICovXG4gIGlkZW50aWZpZXI8VCBleHRlbmRzIFB1cmVNb2RlbD4ob2JqOiBULCBrZXk6IHN0cmluZykge1xuICAgIHN0b3JhZ2UuYWRkTW9kZWxEZWZhdWx0RmllbGQob2JqLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBQdXJlTW9kZWwsIGtleSk7XG4gICAgc3RvcmFnZS5zZXRNb2RlbENsYXNzTWV0YUtleShvYmouY29uc3RydWN0b3IgYXMgdHlwZW9mIFB1cmVNb2RlbCwgJ2lkJywga2V5KTtcbiAgfSxcblxuICAvKipcbiAgICogRGVmaW5lIHRoZSB0eXBlIHByb3BlcnR5IG9uIHRoZSBtb2RlbFxuICAgKlxuICAgKiBAcGFyYW0ge1R9IG9iaiBUYXJnZXQgbW9kZWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleSBUeXBlIHByb3BlcnR5IG5hbWVcbiAgICogQHJldHVybnMge3VuZGVmaW5lZH1cbiAgICovXG4gIHR5cGU8VCBleHRlbmRzIFB1cmVNb2RlbD4ob2JqOiBULCBrZXk6IHN0cmluZykge1xuICAgIHN0b3JhZ2UuYWRkTW9kZWxEZWZhdWx0RmllbGQob2JqLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBQdXJlTW9kZWwsIGtleSk7XG4gICAgc3RvcmFnZS5zZXRNb2RlbENsYXNzTWV0YUtleShvYmouY29uc3RydWN0b3IgYXMgdHlwZW9mIFB1cmVNb2RlbCwgJ3R5cGUnLCBrZXkpO1xuICB9LFxufSk7XG4iXX0=","dts":{"name":"/Users/darko/Projects/mobx/datx/packages/datx/prop.d.ts","text":"import { PureModel } from './PureModel';\r\ndeclare const _default: (<T extends PureModel>(obj: T, key: string) => void) & {\r\n    defaultValue(value: any): <T extends PureModel>(obj: T, key: string) => void;\r\n    toOne(refModel: string | number | typeof PureModel): <T extends PureModel>(obj: T, key: string) => void;\r\n    toMany(refModel: string | number | typeof PureModel, property?: string | undefined): <T extends PureModel>(obj: T, key: string) => void;\r\n    toOneOrMany(refModel: string | number | typeof PureModel): <T extends PureModel>(obj: T, key: string) => void;\r\n    identifier<T extends PureModel>(obj: T, key: string): void;\r\n    type<T extends PureModel>(obj: T, key: string): void;\r\n};\r\nexport default _default;\r\n"}}
