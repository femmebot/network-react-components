{"code":"import * as tslib_1 from \"tslib\";\r\nexport function decorateView(BaseClass) {\r\n    var JsonapiView = /** @class */ (function (_super) {\r\n        tslib_1.__extends(JsonapiView, _super);\r\n        function JsonapiView(modelType, collection, sortMethod, models, unique) {\r\n            if (models === void 0) { models = []; }\r\n            if (unique === void 0) { unique = false; }\r\n            var _this = _super.call(this, modelType, collection, sortMethod, models, unique) || this;\r\n            _this.__collection = collection;\r\n            return _this;\r\n        }\r\n        JsonapiView.prototype.sync = function (body) {\r\n            var data = this.__collection.sync(body);\r\n            if (data) {\r\n                this.add(data);\r\n            }\r\n            return data;\r\n        };\r\n        /**\r\n         * Fetch the records with the given type and id\r\n         *\r\n         * @param {number|string} type Record id\r\n         * @param {IRequestOptions} [options] Server options\r\n         * @returns {Promise<Response>} Resolves with the Response object or rejects with an error\r\n         */\r\n        JsonapiView.prototype.fetch = function (id, options) {\r\n            return this.__collection\r\n                .fetch(this.modelType, id, options)\r\n                .then(this.__addFromResponse.bind(this));\r\n        };\r\n        /**\r\n         * Fetch the first page of records of the given type\r\n         *\r\n         * @param {IRequestOptions} [options] Server options\r\n         * @returns {Promise<Response>} Resolves with the Response object or rejects with an error\r\n         */\r\n        JsonapiView.prototype.fetchAll = function (options) {\r\n            return this.__collection\r\n                .fetchAll(this.modelType, options)\r\n                .then(this.__addFromResponse.bind(this));\r\n        };\r\n        JsonapiView.prototype.__addFromResponse = function (response) {\r\n            if (response.data) {\r\n                this.add(response.data);\r\n            }\r\n            response.views.push(this);\r\n            return response;\r\n        };\r\n        return JsonapiView;\r\n    }(BaseClass));\r\n    // @ts-ignore\r\n    return JsonapiView;\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjb3JhdGVWaWV3LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL2RlY29yYXRlVmlldy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBWUEsTUFBTSx1QkFBMEIsU0FBc0I7SUFDcEQ7UUFBbUUsdUNBQVM7UUFHMUUscUJBQ0UsU0FBcUMsRUFDckMsVUFBOEIsRUFDOUIsVUFBc0MsRUFDdEMsTUFBeUMsRUFDekMsTUFBdUI7WUFEdkIsdUJBQUEsRUFBQSxXQUF5QztZQUN6Qyx1QkFBQSxFQUFBLGNBQXVCO1lBTHpCLFlBT0Usa0JBQU0sU0FBUyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLE1BQU0sQ0FBQyxTQUV6RDtZQURDLEtBQUksQ0FBQyxZQUFZLEdBQUcsVUFBVSxDQUFDOztRQUNqQyxDQUFDO1FBRU0sMEJBQUksR0FBWCxVQUFZLElBQWdCO1lBQzFCLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQzFDLElBQUksSUFBSSxFQUFFO2dCQUNSLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDaEI7WUFFRCxPQUFPLElBQXVCLENBQUM7UUFDakMsQ0FBQztRQUVEOzs7Ozs7V0FNRztRQUNJLDJCQUFLLEdBQVosVUFDRSxFQUFpQixFQUNqQixPQUF5QjtZQUV6QixPQUFPLElBQUksQ0FBQyxZQUFZO2lCQUNyQixLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxFQUFFLEVBQUUsT0FBTyxDQUFDO2lCQUNsQyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBeUIsQ0FBQztRQUNyRSxDQUFDO1FBRUQ7Ozs7O1dBS0c7UUFDSSw4QkFBUSxHQUFmLFVBQ0UsT0FBeUI7WUFFekIsT0FBTyxJQUFJLENBQUMsWUFBWTtpQkFDckIsUUFBUSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsT0FBTyxDQUFDO2lCQUNqQyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBeUIsQ0FBQztRQUNyRSxDQUFDO1FBRU8sdUNBQWlCLEdBQXpCLFVBQTBCLFFBQXFCO1lBQzdDLElBQUksUUFBUSxDQUFDLElBQUksRUFBRTtnQkFDakIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDekI7WUFDRCxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUUxQixPQUFPLFFBQVEsQ0FBQztRQUNsQixDQUFDO1FBQ0gsa0JBQUM7SUFBRCxDQUFDLEFBN0RELENBQW1FLFNBQVMsR0E2RDNFO0lBRUQsYUFBYTtJQUNiLE9BQU8sV0FBZ0UsQ0FBQztBQUMxRSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJSWRlbnRpZmllciwgSU1vZGVsQ29uc3RydWN0b3IsIElUeXBlLCBJVmlld0NvbnN0cnVjdG9yLCBQdXJlTW9kZWwsIFZpZXd9IGZyb20gJ2RhdHgnO1xuaW1wb3J0IHtJRGljdGlvbmFyeSwgSVJhd01vZGVsLCBtYXBJdGVtc30gZnJvbSAnZGF0eC11dGlscyc7XG5cbmltcG9ydCB7SUpzb25hcGlDb2xsZWN0aW9ufSBmcm9tICcuL2ludGVyZmFjZXMvSUpzb25hcGlDb2xsZWN0aW9uJztcbmltcG9ydCB7SUpzb25hcGlNb2RlbH0gZnJvbSAnLi9pbnRlcmZhY2VzL0lKc29uYXBpTW9kZWwnO1xuaW1wb3J0IHtJSnNvbmFwaVZpZXd9IGZyb20gJy4vaW50ZXJmYWNlcy9JSnNvbmFwaVZpZXcnO1xuaW1wb3J0IHtJUmVxdWVzdE9wdGlvbnN9IGZyb20gJy4vaW50ZXJmYWNlcy9JUmVxdWVzdE9wdGlvbnMnO1xuaW1wb3J0IHtJRGVmaW5pdGlvbiwgSVJlbGF0aW9uc2hpcCwgSVJlcXVlc3QsIElSZXNwb25zZX0gZnJvbSAnLi9pbnRlcmZhY2VzL0pzb25BcGknO1xuaW1wb3J0IHtSZXNwb25zZX0gZnJvbSAnLi9SZXNwb25zZSc7XG5cbmRlY2xhcmUgdmFyIHdpbmRvdzogb2JqZWN0fHVuZGVmaW5lZDtcblxuZXhwb3J0IGZ1bmN0aW9uIGRlY29yYXRlVmlldzxVPihCYXNlQ2xhc3M6IHR5cGVvZiBWaWV3KSB7XG4gIGNsYXNzIEpzb25hcGlWaWV3PE0gZXh0ZW5kcyBJSnNvbmFwaU1vZGVsID0gSUpzb25hcGlNb2RlbD4gZXh0ZW5kcyBCYXNlQ2xhc3Mge1xuICAgIHByb3RlY3RlZCBfX2NvbGxlY3Rpb246IElKc29uYXBpQ29sbGVjdGlvbjtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgbW9kZWxUeXBlOiBJTW9kZWxDb25zdHJ1Y3RvcjxNPnxJVHlwZSxcbiAgICAgIGNvbGxlY3Rpb246IElKc29uYXBpQ29sbGVjdGlvbixcbiAgICAgIHNvcnRNZXRob2Q/OiBzdHJpbmd8KChpdGVtOiBNKSA9PiBhbnkpLFxuICAgICAgbW9kZWxzOiBBcnJheTxJSWRlbnRpZmllcnxQdXJlTW9kZWw+ID0gW10sXG4gICAgICB1bmlxdWU6IGJvb2xlYW4gPSBmYWxzZSxcbiAgICApIHtcbiAgICAgIHN1cGVyKG1vZGVsVHlwZSwgY29sbGVjdGlvbiwgc29ydE1ldGhvZCwgbW9kZWxzLCB1bmlxdWUpO1xuICAgICAgdGhpcy5fX2NvbGxlY3Rpb24gPSBjb2xsZWN0aW9uO1xuICAgIH1cblxuICAgIHB1YmxpYyBzeW5jKGJvZHk/OiBJUmVzcG9uc2UpOiBNfEFycmF5PE0+fG51bGwge1xuICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX19jb2xsZWN0aW9uLnN5bmMoYm9keSk7XG4gICAgICBpZiAoZGF0YSkge1xuICAgICAgICB0aGlzLmFkZChkYXRhKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGRhdGEgYXMgTXxBcnJheTxNPnxudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZldGNoIHRoZSByZWNvcmRzIHdpdGggdGhlIGdpdmVuIHR5cGUgYW5kIGlkXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHR5cGUgUmVjb3JkIGlkXG4gICAgICogQHBhcmFtIHtJUmVxdWVzdE9wdGlvbnN9IFtvcHRpb25zXSBTZXJ2ZXIgb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0gUmVzb2x2ZXMgd2l0aCB0aGUgUmVzcG9uc2Ugb2JqZWN0IG9yIHJlamVjdHMgd2l0aCBhbiBlcnJvclxuICAgICAqL1xuICAgIHB1YmxpYyBmZXRjaChcbiAgICAgIGlkOiBudW1iZXJ8c3RyaW5nLFxuICAgICAgb3B0aW9ucz86IElSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFJlc3BvbnNlPE0+PiB7XG4gICAgICByZXR1cm4gdGhpcy5fX2NvbGxlY3Rpb25cbiAgICAgICAgLmZldGNoKHRoaXMubW9kZWxUeXBlLCBpZCwgb3B0aW9ucylcbiAgICAgICAgLnRoZW4odGhpcy5fX2FkZEZyb21SZXNwb25zZS5iaW5kKHRoaXMpKSBhcyBQcm9taXNlPFJlc3BvbnNlPE0+PjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaCB0aGUgZmlyc3QgcGFnZSBvZiByZWNvcmRzIG9mIHRoZSBnaXZlbiB0eXBlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0lSZXF1ZXN0T3B0aW9uc30gW29wdGlvbnNdIFNlcnZlciBvcHRpb25zXG4gICAgICogQHJldHVybnMge1Byb21pc2U8UmVzcG9uc2U+fSBSZXNvbHZlcyB3aXRoIHRoZSBSZXNwb25zZSBvYmplY3Qgb3IgcmVqZWN0cyB3aXRoIGFuIGVycm9yXG4gICAgICovXG4gICAgcHVibGljIGZldGNoQWxsKFxuICAgICAgb3B0aW9ucz86IElSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFJlc3BvbnNlPE0+PiB7XG4gICAgICByZXR1cm4gdGhpcy5fX2NvbGxlY3Rpb25cbiAgICAgICAgLmZldGNoQWxsKHRoaXMubW9kZWxUeXBlLCBvcHRpb25zKVxuICAgICAgICAudGhlbih0aGlzLl9fYWRkRnJvbVJlc3BvbnNlLmJpbmQodGhpcykpIGFzIFByb21pc2U8UmVzcG9uc2U8TT4+O1xuICAgIH1cblxuICAgIHByaXZhdGUgX19hZGRGcm9tUmVzcG9uc2UocmVzcG9uc2U6IFJlc3BvbnNlPE0+KSB7XG4gICAgICBpZiAocmVzcG9uc2UuZGF0YSkge1xuICAgICAgICB0aGlzLmFkZChyZXNwb25zZS5kYXRhKTtcbiAgICAgIH1cbiAgICAgIHJlc3BvbnNlLnZpZXdzLnB1c2godGhpcyk7XG5cbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG4gIH1cblxuICAvLyBAdHMtaWdub3JlXG4gIHJldHVybiBKc29uYXBpVmlldyBhcyBJVmlld0NvbnN0cnVjdG9yPElKc29uYXBpTW9kZWwsIFUgJiBJSnNvbmFwaVZpZXc+O1xufVxuIl19","dts":{"name":"/Users/darko/Projects/mobx/datx/packages/datx-jsonapi/decorateView.d.ts","text":"import { IViewConstructor, View } from 'datx';\r\nimport { IJsonapiModel } from './interfaces/IJsonapiModel';\r\nimport { IJsonapiView } from './interfaces/IJsonapiView';\r\nexport declare function decorateView<U>(BaseClass: typeof View): IViewConstructor<IJsonapiModel, U & IJsonapiView>;\r\n"}}
