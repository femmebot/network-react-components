{"code":"import * as tslib_1 from \"tslib\";\r\nimport { getModelType, initModelRef, ReferenceType, updateModel, } from 'datx';\r\nimport { mapItems } from 'datx-utils';\r\nimport { action } from 'mobx';\r\nimport { clearAllCache, clearCacheByType } from './cache';\r\nimport { URL_REGEX } from './consts';\r\nimport { ParamArrayType } from './enums/ParamArrayType';\r\nimport { GenericModel } from './GenericModel';\r\nimport { flattenModel, removeModel } from './helpers/model';\r\nimport { getValue, isBrowser } from './helpers/utils';\r\nimport { config, fetch, read } from './NetworkUtils';\r\nexport function decorateCollection(BaseClass) {\r\n    var JsonapiCollection = /** @class */ (function (_super) {\r\n        tslib_1.__extends(JsonapiCollection, _super);\r\n        function JsonapiCollection() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        JsonapiCollection.prototype.sync = function (body) {\r\n            var _this = this;\r\n            if (!body) {\r\n                return null;\r\n            }\r\n            var data = this.__iterateEntries(body, function (obj) { return _this.__addRecord(obj); });\r\n            this.__iterateEntries(body, this.__updateRelationships.bind(this));\r\n            return data;\r\n        };\r\n        /**\r\n         * Fetch the records with the given type and id\r\n         *\r\n         * @param {string} type Record type\r\n         * @param {number|string} type Record id\r\n         * @param {IRequestOptions} [options] Server options\r\n         * @returns {Promise<Response>} Resolves with the Response object or rejects with an error\r\n         */\r\n        JsonapiCollection.prototype.fetch = function (type, id, options) {\r\n            var _this = this;\r\n            var modelType = getModelType(type);\r\n            var query = this.__prepareQuery(modelType, id, undefined, options);\r\n            return read(query.url, this, query.headers, options)\r\n                .then(function (res) { return _this.__handleErrors(res); });\r\n        };\r\n        /**\r\n         * Fetch the first page of records of the given type\r\n         *\r\n         * @param {string} type Record type\r\n         * @param {IRequestOptions} [options] Server options\r\n         * @returns {Promise<Response>} Resolves with the Response object or rejects with an error\r\n         */\r\n        JsonapiCollection.prototype.fetchAll = function (type, options) {\r\n            var _this = this;\r\n            var modelType = getModelType(type);\r\n            var query = this.__prepareQuery(modelType, undefined, undefined, options);\r\n            return read(query.url, this, query.headers, options)\r\n                .then(function (res) { return _this.__handleErrors(res); });\r\n        };\r\n        JsonapiCollection.prototype.request = function (url, method, data, options) {\r\n            if (method === void 0) { method = 'GET'; }\r\n            var query = this.__buildUrl(url, data, options);\r\n            return fetch({ url: query.url, options: options, data: data, method: method, collection: this });\r\n        };\r\n        JsonapiCollection.prototype.remove = function (obj, id, remote) {\r\n            var remove = (typeof id === 'boolean' || typeof id === 'object') ? id : remote;\r\n            var modelId = (typeof id !== 'boolean' && typeof id !== 'object') ? id : undefined;\r\n            var type = getModelType(obj);\r\n            var model = this.find(type, modelId);\r\n            if (model && remove) {\r\n                return removeModel(model, typeof remove === 'object' ? remove : undefined);\r\n            }\r\n            if (model) {\r\n                _super.prototype.remove.call(this, model);\r\n            }\r\n            clearCacheByType(type);\r\n            return Promise.resolve();\r\n        };\r\n        JsonapiCollection.prototype.removeAll = function (type) {\r\n            _super.prototype.removeAll.call(this, type);\r\n            clearCacheByType(getModelType(type));\r\n        };\r\n        JsonapiCollection.prototype.reset = function () {\r\n            _super.prototype.reset.call(this);\r\n            clearAllCache();\r\n        };\r\n        /**\r\n         * Function used to handle response errors\r\n         *\r\n         * @private\r\n         * @param {Response} response API response\r\n         * @returns API response\r\n         */\r\n        JsonapiCollection.prototype.__handleErrors = function (response) {\r\n            if (response.error) {\r\n                throw response.error;\r\n            }\r\n            return response;\r\n        };\r\n        JsonapiCollection.prototype.__addRecord = function (obj) {\r\n            var staticCollection = this.constructor;\r\n            var type = obj.type, id = obj.id;\r\n            var record = this.find(type, id);\r\n            var flattened = flattenModel(obj);\r\n            if (record) {\r\n                updateModel(record, flattened);\r\n            }\r\n            else if (staticCollection.types.filter(function (item) { return item.type === type; }).length) {\r\n                record = this.add(flattened, type);\r\n            }\r\n            else {\r\n                record = this.add(new GenericModel(flattened));\r\n            }\r\n            return record;\r\n        };\r\n        JsonapiCollection.prototype.__updateRelationships = function (obj) {\r\n            var _this = this;\r\n            var record = this.find(obj.type, obj.id);\r\n            var refs = obj.relationships ? Object.keys(obj.relationships) : [];\r\n            refs.forEach(function (ref) {\r\n                var items = obj.relationships[ref].data;\r\n                if (items instanceof Array && items.length < 1) {\r\n                    // it's only possible to update items with one ore more refs. Early exit\r\n                    return;\r\n                }\r\n                if (items && record) {\r\n                    var models = mapItems(items, function (def) { return _this.find(def.type, def.id) || def.id; }) || null;\r\n                    var itemType = items instanceof Array ? items[0].type : items.type;\r\n                    if (ref in record) {\r\n                        record[ref] = models;\r\n                    }\r\n                    else {\r\n                        initModelRef(record, ref, { model: itemType, type: ReferenceType.TO_ONE_OR_MANY }, models);\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        JsonapiCollection.prototype.__iterateEntries = function (body, fn) {\r\n            mapItems((body && body.included) || [], fn);\r\n            return mapItems((body && body.data) || [], fn);\r\n        };\r\n        JsonapiCollection.prototype.__prepareQuery = function (type, id, data, options) {\r\n            var staticCollection = this.constructor;\r\n            var model = staticCollection.types.filter(function (item) { return item.type === type; })[0];\r\n            var path = model\r\n                ? (getValue(model['endpoint']) || model['baseUrl'] || getModelType(model))\r\n                : type;\r\n            var url = id ? path + \"/\" + id : \"\" + path;\r\n            return this.__buildUrl(url, data, options);\r\n        };\r\n        JsonapiCollection.prototype.__buildUrl = function (url, data, options) {\r\n            var headers = (options && options.headers) || {};\r\n            var params = this.__prepareFilters((options && options.filter) || {}).concat(this.__prepareSort(options && options.sort), this.__prepareIncludes(options && options.include), this.__prepareFields((options && options.fields) || {}), this.__prepareRawParams((options && options.params) || []));\r\n            var baseUrl = this.__appendParams(this.__prefixUrl(url), params);\r\n            return { data: data, headers: headers, url: baseUrl };\r\n        };\r\n        JsonapiCollection.prototype.__prepareFilters = function (filters) {\r\n            return this.__parametrize(filters).map(function (item) { return \"filter[\" + item.key + \"]=\" + item.value; });\r\n        };\r\n        JsonapiCollection.prototype.__prepareSort = function (sort) {\r\n            return sort ? [\"sort=\" + sort] : [];\r\n        };\r\n        JsonapiCollection.prototype.__prepareIncludes = function (include) {\r\n            return include ? [\"include=\" + include] : [];\r\n        };\r\n        JsonapiCollection.prototype.__prepareFields = function (fields) {\r\n            var list = [];\r\n            Object.keys(fields).forEach(function (key) {\r\n                list.push(\"fields[\" + key + \"]=\" + fields[key]);\r\n            });\r\n            return list;\r\n        };\r\n        JsonapiCollection.prototype.__prepareRawParams = function (params) {\r\n            return params.map(function (param) {\r\n                if (typeof param === 'string') {\r\n                    return param;\r\n                }\r\n                return param.key + \"=\" + param.value;\r\n            });\r\n        };\r\n        JsonapiCollection.prototype.__prefixUrl = function (url) {\r\n            if (URL_REGEX.test(url)) {\r\n                return url;\r\n            }\r\n            return \"\" + config.baseUrl + url;\r\n        };\r\n        JsonapiCollection.prototype.__appendParams = function (url, params) {\r\n            var newUrl = url;\r\n            if (params.length) {\r\n                var separator = newUrl.indexOf('?') === -1 ? '?' : '&';\r\n                newUrl += separator + params.join('&');\r\n            }\r\n            return newUrl;\r\n        };\r\n        JsonapiCollection.prototype.__parametrize = function (params, scope) {\r\n            var _this = this;\r\n            if (scope === void 0) { scope = ''; }\r\n            var list = [];\r\n            Object.keys(params).forEach(function (key) {\r\n                if (params[key] instanceof Array) {\r\n                    if (config.paramArrayType === ParamArrayType.OBJECT_PATH) {\r\n                        list.push.apply(list, _this.__parametrize(params[key], key + \".\"));\r\n                    }\r\n                    else if (config.paramArrayType === ParamArrayType.COMMA_SEPARATED) {\r\n                        list.push({ key: \"\" + scope + key, value: params[key].join(',') });\r\n                    }\r\n                    else if (config.paramArrayType === ParamArrayType.MULTIPLE_PARAMS) {\r\n                        list.push.apply(list, params[key].map(function (param) { return ({ key: \"\" + scope + key, value: param }); }));\r\n                    }\r\n                    else if (config.paramArrayType === ParamArrayType.PARAM_ARRAY) {\r\n                        list.push.apply(list, params[key].map(function (param) { return ({ key: \"\" + scope + key + \"][\", value: param }); }));\r\n                    }\r\n                }\r\n                else if (typeof params[key] === 'object') {\r\n                    list.push.apply(list, _this.__parametrize(params[key], key + \".\"));\r\n                }\r\n                else {\r\n                    list.push({ key: \"\" + scope + key, value: params[key] });\r\n                }\r\n            });\r\n            return list;\r\n        };\r\n        JsonapiCollection.types = (BaseClass.types && BaseClass.types.length)\r\n            ? BaseClass.types.concat(GenericModel)\r\n            : [GenericModel];\r\n        JsonapiCollection.cache = BaseClass['cache'] === undefined\r\n            ? isBrowser\r\n            : BaseClass['cache'];\r\n        JsonapiCollection.defaultModel = BaseClass['defaultModel'] || GenericModel;\r\n        tslib_1.__decorate([\r\n            action\r\n        ], JsonapiCollection.prototype, \"sync\", null);\r\n        tslib_1.__decorate([\r\n            action\r\n        ], JsonapiCollection.prototype, \"remove\", null);\r\n        tslib_1.__decorate([\r\n            action\r\n        ], JsonapiCollection.prototype, \"removeAll\", null);\r\n        tslib_1.__decorate([\r\n            action\r\n        ], JsonapiCollection.prototype, \"reset\", null);\r\n        return JsonapiCollection;\r\n    }(BaseClass));\r\n    return JsonapiCollection;\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjb3JhdGVDb2xsZWN0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL2RlY29yYXRlQ29sbGVjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLFlBQVksRUFJWixZQUFZLEVBSVosYUFBYSxFQUNiLFdBQVcsR0FDWixNQUFNLE1BQU0sQ0FBQztBQUNkLE9BQU8sRUFBeUIsUUFBUSxFQUFDLE1BQU0sWUFBWSxDQUFDO0FBQzVELE9BQU8sRUFBQyxNQUFNLEVBQUMsTUFBTSxNQUFNLENBQUM7QUFFNUIsT0FBTyxFQUFDLGFBQWEsRUFBRSxnQkFBZ0IsRUFBQyxNQUFNLFNBQVMsQ0FBQztBQUN4RCxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQ25DLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDNUMsT0FBTyxFQUFDLFlBQVksRUFBRSxXQUFXLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUMxRCxPQUFPLEVBQUMsUUFBUSxFQUFFLFNBQVMsRUFBQyxNQUFNLGlCQUFpQixDQUFDO0FBT3BELE9BQU8sRUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksRUFBQyxNQUFNLGdCQUFnQixDQUFDO0FBR25ELE1BQU0sNkJBQTZCLFNBQWdDO0lBQ2pFO1FBQWdDLDZDQUFTO1FBQXpDOztRQXFSQSxDQUFDO1FBMVFnQixnQ0FBSSxHQUFYLFVBQXFELElBQWdCO1lBQTdFLGlCQVFDO1lBUEMsSUFBSSxDQUFDLElBQUksRUFBRTtnQkFDVCxPQUFPLElBQUksQ0FBQzthQUNiO1lBQ0QsSUFBTSxJQUFJLEdBQW9CLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLEVBQUUsVUFBQyxHQUFZLElBQUssT0FBQSxLQUFJLENBQUMsV0FBVyxDQUFJLEdBQUcsQ0FBQyxFQUF4QixDQUF3QixDQUFDLENB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QVMsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQztZQUN0QyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUVMLHVCQUFLLEdBQVksU0FBUyxDQUFDLE9BQU8sQ0FBQyxLQUFLLFNBQVM7WUFDN0QsQ0FBQyxDQUFDLFNBQVM7WUFDWCxDQUFDLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRVQsOEJBQVksR0FBRyxTQUFTLENBQUMsY0FBYyxDQUFDLElBQUksWUFBWSxDQUFDO1FBRS9EO1lBQVAsTUFBTTtxREFRTjtRQXFETztZQUFQLE1BQU07dURBb0JOO1FBRU87WUFBUCxNQUFNOzBEQUdOO1FBRU87WUFBUCxNQUFNO3NEQUdOO1FBK0tILHdCQUFDO0tBQUEsQUFyUkQsQ0FBZ0MsU0FBUyxHQXFSeEM7SUFFRCxPQUFPLGlCQUFnRixDQUFDO0FBQzFGLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBnZXRNb2RlbFR5cGUsXG4gIElDb2xsZWN0aW9uQ29uc3RydWN0b3IsXG4gIElJZGVudGlmaWVyLFxuICBJTW9kZWxDb25zdHJ1Y3RvcixcbiAgaW5pdE1vZGVsUmVmLFxuICBJVHlwZSxcbiAgUHVyZUNvbGxlY3Rpb24sXG4gIFB1cmVNb2RlbCxcbiAgUmVmZXJlbmNlVHlwZSxcbiAgdXBkYXRlTW9kZWwsXG59IGZyb20gJ2RhdHgnO1xuaW1wb3J0IHtJRGljdGlvbmFyeSwgSVJhd01vZGVsLCBtYXBJdGVtc30gZnJvbSAnZGF0eC11dGlscyc7XG5pbXBvcnQge2FjdGlvbn0gZnJvbSAnbW9ieCc7XG5cbmltcG9ydCB7Y2xlYXJBbGxDYWNoZSwgY2xlYXJDYWNoZUJ5VHlwZX0gZnJvbSAnLi9jYWNoZSc7XG5pbXBvcnQge1VSTF9SRUdFWH0gZnJvbSAnLi9jb25zdHMnO1xuaW1wb3J0IHtQYXJhbUFycmF5VHlwZX0gZnJvbSAnLi9lbnVtcy9QYXJhbUFycmF5VHlwZSc7XG5pbXBvcnQge0dlbmVyaWNNb2RlbH0gZnJvbSAnLi9HZW5lcmljTW9kZWwnO1xuaW1wb3J0IHtmbGF0dGVuTW9kZWwsIHJlbW92ZU1vZGVsfSBmcm9tICcuL2hlbHBlcnMvbW9kZWwnO1xuaW1wb3J0IHtnZXRWYWx1ZSwgaXNCcm93c2VyfSBmcm9tICcuL2hlbHBlcnMvdXRpbHMnO1xuaW1wb3J0IHtJRmlsdGVyc30gZnJvbSAnLi9pbnRlcmZhY2VzL0lGaWx0ZXJzJztcbmltcG9ydCB7SUhlYWRlcnN9IGZyb20gJy4vaW50ZXJmYWNlcy9JSGVhZGVycyc7XG5pbXBvcnQge0lKc29uYXBpQ29sbGVjdGlvbn0gZnJvbSAnLi9pbnRlcmZhY2VzL0lKc29uYXBpQ29sbGVjdGlvbic7XG5pbXBvcnQge0lKc29uYXBpTW9kZWx9IGZyb20gJy4vaW50ZXJmYWNlcy9JSnNvbmFwaU1vZGVsJztcbmltcG9ydCB7SVJlcXVlc3RPcHRpb25zfSBmcm9tICcuL2ludGVyZmFjZXMvSVJlcXVlc3RPcHRpb25zJztcbmltcG9ydCB7SURlZmluaXRpb24sIElSZWNvcmQsIElSZWxhdGlvbnNoaXAsIElSZXF1ZXN0LCBJUmVzcG9uc2V9IGZyb20gJy4vaW50ZXJmYWNlcy9Kc29uQXBpJztcbmltcG9ydCB7Y29uZmlnLCBmZXRjaCwgcmVhZH0gZnJvbSAnLi9OZXR3b3JrVXRpbHMnO1xuaW1wb3J0IHtSZXNwb25zZX0gZnJvbSAnLi9SZXNwb25zZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNvcmF0ZUNvbGxlY3Rpb24oQmFzZUNsYXNzOiB0eXBlb2YgUHVyZUNvbGxlY3Rpb24pIHtcbiAgY2xhc3MgSnNvbmFwaUNvbGxlY3Rpb24gZXh0ZW5kcyBCYXNlQ2xhc3Mge1xuICAgIHB1YmxpYyBzdGF0aWMgdHlwZXMgPSAoQmFzZUNsYXNzLnR5cGVzICYmIEJhc2VDbGFzcy50eXBlcy5sZW5ndGgpXG4gICAgICA/IEJhc2VDbGFzcy50eXBlcy5jb25jYXQoR2VuZXJpY01vZGVsKVxuICAgICAgOiBbR2VuZXJpY01vZGVsXTtcblxuICAgIHB1YmxpYyBzdGF0aWMgY2FjaGU6IGJvb2xlYW4gPSBCYXNlQ2xhc3NbJ2NhY2hlJ10gPT09IHVuZGVmaW5lZFxuICAgICAgPyBpc0Jyb3dzZXJcbiAgICAgIDogQmFzZUNsYXNzWydjYWNoZSddO1xuXG4gICAgcHVibGljIHN0YXRpYyBkZWZhdWx0TW9kZWwgPSBCYXNlQ2xhc3NbJ2RlZmF1bHRNb2RlbCddIHx8IEdlbmVyaWNNb2RlbDtcblxuICAgIEBhY3Rpb24gcHVibGljIHN5bmM8VCBleHRlbmRzIElKc29uYXBpTW9kZWwgPSBJSnNvbmFwaU1vZGVsPihib2R5PzogSVJlc3BvbnNlKTogVHxBcnJheTxUPnxudWxsIHtcbiAgICAgIGlmICghYm9keSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRhdGE6IFR8QXJyYXk8VD58bnVsbCA9IHRoaXMuX19pdGVyYXRlRW50cmllcyhib2R5LCAob2JqOiBJUmVjb3JkKSA9PiB0aGlzLl9fYWRkUmVjb3JkPFQ+KG9iaikpO1xuICAgICAgdGhpcy5fX2l0ZXJhdGVFbnRyaWVzKGJvZHksIHRoaXMuX191cGRhdGVSZWxhdGlvbnNoaXBzLmJpbmQodGhpcykpO1xuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaCB0aGUgcmVjb3JkcyB3aXRoIHRoZSBnaXZlbiB0eXBlIGFuZCBpZFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgUmVjb3JkIHR5cGVcbiAgICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHR5cGUgUmVjb3JkIGlkXG4gICAgICogQHBhcmFtIHtJUmVxdWVzdE9wdGlvbnN9IFtvcHRpb25zXSBTZXJ2ZXIgb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0gUmVzb2x2ZXMgd2l0aCB0aGUgUmVzcG9uc2Ugb2JqZWN0IG9yIHJlamVjdHMgd2l0aCBhbiBlcnJvclxuICAgICAqL1xuICAgIHB1YmxpYyBmZXRjaDxUIGV4dGVuZHMgSUpzb25hcGlNb2RlbCA9IElKc29uYXBpTW9kZWw+KFxuICAgICAgdHlwZTogSVR5cGV8SU1vZGVsQ29uc3RydWN0b3I8VD4sXG4gICAgICBpZDogbnVtYmVyfHN0cmluZyxcbiAgICAgIG9wdGlvbnM/OiBJUmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxSZXNwb25zZTxUPj4ge1xuICAgICAgY29uc3QgbW9kZWxUeXBlID0gZ2V0TW9kZWxUeXBlKHR5cGUpO1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLl9fcHJlcGFyZVF1ZXJ5KG1vZGVsVHlwZSwgaWQsIHVuZGVmaW5lZCwgb3B0aW9ucyk7XG5cbiAgICAgIHJldHVybiByZWFkPFQ+KHF1ZXJ5LnVybCwgdGhpcywgcXVlcnkuaGVhZGVycywgb3B0aW9ucylcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fX2hhbmRsZUVycm9yczxUPihyZXMpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGZXRjaCB0aGUgZmlyc3QgcGFnZSBvZiByZWNvcmRzIG9mIHRoZSBnaXZlbiB0eXBlXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBSZWNvcmQgdHlwZVxuICAgICAqIEBwYXJhbSB7SVJlcXVlc3RPcHRpb25zfSBbb3B0aW9uc10gU2VydmVyIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59IFJlc29sdmVzIHdpdGggdGhlIFJlc3BvbnNlIG9iamVjdCBvciByZWplY3RzIHdpdGggYW4gZXJyb3JcbiAgICAgKi9cbiAgICBwdWJsaWMgZmV0Y2hBbGw8VCBleHRlbmRzIElKc29uYXBpTW9kZWwgPSBJSnNvbmFwaU1vZGVsPihcbiAgICAgIHR5cGU6IElUeXBlfElNb2RlbENvbnN0cnVjdG9yPFQ+LFxuICAgICAgb3B0aW9ucz86IElSZXF1ZXN0T3B0aW9ucyxcbiAgICApOiBQcm9taXNlPFJlc3BvbnNlPFQ+PiB7XG4gICAgICBjb25zdCBtb2RlbFR5cGUgPSBnZXRNb2RlbFR5cGUodHlwZSk7XG4gICAgICBjb25zdCBxdWVyeSA9IHRoaXMuX19wcmVwYXJlUXVlcnkobW9kZWxUeXBlLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgb3B0aW9ucyk7XG5cbiAgICAgIHJldHVybiByZWFkPFQ+KHF1ZXJ5LnVybCwgdGhpcywgcXVlcnkuaGVhZGVycywgb3B0aW9ucylcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fX2hhbmRsZUVycm9yczxUPihyZXMpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVxdWVzdDxUIGV4dGVuZHMgSUpzb25hcGlNb2RlbCA9IElKc29uYXBpTW9kZWw+KFxuICAgICAgdXJsOiBzdHJpbmcsXG4gICAgICBtZXRob2Q6IHN0cmluZyA9ICdHRVQnLFxuICAgICAgZGF0YT86IG9iamVjdCxcbiAgICAgIG9wdGlvbnM/OiBJUmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxSZXNwb25zZTxUPj4ge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLl9fYnVpbGRVcmwodXJsLCBkYXRhLCBvcHRpb25zKTtcblxuICAgICAgcmV0dXJuIGZldGNoPFQ+KHt1cmw6IHF1ZXJ5LnVybCwgb3B0aW9ucywgZGF0YSwgbWV0aG9kLCBjb2xsZWN0aW9uOiB0aGlzfSk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZSh0eXBlOiBJVHlwZXx0eXBlb2YgUHVyZU1vZGVsLCBpZD86IElJZGVudGlmaWVyLCByZW1vdGU/OiBib29sZWFufElSZXF1ZXN0T3B0aW9ucyk7XG4gICAgcHVibGljIHJlbW92ZShtb2RlbDogUHVyZU1vZGVsLCByZW1vdGU/OiBib29sZWFufElSZXF1ZXN0T3B0aW9ucyk7XG4gICAgQGFjdGlvbiBwdWJsaWMgcmVtb3ZlKFxuICAgICAgb2JqOiBJVHlwZXx0eXBlb2YgUHVyZU1vZGVsfFB1cmVNb2RlbCxcbiAgICAgIGlkPzogSUlkZW50aWZpZXJ8Ym9vbGVhbnxJUmVxdWVzdE9wdGlvbnMsXG4gICAgICByZW1vdGU/OiBib29sZWFufElSZXF1ZXN0T3B0aW9ucyxcbiAgICApIHtcbiAgICAgIGNvbnN0IHJlbW92ZSA9ICh0eXBlb2YgaWQgPT09ICdib29sZWFuJyB8fCB0eXBlb2YgaWQgPT09ICdvYmplY3QnKSA/IGlkIDogcmVtb3RlO1xuICAgICAgY29uc3QgbW9kZWxJZCA9ICh0eXBlb2YgaWQgIT09ICdib29sZWFuJyAmJiB0eXBlb2YgaWQgIT09ICdvYmplY3QnKSA/IGlkIDogdW5kZWZpbmVkO1xuICAgICAgY29uc3QgdHlwZSA9IGdldE1vZGVsVHlwZShvYmopO1xuICAgICAgY29uc3QgbW9kZWwgPSB0aGlzLmZpbmQodHlwZSwgbW9kZWxJZCk7XG5cbiAgICAgIGlmIChtb2RlbCAmJiByZW1vdmUpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZU1vZGVsKG1vZGVsLCB0eXBlb2YgcmVtb3ZlID09PSAnb2JqZWN0JyA/IHJlbW92ZSA6IHVuZGVmaW5lZCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICBzdXBlci5yZW1vdmUobW9kZWwpO1xuICAgICAgfVxuICAgICAgY2xlYXJDYWNoZUJ5VHlwZSh0eXBlKTtcblxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIEBhY3Rpb24gcHVibGljIHJlbW92ZUFsbCh0eXBlOiBzdHJpbmcgfCBudW1iZXIgfCB0eXBlb2YgUHVyZU1vZGVsKSB7XG4gICAgICBzdXBlci5yZW1vdmVBbGwodHlwZSk7XG4gICAgICBjbGVhckNhY2hlQnlUeXBlKGdldE1vZGVsVHlwZSh0eXBlKSk7XG4gICAgfVxuXG4gICAgQGFjdGlvbiBwdWJsaWMgcmVzZXQoKSB7XG4gICAgICBzdXBlci5yZXNldCgpO1xuICAgICAgY2xlYXJBbGxDYWNoZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1bmN0aW9uIHVzZWQgdG8gaGFuZGxlIHJlc3BvbnNlIGVycm9yc1xuICAgICAqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcGFyYW0ge1Jlc3BvbnNlfSByZXNwb25zZSBBUEkgcmVzcG9uc2VcbiAgICAgKiBAcmV0dXJucyBBUEkgcmVzcG9uc2VcbiAgICAgKi9cbiAgICBwcml2YXRlIF9faGFuZGxlRXJyb3JzPFQgZXh0ZW5kcyBJSnNvbmFwaU1vZGVsPihyZXNwb25zZTogUmVzcG9uc2U8VD4pIHtcbiAgICAgIGlmIChyZXNwb25zZS5lcnJvcikge1xuICAgICAgICB0aHJvdyByZXNwb25zZS5lcnJvcjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3BvbnNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19hZGRSZWNvcmQ8VCBleHRlbmRzIElKc29uYXBpTW9kZWwgPSBJSnNvbmFwaU1vZGVsPihvYmo6IElSZWNvcmQpOiBUIHtcbiAgICAgIGNvbnN0IHN0YXRpY0NvbGxlY3Rpb24gPSB0aGlzLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBQdXJlQ29sbGVjdGlvbjtcbiAgICAgIGNvbnN0IHt0eXBlLCBpZH0gPSBvYmo7XG4gICAgICBsZXQgcmVjb3JkOiBUfG51bGwgPSB0aGlzLmZpbmQodHlwZSwgaWQpIGFzIFR8bnVsbDtcbiAgICAgIGNvbnN0IGZsYXR0ZW5lZDogSVJhd01vZGVsID0gZmxhdHRlbk1vZGVsKG9iaik7XG5cbiAgICAgIGlmIChyZWNvcmQpIHtcbiAgICAgICAgdXBkYXRlTW9kZWwocmVjb3JkLCBmbGF0dGVuZWQpO1xuICAgICAgfSBlbHNlIGlmIChzdGF0aWNDb2xsZWN0aW9uLnR5cGVzLmZpbHRlcigoaXRlbSkgPT4gaXRlbS50eXBlID09PSB0eXBlKS5sZW5ndGgpIHtcbiAgICAgICAgcmVjb3JkID0gdGhpcy5hZGQ8VD4oZmxhdHRlbmVkLCB0eXBlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlY29yZCA9IHRoaXMuYWRkKG5ldyBHZW5lcmljTW9kZWwoZmxhdHRlbmVkKSkgYXMgVDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlY29yZDtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9fdXBkYXRlUmVsYXRpb25zaGlwcyhvYmo6IElSZWNvcmQpOiB2b2lkIHtcbiAgICAgIGNvbnN0IHJlY29yZDogUHVyZU1vZGVsfG51bGwgPSB0aGlzLmZpbmQob2JqLnR5cGUsIG9iai5pZCk7XG4gICAgICBjb25zdCByZWZzOiBBcnJheTxzdHJpbmc+ID0gb2JqLnJlbGF0aW9uc2hpcHMgPyBPYmplY3Qua2V5cyhvYmoucmVsYXRpb25zaGlwcykgOiBbXTtcbiAgICAgIHJlZnMuZm9yRWFjaCgocmVmOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3QgaXRlbXMgPSAob2JqLnJlbGF0aW9uc2hpcHMgYXMgSURpY3Rpb25hcnk8SVJlbGF0aW9uc2hpcD4pW3JlZl0uZGF0YTtcbiAgICAgICAgaWYgKGl0ZW1zIGluc3RhbmNlb2YgQXJyYXkgJiYgaXRlbXMubGVuZ3RoIDwgMSkge1xuICAgICAgICAgIC8vIGl0J3Mgb25seSBwb3NzaWJsZSB0byB1cGRhdGUgaXRlbXMgd2l0aCBvbmUgb3JlIG1vcmUgcmVmcy4gRWFybHkgZXhpdFxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbXMgJiYgcmVjb3JkKSB7XG4gICAgICAgICAgY29uc3QgbW9kZWxzOiBQdXJlTW9kZWx8QXJyYXk8UHVyZU1vZGVsPnxJSWRlbnRpZmllcnxudWxsID0gbWFwSXRlbXMoXG4gICAgICAgICAgICBpdGVtcyxcbiAgICAgICAgICAgIChkZWY6IElEZWZpbml0aW9uKSA9PiB0aGlzLmZpbmQoZGVmLnR5cGUsIGRlZi5pZCkgfHwgZGVmLmlkLFxuICAgICAgICAgICkgfHwgbnVsbDtcblxuICAgICAgICAgIGNvbnN0IGl0ZW1UeXBlOiBzdHJpbmcgPSBpdGVtcyBpbnN0YW5jZW9mIEFycmF5ID8gaXRlbXNbMF0udHlwZSA6IGl0ZW1zLnR5cGU7XG4gICAgICAgICAgaWYgKHJlZiBpbiByZWNvcmQpIHtcbiAgICAgICAgICAgIHJlY29yZFtyZWZdID0gbW9kZWxzO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbml0TW9kZWxSZWYocmVjb3JkLCByZWYsIHttb2RlbDogaXRlbVR5cGUsIHR5cGU6IFJlZmVyZW5jZVR5cGUuVE9fT05FX09SX01BTll9LCBtb2RlbHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfX2l0ZXJhdGVFbnRyaWVzPFQgZXh0ZW5kcyBJSnNvbmFwaU1vZGVsPihib2R5OiBJUmVzcG9uc2UsIGZuOiAoaXRlbTogSVJlY29yZCkgPT4gVCkge1xuICAgICAgbWFwSXRlbXMoKGJvZHkgJiYgYm9keS5pbmNsdWRlZCkgfHwgW10sIGZuKTtcblxuICAgICAgcmV0dXJuIG1hcEl0ZW1zKChib2R5ICYmIGJvZHkuZGF0YSkgfHwgW10sIGZuKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9fcHJlcGFyZVF1ZXJ5KFxuICAgICAgdHlwZTogSVR5cGUsXG4gICAgICBpZD86IG51bWJlcnxzdHJpbmcsXG4gICAgICBkYXRhPzogSVJlcXVlc3QsXG4gICAgICBvcHRpb25zPzogSVJlcXVlc3RPcHRpb25zLFxuICAgICk6IHtcbiAgICAgIHVybDogc3RyaW5nO1xuICAgICAgZGF0YT86IG9iamVjdDtcbiAgICAgIGhlYWRlcnM6IElIZWFkZXJzO1xuICAgIH0ge1xuICAgICAgY29uc3Qgc3RhdGljQ29sbGVjdGlvbiA9IHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFB1cmVDb2xsZWN0aW9uO1xuICAgICAgY29uc3QgbW9kZWw6IFB1cmVNb2RlbCA9IHN0YXRpY0NvbGxlY3Rpb24udHlwZXMuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnR5cGUgPT09IHR5cGUpWzBdO1xuICAgICAgY29uc3QgcGF0aDogc3RyaW5nID0gbW9kZWxcbiAgICAgICAgPyAoZ2V0VmFsdWU8c3RyaW5nPihtb2RlbFsnZW5kcG9pbnQnXSkgfHwgbW9kZWxbJ2Jhc2VVcmwnXSB8fCBnZXRNb2RlbFR5cGUobW9kZWwpKVxuICAgICAgICA6IHR5cGU7XG5cbiAgICAgIGNvbnN0IHVybDogc3RyaW5nID0gaWQgPyBgJHtwYXRofS8ke2lkfWAgOiBgJHtwYXRofWA7XG5cbiAgICAgIHJldHVybiB0aGlzLl9fYnVpbGRVcmwodXJsLCBkYXRhLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9fYnVpbGRVcmwodXJsOiBzdHJpbmcsIGRhdGE/OiBJUmVxdWVzdCwgb3B0aW9ucz86IElSZXF1ZXN0T3B0aW9ucykge1xuICAgICAgY29uc3QgaGVhZGVyczogSURpY3Rpb25hcnk8c3RyaW5nPiA9IChvcHRpb25zICYmIG9wdGlvbnMuaGVhZGVycykgfHwge307XG5cbiAgICAgIGNvbnN0IHBhcmFtczogQXJyYXk8c3RyaW5nPiA9IFtcbiAgICAgICAgLi4udGhpcy5fX3ByZXBhcmVGaWx0ZXJzKChvcHRpb25zICYmIG9wdGlvbnMuZmlsdGVyKSB8fCB7fSksXG4gICAgICAgIC4uLnRoaXMuX19wcmVwYXJlU29ydChvcHRpb25zICYmIG9wdGlvbnMuc29ydCksXG4gICAgICAgIC4uLnRoaXMuX19wcmVwYXJlSW5jbHVkZXMob3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGUpLFxuICAgICAgICAuLi50aGlzLl9fcHJlcGFyZUZpZWxkcygob3B0aW9ucyAmJiBvcHRpb25zLmZpZWxkcykgfHwge30pLFxuICAgICAgICAuLi50aGlzLl9fcHJlcGFyZVJhd1BhcmFtcygob3B0aW9ucyAmJiBvcHRpb25zLnBhcmFtcykgfHwgW10pLFxuICAgICAgXTtcblxuICAgICAgY29uc3QgYmFzZVVybDogc3RyaW5nID0gdGhpcy5fX2FwcGVuZFBhcmFtcyh0aGlzLl9fcHJlZml4VXJsKHVybCksIHBhcmFtcyk7XG5cbiAgICAgIHJldHVybiB7ZGF0YSwgaGVhZGVycywgdXJsOiBiYXNlVXJsfTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9fcHJlcGFyZUZpbHRlcnMoZmlsdGVyczogSUZpbHRlcnMpOiBBcnJheTxzdHJpbmc+IHtcbiAgICAgIHJldHVybiB0aGlzLl9fcGFyYW1ldHJpemUoZmlsdGVycykubWFwKChpdGVtKSA9PiBgZmlsdGVyWyR7aXRlbS5rZXl9XT0ke2l0ZW0udmFsdWV9YCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfX3ByZXBhcmVTb3J0KHNvcnQ/OiBzdHJpbmd8QXJyYXk8c3RyaW5nPik6IEFycmF5PHN0cmluZz4ge1xuICAgICAgcmV0dXJuIHNvcnQgPyBbYHNvcnQ9JHtzb3J0fWBdIDogW107XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfX3ByZXBhcmVJbmNsdWRlcyhpbmNsdWRlPzogc3RyaW5nfEFycmF5PHN0cmluZz4pOiBBcnJheTxzdHJpbmc+IHtcbiAgICAgIHJldHVybiBpbmNsdWRlID8gW2BpbmNsdWRlPSR7aW5jbHVkZX1gXSA6IFtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19wcmVwYXJlRmllbGRzKGZpZWxkczogSURpY3Rpb25hcnk8c3RyaW5nfEFycmF5PHN0cmluZz4+KTogQXJyYXk8c3RyaW5nPiB7XG4gICAgICBjb25zdCBsaXN0OiBBcnJheTxzdHJpbmc+ID0gW107XG5cbiAgICAgIE9iamVjdC5rZXlzKGZpZWxkcykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgIGxpc3QucHVzaChgZmllbGRzWyR7a2V5fV09JHtmaWVsZHNba2V5XX1gKTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gbGlzdDtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9fcHJlcGFyZVJhd1BhcmFtcyhwYXJhbXM6IEFycmF5PHtrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZ318c3RyaW5nPik6IEFycmF5PHN0cmluZz4ge1xuICAgICAgcmV0dXJuIHBhcmFtcy5tYXAoKHBhcmFtKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgcGFyYW0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmV0dXJuIHBhcmFtO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGAke3BhcmFtLmtleX09JHtwYXJhbS52YWx1ZX1gO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfX3ByZWZpeFVybCh1cmwpIHtcbiAgICAgIGlmIChVUkxfUkVHRVgudGVzdCh1cmwpKSB7XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBgJHtjb25maWcuYmFzZVVybH0ke3VybH1gO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19hcHBlbmRQYXJhbXModXJsOiBzdHJpbmcsIHBhcmFtczogQXJyYXk8c3RyaW5nPik6IHN0cmluZyB7XG4gICAgICBsZXQgbmV3VXJsID0gdXJsO1xuICAgICAgaWYgKHBhcmFtcy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3Qgc2VwYXJhdG9yID0gbmV3VXJsLmluZGV4T2YoJz8nKSA9PT0gLTEgPyAnPycgOiAnJic7XG4gICAgICAgIG5ld1VybCArPSBzZXBhcmF0b3IgKyBwYXJhbXMuam9pbignJicpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbmV3VXJsO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19wYXJhbWV0cml6ZShwYXJhbXM6IG9iamVjdCwgc2NvcGU6IHN0cmluZyA9ICcnKSB7XG4gICAgICBjb25zdCBsaXN0OiBBcnJheTx7a2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmd9PiA9IFtdO1xuXG4gICAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBpZiAocGFyYW1zW2tleV0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgIGlmIChjb25maWcucGFyYW1BcnJheVR5cGUgPT09IFBhcmFtQXJyYXlUeXBlLk9CSkVDVF9QQVRIKSB7XG4gICAgICAgICAgICBsaXN0LnB1c2goLi4udGhpcy5fX3BhcmFtZXRyaXplKHBhcmFtc1trZXldLCBgJHtrZXl9LmApKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5wYXJhbUFycmF5VHlwZSA9PT0gUGFyYW1BcnJheVR5cGUuQ09NTUFfU0VQQVJBVEVEKSB7XG4gICAgICAgICAgICBsaXN0LnB1c2goe2tleTogYCR7c2NvcGV9JHtrZXl9YCwgdmFsdWU6IHBhcmFtc1trZXldLmpvaW4oJywnKX0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnBhcmFtQXJyYXlUeXBlID09PSBQYXJhbUFycmF5VHlwZS5NVUxUSVBMRV9QQVJBTVMpIHtcbiAgICAgICAgICAgIGxpc3QucHVzaCguLi5wYXJhbXNba2V5XS5tYXAoKHBhcmFtKSA9PiAoe2tleTogYCR7c2NvcGV9JHtrZXl9YCwgdmFsdWU6IHBhcmFtfSkpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5wYXJhbUFycmF5VHlwZSA9PT0gUGFyYW1BcnJheVR5cGUuUEFSQU1fQVJSQVkpIHtcbiAgICAgICAgICAgIGxpc3QucHVzaCguLi5wYXJhbXNba2V5XS5tYXAoKHBhcmFtKSA9PiAoe2tleTogYCR7c2NvcGV9JHtrZXl9XVtgLCB2YWx1ZTogcGFyYW19KSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcGFyYW1zW2tleV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgbGlzdC5wdXNoKC4uLnRoaXMuX19wYXJhbWV0cml6ZShwYXJhbXNba2V5XSwgYCR7a2V5fS5gKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGlzdC5wdXNoKHtrZXk6IGAke3Njb3BlfSR7a2V5fWAsIHZhbHVlOiBwYXJhbXNba2V5XX0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIEpzb25hcGlDb2xsZWN0aW9uIGFzIElDb2xsZWN0aW9uQ29uc3RydWN0b3I8UHVyZUNvbGxlY3Rpb24gJiBJSnNvbmFwaUNvbGxlY3Rpb24+O1xufVxuIl19","dts":{"name":"/Users/darko/Projects/mobx/datx/packages/datx-jsonapi/decorateCollection.d.ts","text":"import { ICollectionConstructor, PureCollection } from 'datx';\r\nimport { IJsonapiCollection } from './interfaces/IJsonapiCollection';\r\nexport declare function decorateCollection(BaseClass: typeof PureCollection): ICollectionConstructor<PureCollection & IJsonapiCollection>;\r\n"}}
