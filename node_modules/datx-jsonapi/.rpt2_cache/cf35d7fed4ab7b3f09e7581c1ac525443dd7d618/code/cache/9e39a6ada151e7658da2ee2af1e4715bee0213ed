{"code":"import * as tslib_1 from \"tslib\";\r\nimport { flattenModel, removeModel, saveModel } from './helpers/model';\r\nexport function decorateModel(BaseClass) {\r\n    var JsonapiModel = /** @class */ (function (_super) {\r\n        tslib_1.__extends(JsonapiModel, _super);\r\n        function JsonapiModel(rawData, collection) {\r\n            if (rawData === void 0) { rawData = {}; }\r\n            var _this = this;\r\n            var data = rawData;\r\n            if ('type' in rawData && ('attributes' in rawData || 'relationships' in rawData)) {\r\n                data = flattenModel(rawData);\r\n            }\r\n            _this = _super.call(this, data, collection) || this;\r\n            return _this;\r\n        }\r\n        JsonapiModel.prototype.save = function (options) {\r\n            return saveModel(this, options);\r\n        };\r\n        JsonapiModel.prototype.destroy = function (options) {\r\n            return removeModel(this, options);\r\n        };\r\n        /**\r\n         * Should the autogenerated ID be sent to the server when creating a record\r\n         *\r\n         * @static\r\n         * @type {boolean}\r\n         * @memberOf Record\r\n         */\r\n        JsonapiModel.useAutogeneratedIds = BaseClass['useAutogeneratedIds'] || false;\r\n        return JsonapiModel;\r\n    }(BaseClass));\r\n    return JsonapiModel;\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjb3JhdGVNb2RlbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy9kZWNvcmF0ZU1vZGVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFHQSxPQUFPLEVBQUMsWUFBWSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUlyRSxNQUFNLHdCQUF3QixTQUEyQjtJQUV2RDtRQUEyQix3Q0FBUztRQW9CbEMsc0JBQVksT0FBK0IsRUFBRSxVQUEyQjtZQUE1RCx3QkFBQSxFQUFBLFlBQStCO1lBQTNDLGlCQU1DO1lBTEMsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDO1lBQ25CLElBQUksTUFBTSxJQUFJLE9BQU8sSUFBSSxDQUFDLFlBQVksSUFBSSxPQUFPLElBQUksZUFBZSxJQUFJLE9BQU8sQ0FBQyxFQUFFO2dCQUNoRixJQUFJLEdBQUcsWUFBWSxDQUFDLE9BQWtCLENBQUMsQ0FBQzthQUN6QztZQUNELFFBQUEsa0JBQU0sSUFBSSxFQUFFLFVBQVUsQ0FBQyxTQUFDOztRQUMxQixDQUFDO1FBRU0sMkJBQUksR0FBWCxVQUFZLE9BQXlCO1lBQ25DLE9BQU8sU0FBUyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztRQUNsQyxDQUFDO1FBRU0sOEJBQU8sR0FBZCxVQUFlLE9BQXlCO1lBQ3RDLE9BQU8sV0FBVyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztRQUNwQyxDQUFDO1FBaENEOzs7Ozs7V0FNRztRQUNXLGdDQUFtQixHQUFZLFNBQVMsQ0FBQyxxQkFBcUIsQ0FBQyxJQUFJLEtBQUssQ0FBQztRQTBCekYsbUJBQUM7S0FBQSxBQW5DRCxDQUEyQixTQUFTLEdBbUNuQztJQUVELE9BQU8sWUFBZ0MsQ0FBQztBQUMxQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtQdXJlQ29sbGVjdGlvbiwgUHVyZU1vZGVsfSBmcm9tICdkYXR4JztcbmltcG9ydCB7SVJhd01vZGVsfSBmcm9tICdkYXR4LXV0aWxzJztcblxuaW1wb3J0IHtmbGF0dGVuTW9kZWwsIHJlbW92ZU1vZGVsLCBzYXZlTW9kZWx9IGZyb20gJy4vaGVscGVycy9tb2RlbCc7XG5pbXBvcnQge0lSZXF1ZXN0T3B0aW9uc30gZnJvbSAnLi9pbnRlcmZhY2VzL0lSZXF1ZXN0T3B0aW9ucyc7XG5pbXBvcnQge0lSZWNvcmR9IGZyb20gJy4vaW50ZXJmYWNlcy9Kc29uQXBpJztcblxuZXhwb3J0IGZ1bmN0aW9uIGRlY29yYXRlTW9kZWwoQmFzZUNsYXNzOiB0eXBlb2YgUHVyZU1vZGVsKSB7XG5cbiAgY2xhc3MgSnNvbmFwaU1vZGVsIGV4dGVuZHMgQmFzZUNsYXNzIHtcblxuICAgIC8qKlxuICAgICAqIFNob3VsZCB0aGUgYXV0b2dlbmVyYXRlZCBJRCBiZSBzZW50IHRvIHRoZSBzZXJ2ZXIgd2hlbiBjcmVhdGluZyBhIHJlY29yZFxuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqIEBtZW1iZXJPZiBSZWNvcmRcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIHVzZUF1dG9nZW5lcmF0ZWRJZHM6IGJvb2xlYW4gPSBCYXNlQ2xhc3NbJ3VzZUF1dG9nZW5lcmF0ZWRJZHMnXSB8fCBmYWxzZTtcblxuICAgIC8qKlxuICAgICAqIEVuZHBvaW50IGZvciBBUEkgcmVxdWVzdHMgaWYgdGhlcmUgaXMgbm8gc2VsZiBsaW5rXG4gICAgICpcbiAgICAgKiBAc3RhdGljXG4gICAgICogQHR5cGUge3N0cmluZ3woKSA9PiBzdHJpbmd9XG4gICAgICogQG1lbWJlck9mIFJlY29yZFxuICAgICAqL1xuICAgIHB1YmxpYyBzdGF0aWMgZW5kcG9pbnQ6IHN0cmluZ3woKCkgPT4gc3RyaW5nKTtcblxuICAgIGNvbnN0cnVjdG9yKHJhd0RhdGE6IElSYXdNb2RlbHxJUmVjb3JkID0ge30sIGNvbGxlY3Rpb24/OiBQdXJlQ29sbGVjdGlvbikge1xuICAgICAgbGV0IGRhdGEgPSByYXdEYXRhO1xuICAgICAgaWYgKCd0eXBlJyBpbiByYXdEYXRhICYmICgnYXR0cmlidXRlcycgaW4gcmF3RGF0YSB8fCAncmVsYXRpb25zaGlwcycgaW4gcmF3RGF0YSkpIHtcbiAgICAgICAgZGF0YSA9IGZsYXR0ZW5Nb2RlbChyYXdEYXRhIGFzIElSZWNvcmQpO1xuICAgICAgfVxuICAgICAgc3VwZXIoZGF0YSwgY29sbGVjdGlvbik7XG4gICAgfVxuXG4gICAgcHVibGljIHNhdmUob3B0aW9ucz86IElSZXF1ZXN0T3B0aW9ucykge1xuICAgICAgcmV0dXJuIHNhdmVNb2RlbCh0aGlzLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGVzdHJveShvcHRpb25zPzogSVJlcXVlc3RPcHRpb25zKSB7XG4gICAgICByZXR1cm4gcmVtb3ZlTW9kZWwodGhpcywgb3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIEpzb25hcGlNb2RlbCBhcyB0eXBlb2YgUHVyZU1vZGVsO1xufVxuIl19","map":{"mappings":""},"dts":{"name":"/Users/darko/Projects/mobx/datx/packages/datx-jsonapi/decorateModel.d.ts","text":"import { PureModel } from 'datx';\r\nexport declare function decorateModel(BaseClass: typeof PureModel): typeof PureModel;\r\n"}}
