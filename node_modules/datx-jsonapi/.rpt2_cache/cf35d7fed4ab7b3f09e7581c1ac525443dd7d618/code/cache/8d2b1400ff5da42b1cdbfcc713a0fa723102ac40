{"code":"import { getModelType } from 'datx';\r\nvar cacheStorage = [];\r\nexport function saveCache(url, response, modelType) {\r\n    if ('data' in response && (!('error' in response) || !response.error) && response.data) {\r\n        // The type might need to be 100% correct - used only to clear the cache\r\n        var type = modelType || getModelType(response.data instanceof Array ? response.data[0] : response.data);\r\n        cacheStorage.push({ response: response, time: new Date(), type: type, url: url });\r\n    }\r\n}\r\nexport function getCache(url) {\r\n    return cacheStorage.find(function (item) { return item.url === url; });\r\n}\r\nexport function clearAllCache() {\r\n    cacheStorage.length = 0;\r\n}\r\nexport function clearCacheByType(type) {\r\n    cacheStorage = cacheStorage.filter(function (item) { return item.type !== type; });\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FjaGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJzcmMvY2FjaGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFDLFlBQVksRUFBUSxNQUFNLE1BQU0sQ0FBQztBQWF6QyxJQUFJLFlBQVksR0FBa0IsRUFBRSxDQUFDO0FBRXJDLE1BQU0sb0JBQW9CLEdBQVcsRUFBRSxRQUFpQyxFQUFFLFNBQWtCO0lBQzFGLElBQUksTUFBTSxJQUFJLFFBQVEsSUFBSSxDQUFDLENBQUMsQ0FBQyxPQUFPLElBQUksUUFBUSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLElBQUksUUFBUSxDQUFDLElBQUksRUFBRTtRQUV0Rix3RUFBd0U7UUFDeEUsSUFBTSxJQUFJLEdBQUcsU0FBUyxJQUFJLFlBQVksQ0FBQyxRQUFRLENBQUMsSUFBSSxZQUFZLEtBQUssQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFHLFlBQVksQ0FBQyxJQUFJLENBQUMsRUFBQyxRQUFRLFVBQUEsRUFBRSxJQUFJLEVBQUUsSUFBSSxJQUFJLEVBQUUsRUFBRSxJQUFJLE1BQUEsRUFBRSxHQUFHLEtBQUEsRUFBQyxDQUFDLENBQUM7S0FDNUQ7QUFDSCxDQUFDO0FBRUQsTUFBTSxtQkFBbUIsR0FBVztJQUNsQyxPQUFPLFlBQVksQ0FBQyxJQUFJLENBQUMsVUFBQyxJQUFJLElBQUssT0FBQSxJQUFJLENBQUMsR0FBRyxLQUFLLEdBQUcsRUFBaEIsQ0FBZ0IsQ0FBQyxDQUFDO0FBQ3ZELENBQUM7QUFFRCxNQUFNO0lBQ0osWUFBWSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUM7QUFDMUIsQ0FBQztBQUVELE1BQU0sMkJBQTJCLElBQVc7SUFDMUMsWUFBWSxHQUFHLFlBQVksQ0FBQyxNQUFNLENBQUMsVUFBQyxJQUFJLElBQUssT0FBQSxJQUFJLENBQUMsSUFBSSxLQUFLLElBQUksRUFBbEIsQ0FBa0IsQ0FBQyxDQUFDO0FBQ25FLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2dldE1vZGVsVHlwZSwgSVR5cGV9IGZyb20gJ2RhdHgnO1xuaW1wb3J0IHtJRGljdGlvbmFyeX0gZnJvbSAnZGF0eC11dGlscyc7XG5cbmltcG9ydCB7SUpzb25hcGlNb2RlbH0gZnJvbSAnLi9pbnRlcmZhY2VzL0lKc29uYXBpTW9kZWwnO1xuaW1wb3J0IHtSZXNwb25zZX0gZnJvbSAnLi9SZXNwb25zZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNhY2hlIHtcbiAgcmVzcG9uc2U6IFJlc3BvbnNlPElKc29uYXBpTW9kZWw+O1xuICB0aW1lOiBEYXRlLFxuICB0eXBlOiBJVHlwZTtcbiAgdXJsOiBzdHJpbmc7XG59XG5cbmxldCBjYWNoZVN0b3JhZ2U6IEFycmF5PElDYWNoZT4gPSBbXTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVDYWNoZSh1cmw6IHN0cmluZywgcmVzcG9uc2U6IFJlc3BvbnNlPElKc29uYXBpTW9kZWw+LCBtb2RlbFR5cGU/OiBzdHJpbmcpIHtcbiAgaWYgKCdkYXRhJyBpbiByZXNwb25zZSAmJiAoISgnZXJyb3InIGluIHJlc3BvbnNlKSB8fCAhcmVzcG9uc2UuZXJyb3IpICYmIHJlc3BvbnNlLmRhdGEpIHtcblxuICAgIC8vIFRoZSB0eXBlIG1pZ2h0IG5lZWQgdG8gYmUgMTAwJSBjb3JyZWN0IC0gdXNlZCBvbmx5IHRvIGNsZWFyIHRoZSBjYWNoZVxuICAgIGNvbnN0IHR5cGUgPSBtb2RlbFR5cGUgfHwgZ2V0TW9kZWxUeXBlKHJlc3BvbnNlLmRhdGEgaW5zdGFuY2VvZiBBcnJheSA/IHJlc3BvbnNlLmRhdGFbMF0gOiByZXNwb25zZS5kYXRhKTtcbiAgICBjYWNoZVN0b3JhZ2UucHVzaCh7cmVzcG9uc2UsIHRpbWU6IG5ldyBEYXRlKCksIHR5cGUsIHVybH0pO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRDYWNoZSh1cmw6IHN0cmluZyk6IElDYWNoZXx1bmRlZmluZWQge1xuICByZXR1cm4gY2FjaGVTdG9yYWdlLmZpbmQoKGl0ZW0pID0+IGl0ZW0udXJsID09PSB1cmwpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBbGxDYWNoZSgpIHtcbiAgY2FjaGVTdG9yYWdlLmxlbmd0aCA9IDA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckNhY2hlQnlUeXBlKHR5cGU6IElUeXBlKSB7XG4gIGNhY2hlU3RvcmFnZSA9IGNhY2hlU3RvcmFnZS5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSAhPT0gdHlwZSk7XG59XG4iXX0=","map":{"mappings":""},"dts":{"name":"/Users/darko/Projects/mobx/datx/packages/datx-jsonapi/cache.d.ts","text":"import { IType } from 'datx';\r\nimport { IJsonapiModel } from './interfaces/IJsonapiModel';\r\nimport { Response } from './Response';\r\nexport interface ICache {\r\n    response: Response<IJsonapiModel>;\r\n    time: Date;\r\n    type: IType;\r\n    url: string;\r\n}\r\nexport declare function saveCache(url: string, response: Response<IJsonapiModel>, modelType?: string): void;\r\nexport declare function getCache(url: string): ICache | undefined;\r\nexport declare function clearAllCache(): void;\r\nexport declare function clearCacheByType(type: IType): void;\r\n"}}
