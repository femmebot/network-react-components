{"code":"import * as tslib_1 from \"tslib\";\r\nimport { getModelType, initModelRef, ReferenceType, updateModel, } from 'datx';\r\nimport { mapItems } from 'datx-utils';\r\nimport { action } from 'mobx';\r\nimport { clearAllCache, clearCacheByType } from './cache';\r\nimport { URL_REGEX } from './consts';\r\nimport { ParamArrayType } from './enums/ParamArrayType';\r\nimport { GenericModel } from './GenericModel';\r\nimport { flattenModel, removeModel } from './helpers/model';\r\nimport { getValue } from './helpers/utils';\r\nimport { config, fetch, read } from './NetworkUtils';\r\nexport function decorateCollection(BaseClass) {\r\n    var JsonapiCollection = /** @class */ (function (_super) {\r\n        tslib_1.__extends(JsonapiCollection, _super);\r\n        function JsonapiCollection() {\r\n            return _super !== null && _super.apply(this, arguments) || this;\r\n        }\r\n        JsonapiCollection.prototype.sync = function (body) {\r\n            var _this = this;\r\n            if (!body) {\r\n                return null;\r\n            }\r\n            var data = this.__iterateEntries(body, function (obj) { return _this.__addRecord(obj); });\r\n            this.__iterateEntries(body, this.__updateRelationships.bind(this));\r\n            return data;\r\n        };\r\n        /**\r\n         * Fetch the records with the given type and id\r\n         *\r\n         * @param {string} type Record type\r\n         * @param {number|string} type Record id\r\n         * @param {IRequestOptions} [options] Server options\r\n         * @returns {Promise<Response>} Resolves with the Response object or rejects with an error\r\n         */\r\n        JsonapiCollection.prototype.fetch = function (type, id, options) {\r\n            var _this = this;\r\n            var modelType = getModelType(type);\r\n            var query = this.__prepareQuery(modelType, id, undefined, options);\r\n            return read(query.url, this, query.headers, options)\r\n                .then(function (res) { return _this.__handleErrors(res); });\r\n        };\r\n        /**\r\n         * Fetch the first page of records of the given type\r\n         *\r\n         * @param {string} type Record type\r\n         * @param {IRequestOptions} [options] Server options\r\n         * @returns {Promise<Response>} Resolves with the Response object or rejects with an error\r\n         */\r\n        JsonapiCollection.prototype.fetchAll = function (type, options) {\r\n            var _this = this;\r\n            var modelType = getModelType(type);\r\n            var query = this.__prepareQuery(modelType, undefined, undefined, options);\r\n            return read(query.url, this, query.headers, options)\r\n                .then(function (res) { return _this.__handleErrors(res); });\r\n        };\r\n        JsonapiCollection.prototype.request = function (url, method, data, options) {\r\n            if (method === void 0) { method = 'GET'; }\r\n            var query = this.__buildUrl(url, data, options);\r\n            return fetch({ url: query.url, options: options, data: data, method: method, collection: this });\r\n        };\r\n        JsonapiCollection.prototype.remove = function (obj, id, remote) {\r\n            var remove = (typeof id === 'boolean' || typeof id === 'object') ? id : remote;\r\n            var modelId = (typeof id !== 'boolean' && typeof id !== 'object') ? id : undefined;\r\n            var type = getModelType(obj);\r\n            var model = this.find(type, modelId);\r\n            if (model && remove) {\r\n                return removeModel(model, typeof remove === 'object' ? remove : undefined);\r\n            }\r\n            if (model) {\r\n                _super.prototype.remove.call(this, model);\r\n            }\r\n            clearCacheByType(type);\r\n            return Promise.resolve();\r\n        };\r\n        JsonapiCollection.prototype.removeAll = function (type) {\r\n            _super.prototype.removeAll.call(this, type);\r\n            clearCacheByType(getModelType(type));\r\n        };\r\n        JsonapiCollection.prototype.reset = function () {\r\n            _super.prototype.reset.call(this);\r\n            clearAllCache();\r\n        };\r\n        /**\r\n         * Function used to handle response errors\r\n         *\r\n         * @private\r\n         * @param {Response} response API response\r\n         * @returns API response\r\n         */\r\n        JsonapiCollection.prototype.__handleErrors = function (response) {\r\n            if (response.error) {\r\n                throw response.error;\r\n            }\r\n            return response;\r\n        };\r\n        JsonapiCollection.prototype.__addRecord = function (obj) {\r\n            var staticCollection = this.constructor;\r\n            var type = obj.type, id = obj.id;\r\n            var record = this.find(type, id);\r\n            var flattened = flattenModel(obj);\r\n            if (record) {\r\n                updateModel(record, flattened);\r\n            }\r\n            else if (staticCollection.types.filter(function (item) { return item.type === type; }).length) {\r\n                record = this.add(flattened, type);\r\n            }\r\n            else {\r\n                record = this.add(new GenericModel(flattened));\r\n            }\r\n            return record;\r\n        };\r\n        JsonapiCollection.prototype.__updateRelationships = function (obj) {\r\n            var _this = this;\r\n            var record = this.find(obj.type, obj.id);\r\n            var refs = obj.relationships ? Object.keys(obj.relationships) : [];\r\n            refs.forEach(function (ref) {\r\n                var items = obj.relationships[ref].data;\r\n                if (items instanceof Array && items.length < 1) {\r\n                    // it's only possible to update items with one ore more refs. Early exit\r\n                    return;\r\n                }\r\n                if (items && record) {\r\n                    var models = mapItems(items, function (def) { return _this.find(def.type, def.id) || def.id; }) || null;\r\n                    var itemType = items instanceof Array ? items[0].type : items.type;\r\n                    if (ref in record) {\r\n                        record[ref] = models;\r\n                    }\r\n                    else {\r\n                        initModelRef(record, ref, { model: itemType, type: ReferenceType.TO_ONE_OR_MANY }, models);\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        JsonapiCollection.prototype.__iterateEntries = function (body, fn) {\r\n            mapItems((body && body.included) || [], fn);\r\n            return mapItems((body && body.data) || [], fn);\r\n        };\r\n        JsonapiCollection.prototype.__prepareQuery = function (type, id, data, options) {\r\n            var staticCollection = this.constructor;\r\n            var model = staticCollection.types.filter(function (item) { return item.type === type; })[0];\r\n            var path = model\r\n                ? (getValue(model['endpoint']) || model['baseUrl'] || getModelType(model))\r\n                : type;\r\n            var url = id ? path + \"/\" + id : \"\" + path;\r\n            return this.__buildUrl(url, data, options);\r\n        };\r\n        JsonapiCollection.prototype.__buildUrl = function (url, data, options) {\r\n            var headers = (options && options.headers) || {};\r\n            var params = this.__prepareFilters((options && options.filter) || {}).concat(this.__prepareSort(options && options.sort), this.__prepareIncludes(options && options.include), this.__prepareFields((options && options.fields) || {}), this.__prepareRawParams((options && options.params) || []));\r\n            var baseUrl = this.__appendParams(this.__prefixUrl(url), params);\r\n            return { data: data, headers: headers, url: baseUrl };\r\n        };\r\n        JsonapiCollection.prototype.__prepareFilters = function (filters) {\r\n            return this.__parametrize(filters).map(function (item) { return \"filter[\" + item.key + \"]=\" + item.value; });\r\n        };\r\n        JsonapiCollection.prototype.__prepareSort = function (sort) {\r\n            return sort ? [\"sort=\" + sort] : [];\r\n        };\r\n        JsonapiCollection.prototype.__prepareIncludes = function (include) {\r\n            return include ? [\"include=\" + include] : [];\r\n        };\r\n        JsonapiCollection.prototype.__prepareFields = function (fields) {\r\n            var list = [];\r\n            Object.keys(fields).forEach(function (key) {\r\n                list.push(\"fields[\" + key + \"]=\" + fields[key]);\r\n            });\r\n            return list;\r\n        };\r\n        JsonapiCollection.prototype.__prepareRawParams = function (params) {\r\n            return params.map(function (param) {\r\n                if (typeof param === 'string') {\r\n                    return param;\r\n                }\r\n                return param.key + \"=\" + param.value;\r\n            });\r\n        };\r\n        JsonapiCollection.prototype.__prefixUrl = function (url) {\r\n            if (URL_REGEX.test(url)) {\r\n                return url;\r\n            }\r\n            return \"\" + config.baseUrl + url;\r\n        };\r\n        JsonapiCollection.prototype.__appendParams = function (url, params) {\r\n            if (params.length) {\r\n                var separator = url.indexOf('?') === -1 ? '?' : '&';\r\n                url += separator + params.join('&');\r\n            }\r\n            return url;\r\n        };\r\n        JsonapiCollection.prototype.__parametrize = function (params, scope) {\r\n            var _this = this;\r\n            if (scope === void 0) { scope = ''; }\r\n            var list = [];\r\n            Object.keys(params).forEach(function (key) {\r\n                if (params[key] instanceof Array) {\r\n                    if (config.paramArrayType === ParamArrayType.OBJECT_PATH) {\r\n                        list.push.apply(list, _this.__parametrize(params[key], key + \".\"));\r\n                    }\r\n                    else if (config.paramArrayType === ParamArrayType.COMMA_SEPARATED) {\r\n                        list.push({ key: \"\" + scope + key, value: params[key].join(',') });\r\n                    }\r\n                    else if (config.paramArrayType === ParamArrayType.MULTIPLE_PARAMS) {\r\n                        list.push.apply(list, params[key].map(function (param) { return ({ key: \"\" + scope + key, value: param }); }));\r\n                    }\r\n                    else if (config.paramArrayType === ParamArrayType.PARAM_ARRAY) {\r\n                        list.push.apply(list, params[key].map(function (param) { return ({ key: \"\" + scope + key + \"][\", value: param }); }));\r\n                    }\r\n                }\r\n                else if (typeof params[key] === 'object') {\r\n                    list.push.apply(list, _this.__parametrize(params[key], key + \".\"));\r\n                }\r\n                else {\r\n                    list.push({ key: \"\" + scope + key, value: params[key] });\r\n                }\r\n            });\r\n            return list;\r\n        };\r\n        JsonapiCollection.types = (BaseClass.types && BaseClass.types.length)\r\n            ? BaseClass.types.concat(GenericModel)\r\n            : [GenericModel];\r\n        JsonapiCollection.cache = BaseClass['cache'] === undefined\r\n            ? typeof window !== 'undefined'\r\n            : BaseClass['cache'];\r\n        JsonapiCollection.defaultModel = BaseClass['defaultModel'] || GenericModel;\r\n        tslib_1.__decorate([\r\n            action\r\n        ], JsonapiCollection.prototype, \"sync\", null);\r\n        tslib_1.__decorate([\r\n            action\r\n        ], JsonapiCollection.prototype, \"remove\", null);\r\n        tslib_1.__decorate([\r\n            action\r\n        ], JsonapiCollection.prototype, \"removeAll\", null);\r\n        tslib_1.__decorate([\r\n            action\r\n        ], JsonapiCollection.prototype, \"reset\", null);\r\n        return JsonapiCollection;\r\n    }(BaseClass));\r\n    return JsonapiCollection;\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjb3JhdGVDb2xsZWN0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic3JjL2RlY29yYXRlQ29sbGVjdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUNMLFlBQVksRUFJWixZQUFZLEVBSVosYUFBYSxFQUNiLFdBQVcsR0FDWixNQUFNLE1BQU0sQ0FBQztBQUNkLE9BQU8sRUFBeUIsUUFBUSxFQUFDLE1BQU0sWUFBWSxDQUFDO0FBQzVELE9BQU8sRUFBQyxNQUFNLEVBQUMsTUFBTSxNQUFNLENBQUM7QUFFNUIsT0FBTyxFQUFDLGFBQWEsRUFBRSxnQkFBZ0IsRUFBQyxNQUFNLFNBQVMsQ0FBQztBQUN4RCxPQUFPLEVBQUMsU0FBUyxFQUFDLE1BQU0sVUFBVSxDQUFDO0FBQ25DLE9BQU8sRUFBQyxjQUFjLEVBQUMsTUFBTSx3QkFBd0IsQ0FBQztBQUN0RCxPQUFPLEVBQUMsWUFBWSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFDNUMsT0FBTyxFQUFDLFlBQVksRUFBRSxXQUFXLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUMxRCxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFRekMsT0FBTyxFQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFLbkQsTUFBTSw2QkFBNkIsU0FBZ0M7SUFFakU7UUFBZ0MsNkNBQVM7UUFBekM7O1FBMFFBLENBQUM7UUE5UGdCLGdDQUFJLEdBQVgsVUFBcUQsSUFBZ0I7WUFBN0UsaUJBT0M7WUFOQyxJQUFJLENBQUMsSUFBSSxFQUFFO2dCQUNULE9BQU8sSUFBSSxDQUFDO2FBQ2I7WUFDRCxJQUFNLElBQUksR0FBb0IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksRUFBRSxVQUFDLEdBQVksSUFBSyxPQUFBLEtBQUksQ0FBQyxXQUFXLENBQUksR0FBRyxDQUFDLEVBQXhCLENBQXdCLENBQUMsQ0FBQztZQUN0RyxJ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QyxDQUFDLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUVMLHVCQUFLLEdBQVksU0FBUyxDQUFDLE9BQU8sQ0FBQyxLQUFLLFNBQVM7WUFDN0QsQ0FBQyxDQUFDLE9BQU8sTUFBTSxLQUFLLFdBQVc7WUFDL0IsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUVULDhCQUFZLEdBQUcsU0FBUyxDQUFDLGNBQWMsQ0FBQyxJQUFJLFlBQVksQ0FBQztRQUUvRDtZQUFQLE1BQU07cURBT047UUFrRE87WUFBUCxNQUFNO3VEQW1CTjtRQUVPO1lBQVAsTUFBTTswREFHTjtRQUVPO1lBQVAsTUFBTTtzREFHTjtRQXdLSCx3QkFBQztLQUFBLEFBMVFELENBQWdDLFNBQVMsR0EwUXhDO0lBRUQsT0FBTyxpQkFBZ0YsQ0FBQztBQUMxRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZ2V0TW9kZWxUeXBlLFxuICBJQ29sbGVjdGlvbkNvbnN0cnVjdG9yLFxuICBJSWRlbnRpZmllcixcbiAgSU1vZGVsQ29uc3RydWN0b3IsXG4gIGluaXRNb2RlbFJlZixcbiAgSVR5cGUsXG4gIFB1cmVDb2xsZWN0aW9uLFxuICBQdXJlTW9kZWwsXG4gIFJlZmVyZW5jZVR5cGUsXG4gIHVwZGF0ZU1vZGVsLFxufSBmcm9tICdkYXR4JztcbmltcG9ydCB7SURpY3Rpb25hcnksIElSYXdNb2RlbCwgbWFwSXRlbXN9IGZyb20gJ2RhdHgtdXRpbHMnO1xuaW1wb3J0IHthY3Rpb259IGZyb20gJ21vYngnO1xuXG5pbXBvcnQge2NsZWFyQWxsQ2FjaGUsIGNsZWFyQ2FjaGVCeVR5cGV9IGZyb20gJy4vY2FjaGUnO1xuaW1wb3J0IHtVUkxfUkVHRVh9IGZyb20gJy4vY29uc3RzJztcbmltcG9ydCB7UGFyYW1BcnJheVR5cGV9IGZyb20gJy4vZW51bXMvUGFyYW1BcnJheVR5cGUnO1xuaW1wb3J0IHtHZW5lcmljTW9kZWx9IGZyb20gJy4vR2VuZXJpY01vZGVsJztcbmltcG9ydCB7ZmxhdHRlbk1vZGVsLCByZW1vdmVNb2RlbH0gZnJvbSAnLi9oZWxwZXJzL21vZGVsJztcbmltcG9ydCB7Z2V0VmFsdWV9IGZyb20gJy4vaGVscGVycy91dGlscyc7XG5pbXBvcnQge0lGaWx0ZXJzfSBmcm9tICcuL2ludGVyZmFjZXMvSUZpbHRlcnMnO1xuaW1wb3J0IHtJSGVhZGVyc30gZnJvbSAnLi9pbnRlcmZhY2VzL0lIZWFkZXJzJztcbmltcG9ydCB7SUpzb25hcGlDb2xsZWN0aW9ufSBmcm9tICcuL2ludGVyZmFjZXMvSUpzb25hcGlDb2xsZWN0aW9uJztcbmltcG9ydCB7SUpzb25hcGlNb2RlbH0gZnJvbSAnLi9pbnRlcmZhY2VzL0lKc29uYXBpTW9kZWwnO1xuaW1wb3J0IHtJUmVxdWVzdE9wdGlvbnN9IGZyb20gJy4vaW50ZXJmYWNlcy9JUmVxdWVzdE9wdGlvbnMnO1xuaW1wb3J0IHtJRGVmaW5pdGlvbiwgSVJlbGF0aW9uc2hpcCwgSVJlcXVlc3R9IGZyb20gJy4vaW50ZXJmYWNlcy9Kc29uQXBpJztcbmltcG9ydCB7SVJlY29yZCwgSVJlc3BvbnNlfSBmcm9tICcuL2ludGVyZmFjZXMvSnNvbkFwaSc7XG5pbXBvcnQge2NvbmZpZywgZmV0Y2gsIHJlYWR9IGZyb20gJy4vTmV0d29ya1V0aWxzJztcbmltcG9ydCB7UmVzcG9uc2V9IGZyb20gJy4vUmVzcG9uc2UnO1xuXG5kZWNsYXJlIHZhciB3aW5kb3c6IG9iamVjdHx1bmRlZmluZWQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNvcmF0ZUNvbGxlY3Rpb24oQmFzZUNsYXNzOiB0eXBlb2YgUHVyZUNvbGxlY3Rpb24pIHtcblxuICBjbGFzcyBKc29uYXBpQ29sbGVjdGlvbiBleHRlbmRzIEJhc2VDbGFzcyB7XG5cbiAgICBwdWJsaWMgc3RhdGljIHR5cGVzID0gKEJhc2VDbGFzcy50eXBlcyAmJiBCYXNlQ2xhc3MudHlwZXMubGVuZ3RoKVxuICAgICAgPyBCYXNlQ2xhc3MudHlwZXMuY29uY2F0KEdlbmVyaWNNb2RlbClcbiAgICAgIDogW0dlbmVyaWNNb2RlbF07XG5cbiAgICBwdWJsaWMgc3RhdGljIGNhY2hlOiBib29sZWFuID0gQmFzZUNsYXNzWydjYWNoZSddID09PSB1bmRlZmluZWRcbiAgICAgID8gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgIDogQmFzZUNsYXNzWydjYWNoZSddO1xuXG4gICAgcHVibGljIHN0YXRpYyBkZWZhdWx0TW9kZWwgPSBCYXNlQ2xhc3NbJ2RlZmF1bHRNb2RlbCddIHx8IEdlbmVyaWNNb2RlbDtcblxuICAgIEBhY3Rpb24gcHVibGljIHN5bmM8VCBleHRlbmRzIElKc29uYXBpTW9kZWwgPSBJSnNvbmFwaU1vZGVsPihib2R5PzogSVJlc3BvbnNlKTogVHxBcnJheTxUPnxudWxsIHtcbiAgICAgIGlmICghYm9keSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGRhdGE6IFR8QXJyYXk8VD58bnVsbCA9IHRoaXMuX19pdGVyYXRlRW50cmllcyhib2R5LCAob2JqOiBJUmVjb3JkKSA9PiB0aGlzLl9fYWRkUmVjb3JkPFQ+KG9iaikpO1xuICAgICAgdGhpcy5fX2l0ZXJhdGVFbnRyaWVzKGJvZHksIHRoaXMuX191cGRhdGVSZWxhdGlvbnNoaXBzLmJpbmQodGhpcykpO1xuICAgICAgcmV0dXJuIGRhdGE7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmV0Y2ggdGhlIHJlY29yZHMgd2l0aCB0aGUgZ2l2ZW4gdHlwZSBhbmQgaWRcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFJlY29yZCB0eXBlXG4gICAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB0eXBlIFJlY29yZCBpZFxuICAgICAqIEBwYXJhbSB7SVJlcXVlc3RPcHRpb25zfSBbb3B0aW9uc10gU2VydmVyIG9wdGlvbnNcbiAgICAgKiBAcmV0dXJucyB7UHJvbWlzZTxSZXNwb25zZT59IFJlc29sdmVzIHdpdGggdGhlIFJlc3BvbnNlIG9iamVjdCBvciByZWplY3RzIHdpdGggYW4gZXJyb3JcbiAgICAgKi9cbiAgICBwdWJsaWMgZmV0Y2g8VCBleHRlbmRzIElKc29uYXBpTW9kZWwgPSBJSnNvbmFwaU1vZGVsPihcbiAgICAgIHR5cGU6IElUeXBlfElNb2RlbENvbnN0cnVjdG9yPFQ+LFxuICAgICAgaWQ6IG51bWJlcnxzdHJpbmcsXG4gICAgICBvcHRpb25zPzogSVJlcXVlc3RPcHRpb25zLFxuICAgICk6IFByb21pc2U8UmVzcG9uc2U8VD4+IHtcbiAgICAgIGNvbnN0IG1vZGVsVHlwZSA9IGdldE1vZGVsVHlwZSh0eXBlKTtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5fX3ByZXBhcmVRdWVyeShtb2RlbFR5cGUsIGlkLCB1bmRlZmluZWQsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHJlYWQ8VD4ocXVlcnkudXJsLCB0aGlzLCBxdWVyeS5oZWFkZXJzLCBvcHRpb25zKVxuICAgICAgICAudGhlbigocmVzKSA9PiB0aGlzLl9faGFuZGxlRXJyb3JzPFQ+KHJlcykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZldGNoIHRoZSBmaXJzdCBwYWdlIG9mIHJlY29yZHMgb2YgdGhlIGdpdmVuIHR5cGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFJlY29yZCB0eXBlXG4gICAgICogQHBhcmFtIHtJUmVxdWVzdE9wdGlvbnN9IFtvcHRpb25zXSBTZXJ2ZXIgb3B0aW9uc1xuICAgICAqIEByZXR1cm5zIHtQcm9taXNlPFJlc3BvbnNlPn0gUmVzb2x2ZXMgd2l0aCB0aGUgUmVzcG9uc2Ugb2JqZWN0IG9yIHJlamVjdHMgd2l0aCBhbiBlcnJvclxuICAgICAqL1xuICAgIHB1YmxpYyBmZXRjaEFsbDxUIGV4dGVuZHMgSUpzb25hcGlNb2RlbCA9IElKc29uYXBpTW9kZWw+KFxuICAgICAgdHlwZTogSVR5cGV8SU1vZGVsQ29uc3RydWN0b3I8VD4sXG4gICAgICBvcHRpb25zPzogSVJlcXVlc3RPcHRpb25zLFxuICAgICk6IFByb21pc2U8UmVzcG9uc2U8VD4+IHtcbiAgICAgIGNvbnN0IG1vZGVsVHlwZSA9IGdldE1vZGVsVHlwZSh0eXBlKTtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gdGhpcy5fX3ByZXBhcmVRdWVyeShtb2RlbFR5cGUsIHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiByZWFkPFQ+KHF1ZXJ5LnVybCwgdGhpcywgcXVlcnkuaGVhZGVycywgb3B0aW9ucylcbiAgICAgICAgLnRoZW4oKHJlcykgPT4gdGhpcy5fX2hhbmRsZUVycm9yczxUPihyZXMpKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVxdWVzdDxUIGV4dGVuZHMgSUpzb25hcGlNb2RlbCA9IElKc29uYXBpTW9kZWw+KFxuICAgICAgdXJsOiBzdHJpbmcsXG4gICAgICBtZXRob2Q6IHN0cmluZyA9ICdHRVQnLFxuICAgICAgZGF0YT86IG9iamVjdCxcbiAgICAgIG9wdGlvbnM/OiBJUmVxdWVzdE9wdGlvbnMsXG4gICAgKTogUHJvbWlzZTxSZXNwb25zZTxUPj4ge1xuICAgICAgY29uc3QgcXVlcnkgPSB0aGlzLl9fYnVpbGRVcmwodXJsLCBkYXRhLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBmZXRjaDxUPih7dXJsOiBxdWVyeS51cmwsIG9wdGlvbnMsIGRhdGEsIG1ldGhvZCwgY29sbGVjdGlvbjogdGhpc30pO1xuICAgIH1cblxuICAgIHB1YmxpYyByZW1vdmUodHlwZTogSVR5cGV8dHlwZW9mIFB1cmVNb2RlbCwgaWQ/OiBJSWRlbnRpZmllciwgcmVtb3RlPzogYm9vbGVhbnxJUmVxdWVzdE9wdGlvbnMpO1xuICAgIHB1YmxpYyByZW1vdmUobW9kZWw6IFB1cmVNb2RlbCwgcmVtb3RlPzogYm9vbGVhbnxJUmVxdWVzdE9wdGlvbnMpO1xuICAgIEBhY3Rpb24gcHVibGljIHJlbW92ZShcbiAgICAgIG9iajogSVR5cGV8dHlwZW9mIFB1cmVNb2RlbHxQdXJlTW9kZWwsXG4gICAgICBpZD86IElJZGVudGlmaWVyfGJvb2xlYW58SVJlcXVlc3RPcHRpb25zLFxuICAgICAgcmVtb3RlPzogYm9vbGVhbnxJUmVxdWVzdE9wdGlvbnMsXG4gICAgKSB7XG4gICAgICBjb25zdCByZW1vdmUgPSAodHlwZW9mIGlkID09PSAnYm9vbGVhbicgfHwgdHlwZW9mIGlkID09PSAnb2JqZWN0JykgPyBpZCA6IHJlbW90ZTtcbiAgICAgIGNvbnN0IG1vZGVsSWQgPSAodHlwZW9mIGlkICE9PSAnYm9vbGVhbicgJiYgdHlwZW9mIGlkICE9PSAnb2JqZWN0JykgPyBpZCA6IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IHR5cGUgPSBnZXRNb2RlbFR5cGUob2JqKTtcbiAgICAgIGNvbnN0IG1vZGVsID0gdGhpcy5maW5kKHR5cGUsIG1vZGVsSWQpO1xuXG4gICAgICBpZiAobW9kZWwgJiYgcmVtb3ZlKSB7XG4gICAgICAgIHJldHVybiByZW1vdmVNb2RlbChtb2RlbCwgdHlwZW9mIHJlbW92ZSA9PT0gJ29iamVjdCcgPyByZW1vdmUgOiB1bmRlZmluZWQpO1xuICAgICAgfVxuXG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgc3VwZXIucmVtb3ZlKG1vZGVsKTtcbiAgICAgIH1cbiAgICAgIGNsZWFyQ2FjaGVCeVR5cGUodHlwZSk7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgQGFjdGlvbiBwdWJsaWMgcmVtb3ZlQWxsKHR5cGU6IHN0cmluZyB8IG51bWJlciB8IHR5cGVvZiBQdXJlTW9kZWwpIHtcbiAgICAgIHN1cGVyLnJlbW92ZUFsbCh0eXBlKTtcbiAgICAgIGNsZWFyQ2FjaGVCeVR5cGUoZ2V0TW9kZWxUeXBlKHR5cGUpKTtcbiAgICB9XG5cbiAgICBAYWN0aW9uIHB1YmxpYyByZXNldCgpIHtcbiAgICAgIHN1cGVyLnJlc2V0KCk7XG4gICAgICBjbGVhckFsbENhY2hlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gdXNlZCB0byBoYW5kbGUgcmVzcG9uc2UgZXJyb3JzXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc3BvbnNlIEFQSSByZXNwb25zZVxuICAgICAqIEByZXR1cm5zIEFQSSByZXNwb25zZVxuICAgICAqL1xuICAgIHByaXZhdGUgX19oYW5kbGVFcnJvcnM8VCBleHRlbmRzIElKc29uYXBpTW9kZWw+KHJlc3BvbnNlOiBSZXNwb25zZTxUPikge1xuICAgICAgaWYgKHJlc3BvbnNlLmVycm9yKSB7XG4gICAgICAgIHRocm93IHJlc3BvbnNlLmVycm9yO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfX2FkZFJlY29yZDxUIGV4dGVuZHMgSUpzb25hcGlNb2RlbCA9IElKc29uYXBpTW9kZWw+KG9iajogSVJlY29yZCk6IFQge1xuICAgICAgY29uc3Qgc3RhdGljQ29sbGVjdGlvbiA9IHRoaXMuY29uc3RydWN0b3IgYXMgdHlwZW9mIFB1cmVDb2xsZWN0aW9uO1xuICAgICAgY29uc3Qge3R5cGUsIGlkfSA9IG9iajtcbiAgICAgIGxldCByZWNvcmQ6IFR8bnVsbCA9IHRoaXMuZmluZCh0eXBlLCBpZCkgYXMgVHxudWxsO1xuICAgICAgY29uc3QgZmxhdHRlbmVkOiBJUmF3TW9kZWwgPSBmbGF0dGVuTW9kZWwob2JqKTtcblxuICAgICAgaWYgKHJlY29yZCkge1xuICAgICAgICB1cGRhdGVNb2RlbChyZWNvcmQsIGZsYXR0ZW5lZCk7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRpY0NvbGxlY3Rpb24udHlwZXMuZmlsdGVyKChpdGVtKSA9PiBpdGVtLnR5cGUgPT09IHR5cGUpLmxlbmd0aCkge1xuICAgICAgICByZWNvcmQgPSB0aGlzLmFkZChmbGF0dGVuZWQsIHR5cGUpIGFzIFQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWNvcmQgPSB0aGlzLmFkZChuZXcgR2VuZXJpY01vZGVsKGZsYXR0ZW5lZCkpIGFzIFQ7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZWNvcmQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfX3VwZGF0ZVJlbGF0aW9uc2hpcHMob2JqOiBJUmVjb3JkKTogdm9pZCB7XG4gICAgICBjb25zdCByZWNvcmQ6IFB1cmVNb2RlbHxudWxsID0gdGhpcy5maW5kKG9iai50eXBlLCBvYmouaWQpO1xuICAgICAgY29uc3QgcmVmczogQXJyYXk8c3RyaW5nPiA9IG9iai5yZWxhdGlvbnNoaXBzID8gT2JqZWN0LmtleXMob2JqLnJlbGF0aW9uc2hpcHMpIDogW107XG4gICAgICByZWZzLmZvckVhY2goKHJlZjogc3RyaW5nKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1zID0gKG9iai5yZWxhdGlvbnNoaXBzIGFzIElEaWN0aW9uYXJ5PElSZWxhdGlvbnNoaXA+KVtyZWZdLmRhdGE7XG4gICAgICAgIGlmIChpdGVtcyBpbnN0YW5jZW9mIEFycmF5ICYmIGl0ZW1zLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgICAvLyBpdCdzIG9ubHkgcG9zc2libGUgdG8gdXBkYXRlIGl0ZW1zIHdpdGggb25lIG9yZSBtb3JlIHJlZnMuIEVhcmx5IGV4aXRcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGl0ZW1zICYmIHJlY29yZCkge1xuICAgICAgICAgIGNvbnN0IG1vZGVsczogUHVyZU1vZGVsfEFycmF5PFB1cmVNb2RlbD58SUlkZW50aWZpZXJ8bnVsbCA9IG1hcEl0ZW1zKFxuICAgICAgICAgICAgaXRlbXMsXG4gICAgICAgICAgICAoZGVmOiBJRGVmaW5pdGlvbikgPT4gdGhpcy5maW5kKGRlZi50eXBlLCBkZWYuaWQpIHx8IGRlZi5pZCxcbiAgICAgICAgICApIHx8IG51bGw7XG5cbiAgICAgICAgICBjb25zdCBpdGVtVHlwZTogc3RyaW5nID0gaXRlbXMgaW5zdGFuY2VvZiBBcnJheSA/IGl0ZW1zWzBdLnR5cGUgOiBpdGVtcy50eXBlO1xuICAgICAgICAgIGlmIChyZWYgaW4gcmVjb3JkKSB7XG4gICAgICAgICAgICByZWNvcmRbcmVmXSA9IG1vZGVscztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaW5pdE1vZGVsUmVmKHJlY29yZCwgcmVmLCB7bW9kZWw6IGl0ZW1UeXBlLCB0eXBlOiBSZWZlcmVuY2VUeXBlLlRPX09ORV9PUl9NQU5ZfSwgbW9kZWxzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19pdGVyYXRlRW50cmllczxUIGV4dGVuZHMgSUpzb25hcGlNb2RlbD4oYm9keTogSVJlc3BvbnNlLCBmbjogKGl0ZW06IElSZWNvcmQpID0+IFQpIHtcbiAgICAgIG1hcEl0ZW1zKChib2R5ICYmIGJvZHkuaW5jbHVkZWQpIHx8IFtdLCBmbik7XG4gICAgICByZXR1cm4gbWFwSXRlbXMoKGJvZHkgJiYgYm9keS5kYXRhKSB8fCBbXSwgZm4pO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19wcmVwYXJlUXVlcnkoXG4gICAgICB0eXBlOiBJVHlwZSxcbiAgICAgIGlkPzogbnVtYmVyfHN0cmluZyxcbiAgICAgIGRhdGE/OiBJUmVxdWVzdCxcbiAgICAgIG9wdGlvbnM/OiBJUmVxdWVzdE9wdGlvbnMsXG4gICAgKToge1xuICAgICAgdXJsOiBzdHJpbmcsXG4gICAgICBkYXRhPzogb2JqZWN0LFxuICAgICAgaGVhZGVyczogSUhlYWRlcnMsXG4gICAgfSB7XG4gICAgICBjb25zdCBzdGF0aWNDb2xsZWN0aW9uID0gdGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgUHVyZUNvbGxlY3Rpb247XG4gICAgICBjb25zdCBtb2RlbDogUHVyZU1vZGVsID0gc3RhdGljQ29sbGVjdGlvbi50eXBlcy5maWx0ZXIoKGl0ZW0pID0+IGl0ZW0udHlwZSA9PT0gdHlwZSlbMF07XG4gICAgICBjb25zdCBwYXRoOiBzdHJpbmcgPSBtb2RlbFxuICAgICAgICA/IChnZXRWYWx1ZTxzdHJpbmc+KG1vZGVsWydlbmRwb2ludCddKSB8fCBtb2RlbFsnYmFzZVVybCddIHx8IGdldE1vZGVsVHlwZShtb2RlbCkpXG4gICAgICAgIDogdHlwZTtcblxuICAgICAgY29uc3QgdXJsOiBzdHJpbmcgPSBpZCA/IGAke3BhdGh9LyR7aWR9YCA6IGAke3BhdGh9YDtcbiAgICAgIHJldHVybiB0aGlzLl9fYnVpbGRVcmwodXJsLCBkYXRhLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9fYnVpbGRVcmwodXJsOiBzdHJpbmcsIGRhdGE/OiBJUmVxdWVzdCwgb3B0aW9ucz86IElSZXF1ZXN0T3B0aW9ucykge1xuICAgICAgY29uc3QgaGVhZGVyczogSURpY3Rpb25hcnk8c3RyaW5nPiA9IChvcHRpb25zICYmIG9wdGlvbnMuaGVhZGVycykgfHwge307XG5cbiAgICAgIGNvbnN0IHBhcmFtczogQXJyYXk8c3RyaW5nPiA9IFtcbiAgICAgICAgLi4udGhpcy5fX3ByZXBhcmVGaWx0ZXJzKChvcHRpb25zICYmIG9wdGlvbnMuZmlsdGVyKSB8fCB7fSksXG4gICAgICAgIC4uLnRoaXMuX19wcmVwYXJlU29ydChvcHRpb25zICYmIG9wdGlvbnMuc29ydCksXG4gICAgICAgIC4uLnRoaXMuX19wcmVwYXJlSW5jbHVkZXMob3B0aW9ucyAmJiBvcHRpb25zLmluY2x1ZGUpLFxuICAgICAgICAuLi50aGlzLl9fcHJlcGFyZUZpZWxkcygob3B0aW9ucyAmJiBvcHRpb25zLmZpZWxkcykgfHwge30pLFxuICAgICAgICAuLi50aGlzLl9fcHJlcGFyZVJhd1BhcmFtcygob3B0aW9ucyAmJiBvcHRpb25zLnBhcmFtcykgfHwgW10pLFxuICAgICAgXTtcblxuICAgICAgY29uc3QgYmFzZVVybDogc3RyaW5nID0gdGhpcy5fX2FwcGVuZFBhcmFtcyh0aGlzLl9fcHJlZml4VXJsKHVybCksIHBhcmFtcyk7XG4gICAgICByZXR1cm4ge2RhdGEsIGhlYWRlcnMsIHVybDogYmFzZVVybH07XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfX3ByZXBhcmVGaWx0ZXJzKGZpbHRlcnM6IElGaWx0ZXJzKTogQXJyYXk8c3RyaW5nPiB7XG4gICAgICByZXR1cm4gdGhpcy5fX3BhcmFtZXRyaXplKGZpbHRlcnMpLm1hcCgoaXRlbSkgPT4gYGZpbHRlclske2l0ZW0ua2V5fV09JHtpdGVtLnZhbHVlfWApO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19wcmVwYXJlU29ydChzb3J0Pzogc3RyaW5nfEFycmF5PHN0cmluZz4pOiBBcnJheTxzdHJpbmc+IHtcbiAgICAgIHJldHVybiBzb3J0ID8gW2Bzb3J0PSR7c29ydH1gXSA6IFtdO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19wcmVwYXJlSW5jbHVkZXMoaW5jbHVkZT86IHN0cmluZ3xBcnJheTxzdHJpbmc+KTogQXJyYXk8c3RyaW5nPiB7XG4gICAgICByZXR1cm4gaW5jbHVkZSA/IFtgaW5jbHVkZT0ke2luY2x1ZGV9YF0gOiBbXTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9fcHJlcGFyZUZpZWxkcyhmaWVsZHM6IElEaWN0aW9uYXJ5PHN0cmluZ3xBcnJheTxzdHJpbmc+Pik6IEFycmF5PHN0cmluZz4ge1xuICAgICAgY29uc3QgbGlzdDogQXJyYXk8c3RyaW5nPiA9IFtdO1xuXG4gICAgICBPYmplY3Qua2V5cyhmaWVsZHMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBsaXN0LnB1c2goYGZpZWxkc1ske2tleX1dPSR7ZmllbGRzW2tleV19YCk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfX3ByZXBhcmVSYXdQYXJhbXMocGFyYW1zOiBBcnJheTx7a2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmd9fHN0cmluZz4pOiBBcnJheTxzdHJpbmc+IHtcbiAgICAgIHJldHVybiBwYXJhbXMubWFwKChwYXJhbSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHBhcmFtID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJldHVybiBwYXJhbTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7cGFyYW0ua2V5fT0ke3BhcmFtLnZhbHVlfWA7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBwcml2YXRlIF9fcHJlZml4VXJsKHVybCkge1xuICAgICAgaWYgKFVSTF9SRUdFWC50ZXN0KHVybCkpIHtcbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtjb25maWcuYmFzZVVybH0ke3VybH1gO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19hcHBlbmRQYXJhbXModXJsOiBzdHJpbmcsIHBhcmFtczogQXJyYXk8c3RyaW5nPik6IHN0cmluZyB7XG4gICAgICBpZiAocGFyYW1zLmxlbmd0aCkge1xuICAgICAgICBjb25zdCBzZXBhcmF0b3IgPSB1cmwuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJztcbiAgICAgICAgdXJsICs9IHNlcGFyYXRvciArIHBhcmFtcy5qb2luKCcmJyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIHByaXZhdGUgX19wYXJhbWV0cml6ZShwYXJhbXM6IG9iamVjdCwgc2NvcGU6IHN0cmluZyA9ICcnKSB7XG4gICAgICBjb25zdCBsaXN0OiBBcnJheTx7a2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmd9PiA9IFtdO1xuXG4gICAgICBPYmplY3Qua2V5cyhwYXJhbXMpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBpZiAocGFyYW1zW2tleV0gaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgIGlmIChjb25maWcucGFyYW1BcnJheVR5cGUgPT09IFBhcmFtQXJyYXlUeXBlLk9CSkVDVF9QQVRIKSB7XG4gICAgICAgICAgICBsaXN0LnB1c2goLi4udGhpcy5fX3BhcmFtZXRyaXplKHBhcmFtc1trZXldLCBgJHtrZXl9LmApKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5wYXJhbUFycmF5VHlwZSA9PT0gUGFyYW1BcnJheVR5cGUuQ09NTUFfU0VQQVJBVEVEKSB7XG4gICAgICAgICAgICBsaXN0LnB1c2goe2tleTogYCR7c2NvcGV9JHtrZXl9YCwgdmFsdWU6IHBhcmFtc1trZXldLmpvaW4oJywnKX0pO1xuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLnBhcmFtQXJyYXlUeXBlID09PSBQYXJhbUFycmF5VHlwZS5NVUxUSVBMRV9QQVJBTVMpIHtcbiAgICAgICAgICAgIGxpc3QucHVzaCguLi5wYXJhbXNba2V5XS5tYXAoKHBhcmFtKSA9PiAoe2tleTogYCR7c2NvcGV9JHtrZXl9YCwgdmFsdWU6IHBhcmFtfSkpKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNvbmZpZy5wYXJhbUFycmF5VHlwZSA9PT0gUGFyYW1BcnJheVR5cGUuUEFSQU1fQVJSQVkpIHtcbiAgICAgICAgICAgIGxpc3QucHVzaCguLi5wYXJhbXNba2V5XS5tYXAoKHBhcmFtKSA9PiAoe2tleTogYCR7c2NvcGV9JHtrZXl9XVtgLCB2YWx1ZTogcGFyYW19KSkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcGFyYW1zW2tleV0gPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgbGlzdC5wdXNoKC4uLnRoaXMuX19wYXJhbWV0cml6ZShwYXJhbXNba2V5XSwgYCR7a2V5fS5gKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGlzdC5wdXNoKHtrZXk6IGAke3Njb3BlfSR7a2V5fWAsIHZhbHVlOiBwYXJhbXNba2V5XX0pO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIEpzb25hcGlDb2xsZWN0aW9uIGFzIElDb2xsZWN0aW9uQ29uc3RydWN0b3I8UHVyZUNvbGxlY3Rpb24gJiBJSnNvbmFwaUNvbGxlY3Rpb24+O1xufVxuIl19","map":{"mappings":""},"dts":{"name":"/Users/darko/Projects/mobx/datx/packages/datx-jsonapi/decorateCollection.d.ts","text":"import { ICollectionConstructor, PureCollection } from 'datx';\r\nimport { IJsonapiCollection } from './interfaces/IJsonapiCollection';\r\nexport declare function decorateCollection(BaseClass: typeof PureCollection): ICollectionConstructor<PureCollection & IJsonapiCollection>;\r\n"}}
