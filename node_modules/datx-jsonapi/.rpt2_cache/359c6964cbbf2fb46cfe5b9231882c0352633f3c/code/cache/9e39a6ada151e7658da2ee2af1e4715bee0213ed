{"code":"import * as tslib_1 from \"tslib\";\r\nimport { flattenModel, removeModel, saveModel } from './helpers/model';\r\nexport function decorateModel(BaseClass) {\r\n    var JsonapiModel = /** @class */ (function (_super) {\r\n        tslib_1.__extends(JsonapiModel, _super);\r\n        function JsonapiModel(rawData, collection) {\r\n            if (rawData === void 0) { rawData = {}; }\r\n            var _this = this;\r\n            var data = rawData;\r\n            if ('type' in rawData && ('attributes' in rawData || 'relationships' in rawData)) {\r\n                data = flattenModel(rawData);\r\n            }\r\n            _this = _super.call(this, data, collection) || this;\r\n            return _this;\r\n        }\r\n        JsonapiModel.prototype.save = function (options) {\r\n            return saveModel(this, options);\r\n        };\r\n        JsonapiModel.prototype.destroy = function (options) {\r\n            return removeModel(this, options);\r\n        };\r\n        /**\r\n         * Should the autogenerated ID be sent to the server when creating a record\r\n         *\r\n         * @static\r\n         * @type {boolean}\r\n         * @memberOf Record\r\n         */\r\n        JsonapiModel.useAutogeneratedIds = BaseClass['useAutogeneratedIds'] || false;\r\n        return JsonapiModel;\r\n    }(BaseClass));\r\n    return JsonapiModel;\r\n}\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjb3JhdGVNb2RlbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInNyYy9kZWNvcmF0ZU1vZGVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFHQSxPQUFPLEVBQUMsWUFBWSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUMsTUFBTSxpQkFBaUIsQ0FBQztBQUlyRSxNQUFNLHdCQUF3QixTQUEyQjtJQUV2RDtRQUEyQix3Q0FBUztRQW9CbEMsc0JBQVksT0FBK0IsRUFBRSxVQUEyQjtZQUE1RCx3QkFBQSxFQUFBLFlBQStCO1lBQTNDLGlCQU1DO1lBTEMsSUFBSSxJQUFJLEdBQUcsT0FBTyxDQUFDO1lBQ25CLEVBQUUsQ0FBQyxDQUFDLE1BQU0sSUFBSSxPQUFPLElBQUksQ0FBQyxZQUFZLElBQUksT0FBTyxJQUFJLGVBQWUsSUFBSSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2pGLElBQUksR0FBRyxZQUFZLENBQUMsT0FBa0IsQ0FBQyxDQUFDO1lBQzFDLENBQUM7WUFDRCxRQUFBLGtCQUFNLElBQUksRUFBRSxVQUFVLENBQUMsU0FBQzs7UUFDMUIsQ0FBQztRQUVNLDJCQUFJLEdBQVgsVUFBWSxPQUF5QjtZQUNuQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztRQUNsQyxDQUFDO1FBRU0sOEJBQU8sR0FBZCxVQUFlLE9BQXlCO1lBQ3RDLE1BQU0sQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3BDLENBQUM7UUFoQ0Q7Ozs7OztXQU1HO1FBQ1csZ0NBQW1CLEdBQVksU0FBUyxDQUFDLHFCQUFxQixDQUFDLElBQUksS0FBSyxDQUFDO1FBMEJ6RixtQkFBQztLQUFBLEFBbkNELENBQTJCLFNBQVMsR0FtQ25DO0lBRUQsTUFBTSxDQUFDLFlBQWdDLENBQUM7QUFDMUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7UHVyZUNvbGxlY3Rpb24sIFB1cmVNb2RlbH0gZnJvbSAnZGF0eCc7XG5pbXBvcnQge0lSYXdNb2RlbH0gZnJvbSAnZGF0eC11dGlscyc7XG5cbmltcG9ydCB7ZmxhdHRlbk1vZGVsLCByZW1vdmVNb2RlbCwgc2F2ZU1vZGVsfSBmcm9tICcuL2hlbHBlcnMvbW9kZWwnO1xuaW1wb3J0IHtJUmVxdWVzdE9wdGlvbnN9IGZyb20gJy4vaW50ZXJmYWNlcy9JUmVxdWVzdE9wdGlvbnMnO1xuaW1wb3J0IHtJUmVjb3JkfSBmcm9tICcuL2ludGVyZmFjZXMvSnNvbkFwaSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWNvcmF0ZU1vZGVsKEJhc2VDbGFzczogdHlwZW9mIFB1cmVNb2RlbCkge1xuXG4gIGNsYXNzIEpzb25hcGlNb2RlbCBleHRlbmRzIEJhc2VDbGFzcyB7XG5cbiAgICAvKipcbiAgICAgKiBTaG91bGQgdGhlIGF1dG9nZW5lcmF0ZWQgSUQgYmUgc2VudCB0byB0aGUgc2VydmVyIHdoZW4gY3JlYXRpbmcgYSByZWNvcmRcbiAgICAgKlxuICAgICAqIEBzdGF0aWNcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKiBAbWVtYmVyT2YgUmVjb3JkXG4gICAgICovXG4gICAgcHVibGljIHN0YXRpYyB1c2VBdXRvZ2VuZXJhdGVkSWRzOiBib29sZWFuID0gQmFzZUNsYXNzWyd1c2VBdXRvZ2VuZXJhdGVkSWRzJ10gfHwgZmFsc2U7XG5cbiAgICAvKipcbiAgICAgKiBFbmRwb2ludCBmb3IgQVBJIHJlcXVlc3RzIGlmIHRoZXJlIGlzIG5vIHNlbGYgbGlua1xuICAgICAqXG4gICAgICogQHN0YXRpY1xuICAgICAqIEB0eXBlIHtzdHJpbmd8KCkgPT4gc3RyaW5nfVxuICAgICAqIEBtZW1iZXJPZiBSZWNvcmRcbiAgICAgKi9cbiAgICBwdWJsaWMgc3RhdGljIGVuZHBvaW50OiBzdHJpbmd8KCgpID0+IHN0cmluZyk7XG5cbiAgICBjb25zdHJ1Y3RvcihyYXdEYXRhOiBJUmF3TW9kZWx8SVJlY29yZCA9IHt9LCBjb2xsZWN0aW9uPzogUHVyZUNvbGxlY3Rpb24pIHtcbiAgICAgIGxldCBkYXRhID0gcmF3RGF0YTtcbiAgICAgIGlmICgndHlwZScgaW4gcmF3RGF0YSAmJiAoJ2F0dHJpYnV0ZXMnIGluIHJhd0RhdGEgfHwgJ3JlbGF0aW9uc2hpcHMnIGluIHJhd0RhdGEpKSB7XG4gICAgICAgIGRhdGEgPSBmbGF0dGVuTW9kZWwocmF3RGF0YSBhcyBJUmVjb3JkKTtcbiAgICAgIH1cbiAgICAgIHN1cGVyKGRhdGEsIGNvbGxlY3Rpb24pO1xuICAgIH1cblxuICAgIHB1YmxpYyBzYXZlKG9wdGlvbnM/OiBJUmVxdWVzdE9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBzYXZlTW9kZWwodGhpcywgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgcHVibGljIGRlc3Ryb3kob3B0aW9ucz86IElSZXF1ZXN0T3B0aW9ucykge1xuICAgICAgcmV0dXJuIHJlbW92ZU1vZGVsKHRoaXMsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBKc29uYXBpTW9kZWwgYXMgdHlwZW9mIFB1cmVNb2RlbDtcbn1cbiJdfQ==","map":{"mappings":""},"dts":{"name":"/Users/darko/Projects/mobx/datx/packages/datx-jsonapi/decorateModel.d.ts","text":"import { PureModel } from 'datx';\r\nexport declare function decorateModel(BaseClass: typeof PureModel): typeof PureModel;\r\n"}}
